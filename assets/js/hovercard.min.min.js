$(document).ready(function(){var a={};
var c={};
if($("#hovercard").length<=0){var b='<style id="hovercard" type="text/css">.hc-preview { position: relative;
 display:inline;
 }.hc-name { font-weight:bold;
 position:relative;
 display:inline-block;
 }.hc-details { left:-10px;
 margin-right:80px;
 text-align:left;
 font-family:Sans-serif !important;
 font-size:12px !important;
 color:#666 !important;
 line-height:1.5em;
 border:solid 1px #ddd;
 position:absolute;
-moz-border-radius:3px;
-webkit-border-radius:3px;
border-radius:3px;
top:-10px;
padding:2em 10px 10px;
-moz-box-shadow:5px 5px 5px #888;
-webkit-box-shadow:5px 5px 5px #888;
box-shadow:5px 5px 5px #888;
display:none;
}.</style>")';
$(b).appendTo("head")}$("a.profile").each(function(){var e=$(this);
var f=e.attr("id");
e.wrap('<div class="hc-preview" />');
e.addClass("hc-name");
e.after('<div class="hc-details"></div>');
e.siblings(".hc-details").eq(0).css({width:"150px",background:"#ffffff"});
e.closest(".hc-preview").click(function(){if(c[f]){bootbox.dialog({message:c[f],className:"map_",title:"<b>"+e.text()+"</b>",buttons:{primary:{label:"Go to profile",className:"btn-info no-border",callback:function(){window.location.href=_PAGE_URL+"profile/"+f}},close:{label:"Close",className:"btn-danger no-border"}}})}else{bootbox.dialog({message:'<center><i class="icon-spinner icon-4x icon-spin" style="padding:5px;
"></i></center>',className:"map_",title:"<b>"+e.text()+"</b>",buttons:{primary:{label:"Close",className:"btn-primary no-border"}}});
$.ajax({url:_PAGE_URL+"action/profile",type:"POST",data:{id:f},success:function(g){c[f]=g;
bootbox.hideAll();
bootbox.dialog({message:c[f],className:"map_",title:"<b>"+e.text()+"</b>",buttons:{primary:{label:"Go to profile",className:"btn-info no-border",callback:function(){window.location.href=_PAGE_URL+"profile/"+f}},close:{label:"Close",className:"btn-danger no-border"}}})}})}return false}),e.closest(".hc-preview").hover(function(){var h=$(this);
d(h);
h.css("zIndex","200");
e.css("zIndex","100").find(".hc-details").css("zIndex","50");
var g=h.find(".hc-details").eq(0);
g.stop(true,true).delay(0).fadeIn();
h.find(".hc-details").html("<i class='icon-refresh icon-spin'></i>");
if(a[f]){h.find(".hc-details").html(a[f]);
h.css("zIndex","200");
e.css("zIndex","100").find(".hc-details").css("zIndex","50")}else{$.ajax({url:_PAGE_URL+"action/hcard",type:"POST",data:{id:f},success:function(i){a[f]=i;
h.find(".hc-details").html(a[f]);
h.css("zIndex","200");
e.css("zIndex","100").find(".hc-details").css("zIndex","50")}})}},function(){$this=$(this);
$this.find(".hc-details").eq(0).stop(true,true).fadeOut(300,function(){$this.css("zIndex","0");
e.css("zIndex","0").find(".hc-details").css("zIndex","0")})});
function d(i){var h=i.find(".hc-details").eq(0);
var g=i[0].getBoundingClientRect();
var k=g.top-20;
var j=g.left+35+h.width();
var m=g.top+35+h.height();
var l=g.top-10}})});
