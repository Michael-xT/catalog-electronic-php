(function(b){b.jgrid=b.jgrid||{};b.extend(b.jgrid,{version:"4.5.2",htmlDecode:function(b){return b&&("&nbsp;"===b||"&#160;"===b||1===b.length&&160===b.charCodeAt(0))?"":!b?b:(""+b).replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/&quot;/g,'"').replace(/&amp;/g,"&")},htmlEncode:function(b){return !b?b:(""+b).replace(/&/g,"&amp;").replace(/\"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},format:function(d){var f=b.makeArray(arguments).slice(1);null==d&&(d="");return d.replace(/\{(\d+)\}/g,function(b,e){return f[e]})},msie:"Microsoft Internet Explorer"===navigator.appName,msiever:function(){var b=-1;null!=/MSIE ([0-9]{1,}[.0-9]{0,})/.exec(navigator.userAgent)&&(b=parseFloat(RegExp.$1));return b},getCellIndex:function(d){d=b(d);if(d.is("tr")){return -1}d=(!d.is("td")&&!d.is("th")?d.closest("td,th"):d)[0];return b.jgrid.msie?b.inArray(d,d.parentNode.cells):d.cellIndex},stripHtml:function(b){var b=""+b,f=/<("[^"]*"|'[^']*'|[^'">])*>/gi;return b?(b=b.replace(f,""))&&"&nbsp;"!==b&&"&#160;"!==b?b.replace(/\"/g,"'"):"":b},stripPref:function(d,f){var c=b.type(d);if("string"===c||"number"===c){d=""+d,f=""!==d?(""+f).replace(""+d,""):f}return f},parse:function(d){"while(1);"===d.substr(0,9)&&(d=d.substr(9));"/*"===d.substr(0,2)&&(d=d.substr(2,d.length-4));d||(d="{}");return !0===b.jgrid.useJSON&&"object"===typeof JSON&&"function"===typeof JSON.parse?JSON.parse(d):eval("("+d+")")},parseDate:function(d,f,c,e){var a=/^\/Date\((([-+])?[0-9]+)(([-+])([0-9]{2})([0-9]{2}))?\)\/$/,j="string"===typeof f?f.match(a):null,a=function(a,b){a=""+a;for(b=parseInt(b,10)||2;a.length<b;){a="0"+a}return a},g={m:1,d:1,y:1970,h:0,i:0,s:0,u:0},h=0,i,k,h=function(a,b){0===a?12===b&&(b=0):12!==b&&(b+=12);return b};void 0===e&&(e=b.jgrid.formatter.date);void 0===e.parseRe&&(e.parseRe=/[Tt\\\/:_;.,\t\s-]/);e.masks.hasOwnProperty(d)&&(d=e.masks[d]);if(f&&null!=f){if(!isNaN(f-0)&&"u"===(""+d).toLowerCase()){h=new Date(1000*parseFloat(f))}else{if(f.constructor===Date){h=f}else{if(null!==j){h=new Date(parseInt(j[1],10)),j[3]&&(d=60*Number(j[5])+Number(j[6]),d*="-"===j[4]?1:-1,d-=h.getTimezoneOffset(),h.setTime(Number(Number(h)+60000*d)))}else{f=(""+f).replace(/\\T/g,"T").replace(/\\t/,"t").split(e.parseRe);d=d.replace(/\\T/g,"T").replace(/\\t/,"t").split(e.parseRe);i=0;for(k=d.length;i<k;i++){"M"===d[i]&&(j=b.inArray(f[i],e.monthNames),-1!==j&&12>j&&(f[i]=j+1,g.m=f[i])),"F"===d[i]&&(j=b.inArray(f[i],e.monthNames,12),-1!==j&&11<j&&(f[i]=j+1-12,g.m=f[i])),"a"===d[i]&&(j=b.inArray(f[i],e.AmPm),-1!==j&&2>j&&f[i]===e.AmPm[j]&&(f[i]=j,g.h=h(f[i],g.h))),"A"===d[i]&&(j=b.inArray(f[i],e.AmPm),-1!==j&&1<j&&f[i]===e.AmPm[j]&&(f[i]=j-2,g.h=h(f[i],g.h))),"g"===d[i]&&(g.h=parseInt(f[i],10)),void 0!==f[i]&&(g[d[i].toLowerCase()]=parseInt(f[i],10))}g.f&&(g.m=g.f);if(0===g.m&&0===g.y&&0===g.d){return"&#160;"}g.m=parseInt(g.m,10)-1;h=g.y;70<=h&&99>=h?g.y=1900+g.y:0<=h&&69>=h&&(g.y=2000+g.y);h=new Date(g.y,g.m,g.d,g.h,g.i,g.s,g.u)}}}}else{h=new Date(g.y,g.m,g.d,g.h,g.i,g.s,g.u)}if(void 0===c){return h}e.masks.hasOwnProperty(c)?c=e.masks[c]:c||(c="Y-m-d");d=h.getHours();f=h.getMinutes();g=h.getDate();j=h.getMonth()+1;i=h.getTimezoneOffset();k=h.getSeconds();var l=h.getMilliseconds(),o=h.getDay(),n=h.getFullYear(),m=(o+6)%7+1,t=(new Date(n,j-1,g)-new Date(n,0,1))/86400000,A={d:a(g),D:e.dayNames[o],j:g,l:e.dayNames[o+7],N:m,S:e.S(g),w:o,z:t,W:5>m?Math.floor((t+m-1)/7)+1:Math.floor((t+m-1)/7)||(4>((new Date(n-1,0,1)).getDay()+6)%7?53:52),F:e.monthNames[j-1+12],m:a(j),M:e.monthNames[j-1],n:j,t:"?",L:"?",o:"?",Y:n,y:(""+n).substring(2),a:12>d?e.AmPm[0]:e.AmPm[1],A:12>d?e.AmPm[2]:e.AmPm[3],B:"?",g:d%12||12,G:d,h:a(d%12||12),H:a(d),i:a(f),s:a(k),u:l,e:"?",I:"?",O:(0<i?"-":"+")+a(100*Math.floor(Math.abs(i)/60)+Math.abs(i)%60,4),P:"?",T:((""+h).match(/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g)||[""]).pop().replace(/[^-+\dA-Z]/g,""),Z:"?",c:"?",r:"?",U:Math.floor(h/1000)};return c.replace(/\\.|[dDjlNSwzWFmMntLoYyaABgGhHisueIOPTZcrU]/g,function(a){return A.hasOwnProperty(a)?A[a]:a.substring(1)})},jqID:function(b){return(""+b).replace(/[!"#$%&'()*+,.\/:; <=>?@\[\\\]\^`{|}~]/g,"\\$&")},guid:1,uidPref:"jqg",randId:function(d){return(d||b.jgrid.uidPref)+b.jgrid.guid++},getAccessor:function(b,f){var c,e,a=[],j;if("function"===typeof f){return f(b)}c=b[f];if(void 0===c){try{if("string"===typeof f&&(a=f.split(".")),j=a.length){for(c=b;c&&j--;){e=a.shift(),c=c[e]}}}catch(g){}}return c},getXmlData:function(d,f,c){var e="string"===typeof f?f.match(/^(.*)\[(\w+)\]$/):null;if("function"===typeof f){return f(d)}if(e&&e[2]){return e[1]?b(e[1],d).attr(e[2]):b(d).attr(e[2])}d=b(f,d);return c?d:0<d.length?b(d).text():void 0},cellWidth:function(){var d=b("<div class='ui-jqgrid' style='left:10000px'><table class='ui-jqgrid-btable' style='width:5px;'><tr class='jqgrow'><td style='width:5px;'></td></tr></table></div>"),f=d.appendTo("body").find("td").width();d.remove();return 5!==f},cell_width:!0,ajaxOptions:{},from:function(d){return new function(d,c){"string"===typeof d&&(d=b.data(d));var e=this,a=d,j=!0,g=!1,h=c,i=/[\$,%]/g,k=null,l=null,o=0,n=!1,m="",t=[],A=!0;if("object"===typeof d&&d.push){0<d.length&&(A="object"!==typeof d[0]?!1:!0)}else{throw"data provides is not an array"}this._hasData=function(){return null===a?!1:0===a.length?!1:!0};this._getStr=function(a){var b=[];g&&b.push("jQuery.trim(");b.push("String("+a+")");g&&b.push(")");j||b.push(".toLowerCase()");return b.join("")};this._strComp=function(a){return"string"===typeof a?".toString()":""};this._group=function(a,b){return{field:a.toString(),unique:b,items:[]}};this._toStr=function(a){g&&(a=b.trim(a));a=a.toString().replace(/\\/g,"\\\\").replace(/\"/g,'\\"');return j?a:a.toLowerCase()};this._funcLoop=function(e){var d=[];b.each(a,function(a,b){d.push(e(b))});return d};this._append=function(a){var b;h=null===h?"":h+(""===m?" && ":m);for(b=0;b<o;b++){h+="("}n&&(h+="!");h+="("+a+")";n=!1;m="";o=0};this._setCommand=function(a,b){k=a;l=b};this._resetNegate=function(){n=!1};this._repeatCommand=function(a,b){return null===k?e:null!==a&&null!==b?k(a,b):null===l||!A?k(a):k(l,a)};this._equals=function(a,b){return 0===e._compare(a,b,1)};this._compare=function(a,b,e){var d=Object.prototype.toString;void 0===e&&(e=1);void 0===a&&(a=null);void 0===b&&(b=null);if(null===a&&null===b){return 0}if(null===a&&null!==b){return 1}if(null!==a&&null===b){return -1}if("[object Date]"===d.call(a)&&"[object Date]"===d.call(b)){return a<b?-e:a>b?e:0}!j&&"number"!==typeof a&&"number"!==typeof b&&(a=""+a,b=""+b);return a<b?-e:a>b?e:0};this._performSort=function(){0!==t.length&&(a=e._doSort(a,0))};this._doSort=function(a,b){var d=t[b].by,g=t[b].dir,j=t[b].type,c=t[b].datefmt;if(b===t.length-1){return e._getOrder(a,d,g,j,c)}b++;for(var d=e._getGroup(a,d,g,j,c),g=[],f,j=0;j<d.length;j++){f=e._doSort(d[j].items,b);for(c=0;c<f.length;c++){g.push(f[c])}}return g};this._getOrder=function(a,d,g,c,f){var h=[],k=[],l="a"===g?1:-1,o,n;void 0===c&&(c="text");n="float"===c||"number"===c||"currency"===c||"numeric"===c?function(a){a=parseFloat((""+a).replace(i,""));return isNaN(a)?0:a}:"int"===c||"integer"===c?function(a){return a?parseFloat((""+a).replace(i,"")):0}:"date"===c||"datetime"===c?function(a){return b.jgrid.parseDate(f,a).getTime()}:b.isFunction(c)?c:function(a){a=a?b.trim(""+a):"";return j?a:a.toLowerCase()};b.each(a,function(a,e){o=""!==d?b.jgrid.getAccessor(e,d):e;void 0===o&&(o="");o=n(o,e);k.push({vSort:o,index:a})});k.sort(function(a,b){a=a.vSort;b=b.vSort;return e._compare(a,b,l)});for(var c=0,m=a.length;c<m;){g=k[c].index,h.push(a[g]),c++}return h};this._getGroup=function(a,d,g,j,c){var f=[],h=null,i=null,k;b.each(e._getOrder(a,d,g,j,c),function(a,g){k=b.jgrid.getAccessor(g,d);null==k&&(k="");e._equals(i,k)||(i=k,null!==h&&f.push(h),h=e._group(d,k));h.items.push(g)});null!==h&&f.push(h);return f};this.ignoreCase=function(){j=!1;return e};this.useCase=function(){j=!0;return e};this.trim=function(){g=!0;return e};this.noTrim=function(){g=!1;return e};this.execute=function(){var d=h,g=[];if(null===d){return e}b.each(a,function(){eval(d)&&g.push(this)});a=g;return e};this.data=function(){return a};this.select=function(d){e._performSort();if(!e._hasData()){return[]}e.execute();if(b.isFunction(d)){var g=[];b.each(a,function(a,b){g.push(d(b))});return g}return a};this.hasMatch=function(){if(!e._hasData()){return !1}e.execute();return 0<a.length};this.andNot=function(a,b,d){n=!n;return e.and(a,b,d)};this.orNot=function(a,b,d){n=!n;return e.or(a,b,d)};this.not=function(a,b,d){return e.andNot(a,b,d)};this.and=function(a,b,d){m=" && ";return void 0===a?e:e._repeatCommand(a,b,d)};this.or=function(a,b,d){m=" || ";return void 0===a?e:e._repeatCommand(a,b,d)};this.orBegin=function(){o++;return e};this.orEnd=function(){null!==h&&(h+=")");return e};this.isNot=function(a){n=!n;return e.is(a)};this.is=function(a){e._append("this."+a);e._resetNegate();return e};this._compareValues=function(a,d,g,j,c){var f;f=A?"jQuery.jgrid.getAccessor(this,'"+d+"')":"this";void 0===g&&(g=null);var h=g,k=void 0===c.stype?"text":c.stype;if(null!==g){switch(k){case"int":case"integer":h=isNaN(Number(h))||""===h?"0":h;f="parseInt("+f+",10)";h="parseInt("+h+",10)";break;case"float":case"number":case"numeric":h=(""+h).replace(i,"");h=isNaN(Number(h))||""===h?"0":h;f="parseFloat("+f+")";h="parseFloat("+h+")";break;case"date":case"datetime":h=""+b.jgrid.parseDate(c.newfmt||"Y-m-d",h).getTime();f='jQuery.jgrid.parseDate("'+c.srcfmt+'",'+f+").getTime()";break;default:f=e._getStr(f),h=e._getStr('"'+e._toStr(h)+'"')}}e._append(f+" "+j+" "+h);e._setCommand(a,d);e._resetNegate();return e};this.equals=function(a,b,d){return e._compareValues(e.equals,a,b,"==",d)};this.notEquals=function(a,b,d){return e._compareValues(e.equals,a,b,"!==",d)};this.isNull=function(a,b,d){return e._compareValues(e.equals,a,null,"===",d)};this.greater=function(a,b,d){return e._compareValues(e.greater,a,b,">",d)};this.less=function(a,b,d){return e._compareValues(e.less,a,b,"<",d)};this.greaterOrEquals=function(a,b,d){return e._compareValues(e.greaterOrEquals,a,b,">=",d)};this.lessOrEquals=function(a,b,d){return e._compareValues(e.lessOrEquals,a,b,"<=",d)};this.startsWith=function(a,d){var c=null==d?a:d,c=g?b.trim(c.toString()).length:c.toString().length;A?e._append(e._getStr("jQuery.jgrid.getAccessor(this,'"+a+"')")+".substr(0,"+c+") == "+e._getStr('"'+e._toStr(d)+'"')):(c=g?b.trim(d.toString()).length:d.toString().length,e._append(e._getStr("this")+".substr(0,"+c+") == "+e._getStr('"'+e._toStr(a)+'"')));e._setCommand(e.startsWith,a);e._resetNegate();return e};this.endsWith=function(a,d){var c=null==d?a:d,c=g?b.trim(c.toString()).length:c.toString().length;A?e._append(e._getStr("jQuery.jgrid.getAccessor(this,'"+a+"')")+".substr("+e._getStr("jQuery.jgrid.getAccessor(this,'"+a+"')")+".length-"+c+","+c+') == "'+e._toStr(d)+'"'):e._append(e._getStr("this")+".substr("+e._getStr("this")+'.length-"'+e._toStr(a)+'".length,"'+e._toStr(a)+'".length) == "'+e._toStr(a)+'"');e._setCommand(e.endsWith,a);e._resetNegate();return e};this.contains=function(a,b){A?e._append(e._getStr("jQuery.jgrid.getAccessor(this,'"+a+"')")+'.indexOf("'+e._toStr(b)+'",0) > -1'):e._append(e._getStr("this")+'.indexOf("'+e._toStr(a)+'",0) > -1');e._setCommand(e.contains,a);e._resetNegate();return e};this.groupBy=function(b,d,g,c){return !e._hasData()?null:e._getGroup(a,b,d,g,c)};this.orderBy=function(a,d,g,c){d=null==d?"a":b.trim(d.toString().toLowerCase());null==g&&(g="text");null==c&&(c="Y-m-d");if("desc"===d||"descending"===d){d="d"}if("asc"===d||"ascending"===d){d="a"}t.push({by:a,dir:d,type:g,datefmt:c});return e};return e}(d,null)},getMethod:function(d){return this.getAccessor(b.fn.jqGrid,d)},extend:function(d){b.extend(b.fn.jqGrid,d);this.no_legacy_api||b.fn.extend(d)}});b.fn.jqGrid=function(d){if("string"===typeof d){var f=b.jgrid.getMethod(d);if(!f){throw"jqGrid - No such method: "+d}var c=b.makeArray(arguments).slice(1);return f.apply(this,c)}return this.each(function(){if(!this.grid){var e=b.extend(!0,{url:"",height:150,page:1,rowNum:20,rowTotal:null,records:0,pager:"",pgbuttons:!0,pginput:!0,colModel:[],rowList:[],colNames:[],sortorder:"asc",sortname:"",datatype:"xml",mtype:"GET",altRows:!1,selarrrow:[],savedRow:[],shrinkToFit:!0,xmlReader:{},jsonReader:{},subGrid:!1,subGridModel:[],reccount:0,lastpage:0,lastsort:0,selrow:null,beforeSelectRow:null,onSelectRow:null,onSortCol:null,ondblClickRow:null,onRightClickRow:null,onPaging:null,onSelectAll:null,onInitGrid:null,loadComplete:null,gridComplete:null,loadError:null,loadBeforeSend:null,afterInsertRow:null,beforeRequest:null,beforeProcessing:null,onHeaderClick:null,viewrecords:!1,loadonce:!1,multiselect:!1,multikey:!1,editurl:null,search:!1,caption:"",hidegrid:!0,hiddengrid:!1,postData:{},userData:{},treeGrid:!1,treeGridModel:"nested",treeReader:{},treeANode:-1,ExpandColumn:null,tree_root_level:0,prmNames:{page:"page",rows:"rows",sort:"sidx",order:"sord",search:"_search",nd:"nd",id:"id",oper:"oper",editoper:"edit",addoper:"add",deloper:"del",subgridid:"id",npage:null,totalrows:"totalrows"},forceFit:!1,gridstate:"visible",cellEdit:!1,cellsubmit:"remote",nv:0,loadui:"enable",toolbar:[!1,""],scroll:!1,multiboxonly:!1,deselectAfterSort:!0,scrollrows:!1,autowidth:!1,scrollOffset:18,cellLayout:5,subGridWidth:20,multiselectWidth:20,gridview:!1,rownumWidth:25,rownumbers:!1,pagerpos:"center",recordpos:"right",footerrow:!1,userDataOnFooter:!1,hoverrows:!0,altclass:"ui-priority-secondary",viewsortcols:[!1,"vertical",!0],resizeclass:"",autoencode:!1,remapColumns:[],ajaxGridOptions:{},direction:"ltr",toppager:!1,headertitles:!1,scrollTimeout:40,data:[],_index:{},grouping:!1,groupingView:{groupField:[],groupOrder:[],groupText:[],groupColumnShow:[],groupSummary:[],showSummaryOnHide:!1,sortitems:[],sortnames:[],summary:[],summaryval:[],plusicon:"ui-icon-circlesmall-plus",minusicon:"ui-icon-circlesmall-minus",displayField:[]},ignoreCase:!1,cmTemplate:{},idPrefix:"",multiSort:!1},b.jgrid.defaults,d||{}),a=this,c={headers:[],cols:[],footers:[],dragStart:function(c,d,g){this.resizing={idx:c,startX:d.clientX,sOL:g[0]};this.hDiv.style.cursor="col-resize";this.curGbox=b("#rs_m"+b.jgrid.jqID(e.id),"#gbox_"+b.jgrid.jqID(e.id));this.curGbox.css({display:"block",left:g[0],top:g[1],height:g[2]});b(a).triggerHandler("jqGridResizeStart",[d,c]);b.isFunction(e.resizeStart)&&e.resizeStart.call(a,d,c);document.onselectstart=function(){return !1}},dragMove:function(a){if(this.resizing){var b=a.clientX-this.resizing.startX,a=this.headers[this.resizing.idx],c="ltr"===e.direction?a.width+b:a.width-b,d;33<c&&(this.curGbox.css({left:this.resizing.sOL+b}),!0===e.forceFit?(d=this.headers[this.resizing.idx+e.nv],b="ltr"===e.direction?d.width-b:d.width+b,33<b&&(a.newWidth=c,d.newWidth=b)):(this.newWidth="ltr"===e.direction?e.tblwidth+b:e.tblwidth-b,a.newWidth=c))}},dragEnd:function(){this.hDiv.style.cursor="default";if(this.resizing){var c=this.resizing.idx,d=this.headers[c].newWidth||this.headers[c].width,d=parseInt(d,10);this.resizing=!1;b("#rs_m"+b.jgrid.jqID(e.id)).css("display","none");e.colModel[c].width=d;this.headers[c].width=d;this.headers[c].el.style.width=d+"px";this.cols[c].style.width=d+"px";0<this.footers.length&&(this.footers[c].style.width=d+"px");!0===e.forceFit?(d=this.headers[c+e.nv].newWidth||this.headers[c+e.nv].width,this.headers[c+e.nv].width=d,this.headers[c+e.nv].el.style.width=d+"px",this.cols[c+e.nv].style.width=d+"px",0<this.footers.length&&(this.footers[c+e.nv].style.width=d+"px"),e.colModel[c+e.nv].width=d):(e.tblwidth=this.newWidth||e.tblwidth,b("table:first",this.bDiv).css("width",e.tblwidth+"px"),b("table:first",this.hDiv).css("width",e.tblwidth+"px"),this.hDiv.scrollLeft=this.bDiv.scrollLeft,e.footerrow&&(b("table:first",this.sDiv).css("width",e.tblwidth+"px"),this.sDiv.scrollLeft=this.bDiv.scrollLeft));b(a).triggerHandler("jqGridResizeStop",[d,c]);b.isFunction(e.resizeStop)&&e.resizeStop.call(a,d,c)}this.curGbox=null;document.onselectstart=function(){return !0}},populateVisible:function(){c.timer&&clearTimeout(c.timer);c.timer=null;var a=b(c.bDiv).height();if(a){var d=b("table:first",c.bDiv),g,f;if(d[0].rows.length){try{f=(g=d[0].rows[1])?b(g).outerHeight()||c.prevRowHeight:c.prevRowHeight}catch(ua){f=c.prevRowHeight}}if(f){c.prevRowHeight=f;var h=e.rowNum;g=c.scrollTop=c.bDiv.scrollTop;var i=Math.round(d.position().top)-g,k=i+d.height();f*=h;var z,F,y;if(k<a&&0>=i&&(void 0===e.lastpage||parseInt((k+g+f-1)/f,10)<=e.lastpage)){F=parseInt((a-k+f-1)/f,10),0<=k||2>F||!0===e.scroll?(z=Math.round((k+g)/f)+1,i=-1):i=1}0<i&&(z=parseInt(g/f,10)+1,F=parseInt((g+a)/f,10)+2-z,y=!0);if(F&&(!e.lastpage||!(z>e.lastpage||1===e.lastpage||z===e.page&&z===e.lastpage))){c.hDiv.loading?c.timer=setTimeout(c.populateVisible,e.scrollTimeout):(e.page=z,y&&(c.selectionPreserver(d[0]),c.emptyRows.call(d[0],!1,!1)),c.populate(F))}}}},scrollGrid:function(a){if(e.scroll){var b=c.bDiv.scrollTop;void 0===c.scrollTop&&(c.scrollTop=0);b!==c.scrollTop&&(c.scrollTop=b,c.timer&&clearTimeout(c.timer),c.timer=setTimeout(c.populateVisible,e.scrollTimeout))}c.hDiv.scrollLeft=c.bDiv.scrollLeft;e.footerrow&&(c.sDiv.scrollLeft=c.bDiv.scrollLeft);a&&a.stopPropagation()},selectionPreserver:function(a){var c=a.p,d=c.selrow,e=c.selarrrow?b.makeArray(c.selarrrow):null,g=a.grid.bDiv.scrollLeft,f=function(){var h;c.selrow=null;c.selarrrow=[];if(c.multiselect&&e&&0<e.length){for(h=0;h<e.length;h++){e[h]!==d&&b(a).jqGrid("setSelection",e[h],!1,null)}}d&&b(a).jqGrid("setSelection",d,!1,null);a.grid.bDiv.scrollLeft=g;b(a).unbind(".selectionPreserver",f)};b(a).bind("jqGridGridComplete.selectionPreserver",f)}};if("TABLE"!==this.tagName.toUpperCase()){alert("Element is not a table")}else{if(void 0!==document.documentMode&&5>=document.documentMode){alert("Grid can not be used in this ('quirks') mode!")}else{b(this).empty().attr("tabindex","0");this.p=e;this.p.useProp=!!b.fn.prop;var g,f;if(0===this.p.colNames.length){for(g=0;g<this.p.colModel.length;g++){this.p.colNames[g]=this.p.colModel[g].label||this.p.colModel[g].name}}if(this.p.colNames.length!==this.p.colModel.length){alert(b.jgrid.errors.model)}else{var i=b("<div class='ui-jqgrid-view'></div>"),k=b.jgrid.msie;a.p.direction=b.trim(a.p.direction.toLowerCase());-1===b.inArray(a.p.direction,["ltr","rtl"])&&(a.p.direction="ltr");f=a.p.direction;b(i).insertBefore(this);b(this).removeClass("scroll").appendTo(i);var l=b("<div class='ui-jqgrid ui-widget ui-widget-content ui-corner-all'></div>");b(l).attr({id:"gbox_"+this.id,dir:f}).insertBefore(i);b(i).attr("id","gview_"+this.id).appendTo(l);b("<div class='ui-widget-overlay jqgrid-overlay' id='lui_"+this.id+"'></div>").insertBefore(i);b("<div class='loading ui-state-default ui-state-active' id='load_"+this.id+"'>"+this.p.loadtext+"</div>").insertBefore(i);b(this).attr({cellspacing:"0",cellpadding:"0",border:"0",role:"grid","aria-multiselectable":!!this.p.multiselect,"aria-labelledby":"gbox_"+this.id});var o=function(a,b){a=parseInt(a,10);return isNaN(a)?b||0:a},n=function(d,e,g,f,h,i){var R=a.p.colModel[d],k=R.align,z='style="',F=R.classes,y=R.name,G=[];k&&(z=z+("text-align:"+k+";"));R.hidden===true&&(z=z+"display:none;");if(e===0){z=z+("width: "+c.headers[d].width+"px;")}else{if(R.cellattr&&b.isFunction(R.cellattr)){if((d=R.cellattr.call(a,h,g,f,R,i))&&typeof d==="string"){d=d.replace(/style/i,"style").replace(/title/i,"title");if(d.indexOf("title")>-1){R.title=false}d.indexOf("class")>-1&&(F=void 0);G=d.split(/[^-]style/);if(G.length===2){G[1]=b.trim(G[1].replace("=",""));if(G[1].indexOf("'")===0||G[1].indexOf('"')===0){G[1]=G[1].substring(1)}z=z+G[1].replace(/'/gi,'"')}else{z=z+'"'}}}}if(!G.length){G[0]="";z=z+'"'}z=z+((F!==void 0?' class="'+F+'"':"")+(R.title&&g?' title="'+b.jgrid.stripHtml(g)+'"':""));z=z+(' aria-describedby="'+a.p.id+"_"+y+'"');return z+G[0]},m=function(c){return c==null||c===""?"&#160;":a.p.autoencode?b.jgrid.htmlEncode(c):""+c},t=function(c,d,e,g,f){var h=a.p.colModel[e];if(h.formatter!==void 0){c=""+a.p.idPrefix!==""?b.jgrid.stripPref(a.p.idPrefix,c):c;c={rowId:c,colModel:h,gid:a.p.id,pos:e};d=b.isFunction(h.formatter)?h.formatter.call(a,d,c,g,f):b.fmatter?b.fn.fmatter.call(a,h.formatter,d,c,g,f):m(d)}else{d=m(d)}return d},A=function(a,b,c,d,e,g){b=t(a,b,c,e,"add");return'<td role="gridcell" '+n(c,d,b,e,a,g)+">"+b+"</td>"},T=function(b,c,d,e){e='<input role="checkbox" type="checkbox" id="jqg_'+a.p.id+"_"+b+'" class="cbox" name="jqg_'+a.p.id+"_"+b+'"'+(e?'checked="checked"':"")+"/>";return'<td role="gridcell" '+n(c,d,"",null,b,true)+">"+e+"</td>"},M=function(a,b,c,d){c=(parseInt(c,10)-1)*parseInt(d,10)+1+b;return'<td role="gridcell" class="ui-state-default jqgrid-rownum" '+n(a,b,c,null,b,true)+">"+c+"</td>"},$=function(b){var c,d=[],e=0,g;for(g=0;g<a.p.colModel.length;g++){c=a.p.colModel[g];if(c.name!=="cb"&&c.name!=="subgrid"&&c.name!=="rn"){d[e]=b==="local"?c.name:b==="xml"||b==="xmlstring"?c.xmlmap||c.name:c.jsonmap||c.name;e++}}return d},U=function(c){var d=a.p.remapColumns;if(!d||!d.length){d=b.map(a.p.colModel,function(a,b){return b})}c&&(d=b.map(d,function(a){return a<c?null:a-c}));return d},V=function(a,c){var d;if(this.p.deepempty){b(this.rows).slice(1).remove()}else{d=this.rows.length>0?this.rows[0]:null;b(this.firstChild).empty().append(d)}if(a&&this.p.scroll){b(this.grid.bDiv.firstChild).css({height:"auto"});b(this.grid.bDiv.firstChild.firstChild).css({height:0,display:"none"});if(this.grid.bDiv.scrollTop!==0){this.grid.bDiv.scrollTop=0}}if(c===true&&this.p.treeGrid){this.p.data=[];this.p._index={}}},N=function(){var c=a.p.data.length,d,e,g;d=a.p.rownumbers===true?1:0;e=a.p.multiselect===true?1:0;g=a.p.subGrid===true?1:0;d=a.p.keyIndex===false||a.p.loadonce===true?a.p.localReader.id:a.p.colModel[a.p.keyIndex+e+g+d].name;for(e=0;e<c;e++){g=b.jgrid.getAccessor(a.p.data[e],d);g===void 0&&(g=""+(e+1));a.p._index[g]=e}},X=function(c,d,e,g,f,h){var j="-1",i="",k,d=d?"display:none;":"",e="ui-widget-content jqgrow ui-row-"+a.p.direction+(e?" "+e:"")+(h?" ui-state-highlight":""),h=b(a).triggerHandler("jqGridRowAttr",[g,f,c]);typeof h!=="object"&&(h=b.isFunction(a.p.rowattr)?a.p.rowattr.call(a,g,f,c):{});if(!b.isEmptyObject(h)){if(h.hasOwnProperty("id")){c=h.id;delete h.id}if(h.hasOwnProperty("tabindex")){j=h.tabindex;delete h.tabindex}if(h.hasOwnProperty("style")){d=d+h.style;delete h.style}if(h.hasOwnProperty("class")){e=e+(" "+h["class"]);delete h["class"]}try{delete h.role}catch(F){}for(k in h){h.hasOwnProperty(k)&&(i=i+(" "+k+"="+h[k]))}}return'<tr role="row" id="'+c+'" tabindex="'+j+'" class="'+e+'"'+(d===""?"":' style="'+d+'"')+i+">"},J=function(c,d,e,g,f){var h=new Date,j=a.p.datatype!=="local"&&a.p.loadonce||a.p.datatype==="xmlstring",i=a.p.xmlReader,k=a.p.datatype==="local"?"local":"xml";if(j){a.p.data=[];a.p._index={};a.p.localReader.id="_id_"}a.p.reccount=0;if(b.isXMLDoc(c)){if(a.p.treeANode===-1&&!a.p.scroll){V.call(a,false,true);e=1}else{e=e>1?e:1}var F=b(a),y,G,l=0,o,s=a.p.multiselect===true?1:0,u=0,n,m=a.p.rownumbers===true?1:0,t,p=[],E,q={},x,D,r=[],K=a.p.altRows===true?a.p.altclass:"",v;if(a.p.subGrid===true){u=1;n=b.jgrid.getMethod("addSubGridCell")}i.repeatitems||(p=$(k));t=a.p.keyIndex===false?b.isFunction(i.id)?i.id.call(a,c):i.id:a.p.keyIndex;if(p.length>0&&!isNaN(t)){a.p.remapColumns&&a.p.remapColumns.length&&(t=b.inArray(t,a.p.remapColumns));t=p[t]}k=(""+t).indexOf("[")===-1?p.length?function(a,c){return b(t,a).text()||c}:function(a,c){return b(i.cell,a).eq(t).text()||c}:function(a,b){return a.getAttribute(t.replace(/[\[\]]/g,""))||b};a.p.userData={};a.p.page=b.jgrid.getXmlData(c,i.page)||a.p.page||0;a.p.lastpage=b.jgrid.getXmlData(c,i.total);if(a.p.lastpage===void 0){a.p.lastpage=1}a.p.records=b.jgrid.getXmlData(c,i.records)||0;b.isFunction(i.userdata)?a.p.userData=i.userdata.call(a,c)||{}:b.jgrid.getXmlData(c,i.userdata,true).each(function(){a.p.userData[this.getAttribute("name")]=b(this).text()});c=b.jgrid.getXmlData(c,i.root,true);(c=b.jgrid.getXmlData(c,i.row,true))||(c=[]);var w=c.length,L=0,B=[],C=parseInt(a.p.rowNum,10),H=a.p.scroll?b.jgrid.randId():1;if(w>0&&a.p.page<=0){a.p.page=1}if(c&&w){f&&(C=C*(f+1));var f=b.isFunction(a.p.afterInsertRow),J=false,I;if(a.p.grouping){J=a.p.groupingView.groupCollapse===true;I=b.jgrid.getMethod("groupingPrepare")}for(;L<w;){x=c[L];D=k(x,H+L);D=a.p.idPrefix+D;y=e===0?0:e+1;v=(y+L)%2===1?K:"";var O=r.length;r.push("");m&&r.push(M(0,L,a.p.page,a.p.rowNum));s&&r.push(T(D,m,L,false));u&&r.push(n.call(F,s+m,L+e));if(i.repeatitems){E||(E=U(s+u+m));var N=b.jgrid.getXmlData(x,i.cell,true);b.each(E,function(b){var c=N[this];if(!c){return false}o=c.textContent||c.text;q[a.p.colModel[b+s+u+m].name]=o;r.push(A(D,o,b+s+u+m,L+e,x,q))})}else{for(y=0;y<p.length;y++){o=b.jgrid.getXmlData(x,p[y]);q[a.p.colModel[y+s+u+m].name]=o;r.push(A(D,o,y+s+u+m,L+e,x,q))}}r[O]=X(D,J,v,q,x,false);r.push("</tr>");if(a.p.grouping){B=I.call(F,r,B,q,L);r=[]}if(j||a.p.treeGrid===true){q._id_=b.jgrid.stripPref(a.p.idPrefix,D);a.p.data.push(q);a.p._index[q._id_]=a.p.data.length-1}if(a.p.gridview===false){b("tbody:first",d).append(r.join(""));F.triggerHandler("jqGridAfterInsertRow",[D,q,x]);f&&a.p.afterInsertRow.call(a,D,q,x);r=[]}q={};l++;L++;if(l===C){break}}}if(a.p.gridview===true){G=a.p.treeANode>-1?a.p.treeANode:0;if(a.p.grouping){F.jqGrid("groupingRender",B,a.p.colModel.length);B=null}else{a.p.treeGrid===true&&G>0?b(a.rows[G]).after(r.join("")):b("tbody:first",d).append(r.join(""))}}if(a.p.subGrid===true){try{F.jqGrid("addSubGrid",s+m)}catch(Q){}}a.p.totaltime=new Date-h;if(l>0&&a.p.records===0){a.p.records=w}r=null;if(a.p.treeGrid===true){try{F.jqGrid("setTreeNode",G+1,l+G+1)}catch(S){}}if(!a.p.treeGrid&&!a.p.scroll){a.grid.bDiv.scrollTop=0}a.p.reccount=l;a.p.treeANode=-1;a.p.userDataOnFooter&&F.jqGrid("footerData","set",a.p.userData,true);if(j){a.p.records=w;a.p.lastpage=Math.ceil(w/C)}g||a.updatepager(false,true);if(j){for(;l<w;){x=c[l];D=k(x,l+H);D=a.p.idPrefix+D;if(i.repeatitems){E||(E=U(s+u+m));var P=b.jgrid.getXmlData(x,i.cell,true);b.each(E,function(b){var c=P[this];if(!c){return false}o=c.textContent||c.text;q[a.p.colModel[b+s+u+m].name]=o})}else{for(y=0;y<p.length;y++){o=b.jgrid.getXmlData(x,p[y]);q[a.p.colModel[y+s+u+m].name]=o}}q._id_=b.jgrid.stripPref(a.p.idPrefix,D);a.p.data.push(q);a.p._index[q._id_]=a.p.data.length-1;q={};l++}}}},S=function(c,d,e,g,f){var h=new Date;if(c){if(a.p.treeANode===-1&&!a.p.scroll){V.call(a,false,true);e=1}else{e=e>1?e:1}var i,j=a.p.datatype!=="local"&&a.p.loadonce||a.p.datatype==="jsonstring";if(j){a.p.data=[];a.p._index={};a.p.localReader.id="_id_"}a.p.reccount=0;if(a.p.datatype==="local"){d=a.p.localReader;i="local"}else{d=a.p.jsonReader;i="json"}var k=b(a),l=0,y,o,n,m=[],s=a.p.multiselect?1:0,u=a.p.subGrid===true?1:0,t,p=a.p.rownumbers===true?1:0,w=U(s+u+p);i=$(i);var v,E,q,x={},D,r,K=[],B=a.p.altRows===true?a.p.altclass:"",C;a.p.page=b.jgrid.getAccessor(c,d.page)||a.p.page||0;E=b.jgrid.getAccessor(c,d.total);u&&(t=b.jgrid.getMethod("addSubGridCell"));a.p.lastpage=E===void 0?1:E;a.p.records=b.jgrid.getAccessor(c,d.records)||0;a.p.userData=b.jgrid.getAccessor(c,d.userdata)||{};q=a.p.keyIndex===false?b.isFunction(d.id)?d.id.call(a,c):d.id:a.p.keyIndex;if(!d.repeatitems){m=i;if(m.length>0&&!isNaN(q)){a.p.remapColumns&&a.p.remapColumns.length&&(q=b.inArray(q,a.p.remapColumns));q=m[q]}}E=b.jgrid.getAccessor(c,d.root);E==null&&b.isArray(c)&&(E=c);E||(E=[]);c=E.length;o=0;if(c>0&&a.p.page<=0){a.p.page=1}var L=parseInt(a.p.rowNum,10),H=a.p.scroll?b.jgrid.randId():1,J=false,I;f&&(L=L*(f+1));a.p.datatype==="local"&&!a.p.deselectAfterSort&&(J=true);var O=b.isFunction(a.p.afterInsertRow),N=[],P=false,Q;if(a.p.grouping){P=a.p.groupingView.groupCollapse===true;Q=b.jgrid.getMethod("groupingPrepare")}for(;o<c;){f=E[o];r=b.jgrid.getAccessor(f,q);if(r===void 0){typeof q==="number"&&a.p.colModel[q+s+u+p]!=null&&(r=b.jgrid.getAccessor(f,a.p.colModel[q+s+u+p].name));if(r===void 0){r=H+o;if(m.length===0&&d.cell){y=b.jgrid.getAccessor(f,d.cell)||f;r=y!=null&&y[q]!==void 0?y[q]:r}}}r=a.p.idPrefix+r;y=e===1?0:e;C=(y+o)%2===1?B:"";J&&(I=a.p.multiselect?b.inArray(r,a.p.selarrrow)!==-1:r===a.p.selrow);var S=K.length;K.push("");p&&K.push(M(0,o,a.p.page,a.p.rowNum));s&&K.push(T(r,p,o,I));u&&K.push(t.call(k,s+p,o+e));v=i;if(d.repeatitems){d.cell&&(f=b.jgrid.getAccessor(f,d.cell)||f);b.isArray(f)&&(v=w)}for(n=0;n<v.length;n++){y=b.jgrid.getAccessor(f,v[n]);x[a.p.colModel[n+s+u+p].name]=y;K.push(A(r,y,n+s+u+p,o+e,f,x))}K[S]=X(r,P,C,x,f,I);K.push("</tr>");if(a.p.grouping){N=Q.call(k,K,N,x,o);K=[]}if(j||a.p.treeGrid===true){x._id_=b.jgrid.stripPref(a.p.idPrefix,r);a.p.data.push(x);a.p._index[x._id_]=a.p.data.length-1}if(a.p.gridview===false){b("#"+b.jgrid.jqID(a.p.id)+" tbody:first").append(K.join(""));k.triggerHandler("jqGridAfterInsertRow",[r,x,f]);O&&a.p.afterInsertRow.call(a,r,x,f);K=[]}x={};l++;o++;if(l===L){break}}if(a.p.gridview===true){D=a.p.treeANode>-1?a.p.treeANode:0;a.p.grouping?k.jqGrid("groupingRender",N,a.p.colModel.length):a.p.treeGrid===true&&D>0?b(a.rows[D]).after(K.join("")):b("#"+b.jgrid.jqID(a.p.id)+" tbody:first").append(K.join(""))}if(a.p.subGrid===true){try{k.jqGrid("addSubGrid",s+p)}catch(aa){}}a.p.totaltime=new Date-h;if(l>0&&a.p.records===0){a.p.records=c}if(a.p.treeGrid===true){try{k.jqGrid("setTreeNode",D+1,l+D+1)}catch(W){}}if(!a.p.treeGrid&&!a.p.scroll){a.grid.bDiv.scrollTop=0}a.p.reccount=l;a.p.treeANode=-1;a.p.userDataOnFooter&&k.jqGrid("footerData","set",a.p.userData,true);if(j){a.p.records=c;a.p.lastpage=Math.ceil(c/L)}g||a.updatepager(false,true);if(j){for(;l<c&&E[l];){f=E[l];r=b.jgrid.getAccessor(f,q);if(r===void 0){typeof q==="number"&&a.p.colModel[q+s+u+p]!=null&&(r=b.jgrid.getAccessor(f,a.p.colModel[q+s+u+p].name));if(r===void 0){r=H+l;if(m.length===0&&d.cell){e=b.jgrid.getAccessor(f,d.cell)||f;r=e!=null&&e[q]!==void 0?e[q]:r}}}if(f){r=a.p.idPrefix+r;v=i;if(d.repeatitems){d.cell&&(f=b.jgrid.getAccessor(f,d.cell)||f);b.isArray(f)&&(v=w)}for(n=0;n<v.length;n++){x[a.p.colModel[n+s+u+p].name]=b.jgrid.getAccessor(f,v[n])}x._id_=b.jgrid.stripPref(a.p.idPrefix,r);a.p.data.push(x);a.p._index[x._id_]=a.p.data.length-1;x={}}l++}}}},ja=function(){function c(a){var b=0,d,e,g,h,i;if(a.groups!=null){(e=a.groups.length&&a.groupOp.toString().toUpperCase()==="OR")&&s.orBegin();for(d=0;d<a.groups.length;d++){b>0&&e&&s.or();try{c(a.groups[d])}catch(j){alert(j)}b++}e&&s.orEnd()}if(a.rules!=null){try{(g=a.rules.length&&a.groupOp.toString().toUpperCase()==="OR")&&s.orBegin();for(d=0;d<a.rules.length;d++){i=a.rules[d];h=a.groupOp.toString().toUpperCase();if(p[i.op]&&i.field){b>0&&h&&h==="OR"&&(s=s.or());s=p[i.op](s,h)(i.field,i.data,f[i.field])}b++}g&&s.orEnd()}catch(qa){alert(qa)}}}var d=a.p.multiSort?[]:"",e=[],g=false,f={},h=[],i=[],j,k,l;if(b.isArray(a.p.data)){var o=a.p.grouping?a.p.groupingView:false,n,m;b.each(a.p.colModel,function(){k=this.sorttype||"text";if(k==="date"||k==="datetime"){if(this.formatter&&typeof this.formatter==="string"&&this.formatter==="date"){j=this.formatoptions&&this.formatoptions.srcformat?this.formatoptions.srcformat:b.jgrid.formatter.date.srcformat;l=this.formatoptions&&this.formatoptions.newformat?this.formatoptions.newformat:b.jgrid.formatter.date.newformat}else{j=l=this.datefmt||"Y-m-d"}f[this.name]={stype:k,srcfmt:j,newfmt:l}}else{f[this.name]={stype:k,srcfmt:"",newfmt:""}}if(a.p.grouping){m=0;for(n=o.groupField.length;m<n;m++){if(this.name===o.groupField[m]){var c=this.name;if(this.index){c=this.index}h[m]=f[c];i[m]=c}}}if(a.p.multiSort){if(this.lso){d.push(this.name);c=this.lso.split("-");e.push(c[c.length-1])}}else{if(!g&&(this.index===a.p.sortname||this.name===a.p.sortname)){d=this.name;g=true}}});if(a.p.treeGrid){b(a).jqGrid("SortTree",d,a.p.sortorder,f[d].stype,f[d].srcfmt)}else{var p={eq:function(a){return a.equals},ne:function(a){return a.notEquals},lt:function(a){return a.less},le:function(a){return a.lessOrEquals},gt:function(a){return a.greater},ge:function(a){return a.greaterOrEquals},cn:function(a){return a.contains},nc:function(a,b){return b==="OR"?a.orNot().contains:a.andNot().contains},bw:function(a){return a.startsWith},bn:function(a,b){return b==="OR"?a.orNot().startsWith:a.andNot().startsWith},en:function(a,b){return b==="OR"?a.orNot().endsWith:a.andNot().endsWith},ew:function(a){return a.endsWith},ni:function(a,b){return b==="OR"?a.orNot().equals:a.andNot().equals},"in":function(a){return a.equals},nu:function(a){return a.isNull},nn:function(a,b){return b==="OR"?a.orNot().isNull:a.andNot().isNull}},s=b.jgrid.from(a.p.data);a.p.ignoreCase&&(s=s.ignoreCase());if(a.p.search===true){var u=a.p.postData.filters;if(u){typeof u==="string"&&(u=b.jgrid.parse(u));c(u)}else{try{s=p[a.p.postData.searchOper](s)(a.p.postData.searchField,a.p.postData.searchString,f[a.p.postData.searchField])}catch(t){}}}if(a.p.grouping){for(m=0;m<n;m++){s.orderBy(i[m],o.groupOrder[m],h[m].stype,h[m].srcfmt)}}a.p.multiSort?b.each(d,function(a){s.orderBy(this,e[a],f[this].stype,f[this].srcfmt)}):d&&a.p.sortorder&&g&&(a.p.sortorder.toUpperCase()==="DESC"?s.orderBy(a.p.sortname,"d",f[d].stype,f[d].srcfmt):s.orderBy(a.p.sortname,"a",f[d].stype,f[d].srcfmt));var u=s.select(),v=parseInt(a.p.rowNum,10),w=u.length,A=parseInt(a.p.page,10),B=Math.ceil(w/v),q={},u=u.slice((A-1)*v,A*v),f=s=null;q[a.p.localReader.total]=B;q[a.p.localReader.page]=A;q[a.p.localReader.records]=w;q[a.p.localReader.root]=u;q[a.p.localReader.userdata]=a.p.userData;u=null;return q}}},aa=function(){a.grid.hDiv.loading=true;if(!a.p.hiddengrid){switch(a.p.loadui){case"enable":b("#load_"+b.jgrid.jqID(a.p.id)).show();break;case"block":b("#lui_"+b.jgrid.jqID(a.p.id)).show();b("#load_"+b.jgrid.jqID(a.p.id)).show()}}},P=function(){a.grid.hDiv.loading=false;switch(a.p.loadui){case"enable":b("#load_"+b.jgrid.jqID(a.p.id)).hide();break;case"block":b("#lui_"+b.jgrid.jqID(a.p.id)).hide();b("#load_"+b.jgrid.jqID(a.p.id)).hide()}},O=function(c){if(!a.grid.hDiv.loading){var d=a.p.scroll&&c===false,e={},g,f=a.p.prmNames;if(a.p.page<=0){a.p.page=1}if(f.search!==null){e[f.search]=a.p.search}f.nd!==null&&(e[f.nd]=(new Date).getTime());if(f.rows!==null){e[f.rows]=a.p.rowNum}if(f.page!==null){e[f.page]=a.p.page}if(f.sort!==null){e[f.sort]=a.p.sortname}if(f.order!==null){e[f.order]=a.p.sortorder}if(a.p.rowTotal!==null&&f.totalrows!==null){e[f.totalrows]=a.p.rowTotal}var h=b.isFunction(a.p.loadComplete),i=h?a.p.loadComplete:null,j=0,c=c||1;if(c>1){if(f.npage!==null){e[f.npage]=c;j=c-1;c=1}else{i=function(b){a.p.page++;a.grid.hDiv.loading=false;h&&a.p.loadComplete.call(a,b);O(c-1)}}}else{f.npage!==null&&delete a.p.postData[f.npage]}if(a.p.grouping){b(a).jqGrid("groupingSetup");var k=a.p.groupingView,l,o="";for(l=0;l<k.groupField.length;l++){var m=k.groupField[l];b.each(a.p.colModel,function(a,b){if(b.name===m&&b.index){m=b.index}});o=o+(m+" "+k.groupOrder[l]+", ")}e[f.sort]=o+e[f.sort]}b.extend(a.p.postData,e);var n=!a.p.scroll?1:a.rows.length-1,e=b(a).triggerHandler("jqGridBeforeRequest");if(!(e===false||e==="stop")){if(b.isFunction(a.p.datatype)){a.p.datatype.call(a,a.p.postData,"load_"+a.p.id)}else{if(b.isFunction(a.p.beforeRequest)){e=a.p.beforeRequest.call(a);e===void 0&&(e=true);if(e===false){return}}g=a.p.datatype.toLowerCase();switch(g){case"json":case"jsonp":case"xml":case"script":b.ajax(b.extend({url:a.p.url,type:a.p.mtype,dataType:g,data:b.isFunction(a.p.serializeGridData)?a.p.serializeGridData.call(a,a.p.postData):a.p.postData,success:function(e,f,h){if(b.isFunction(a.p.beforeProcessing)&&a.p.beforeProcessing.call(a,e,f,h)===false){P()}else{g==="xml"?J(e,a.grid.bDiv,n,c>1,j):S(e,a.grid.bDiv,n,c>1,j);b(a).triggerHandler("jqGridLoadComplete",[e]);i&&i.call(a,e);b(a).triggerHandler("jqGridAfterLoadComplete",[e]);d&&a.grid.populateVisible();if(a.p.loadonce||a.p.treeGrid){a.p.datatype="local"}c===1&&P()}},error:function(d,e,f){b.isFunction(a.p.loadError)&&a.p.loadError.call(a,d,e,f);c===1&&P()},beforeSend:function(c,d){var e=true;b.isFunction(a.p.loadBeforeSend)&&(e=a.p.loadBeforeSend.call(a,c,d));e===void 0&&(e=true);if(e===false){return false}aa()}},b.jgrid.ajaxOptions,a.p.ajaxGridOptions));break;case"xmlstring":aa();e=typeof a.p.datastr!=="string"?a.p.datastr:b.parseXML(a.p.datastr);J(e,a.grid.bDiv);b(a).triggerHandler("jqGridLoadComplete",[e]);h&&a.p.loadComplete.call(a,e);b(a).triggerHandler("jqGridAfterLoadComplete",[e]);a.p.datatype="local";a.p.datastr=null;P();break;case"jsonstring":aa();e=typeof a.p.datastr==="string"?b.jgrid.parse(a.p.datastr):a.p.datastr;S(e,a.grid.bDiv);b(a).triggerHandler("jqGridLoadComplete",[e]);h&&a.p.loadComplete.call(a,e);b(a).triggerHandler("jqGridAfterLoadComplete",[e]);a.p.datatype="local";a.p.datastr=null;P();break;case"local":case"clientside":aa();a.p.datatype="local";e=ja();S(e,a.grid.bDiv,n,c>1,j);b(a).triggerHandler("jqGridLoadComplete",[e]);i&&i.call(a,e);b(a).triggerHandler("jqGridAfterLoadComplete",[e]);d&&a.grid.populateVisible();P()}}}}},ca=function(c){b("#cb_"+b.jgrid.jqID(a.p.id),a.grid.hDiv)[a.p.useProp?"prop":"attr"]("checked",c);if(a.p.frozenColumns&&a.p.id+"_frozen"){b("#cb_"+b.jgrid.jqID(a.p.id),a.grid.fhDiv)[a.p.useProp?"prop":"attr"]("checked",c)}},ka=function(c,d){var e="",g="<table cellspacing='0' cellpadding='0' border='0' style='table-layout:auto;' class='ui-pg-table'><tbody><tr>",i="",j,k,l,m,n=function(c){var d;b.isFunction(a.p.onPaging)&&(d=a.p.onPaging.call(a,c));a.p.selrow=null;if(a.p.multiselect){a.p.selarrrow=[];ca(false)}a.p.savedRow=[];return d==="stop"?false:true},c=c.substr(1),d=d+("_"+c);j="pg_"+c;k=c+"_left";l=c+"_center";m=c+"_right";b("#"+b.jgrid.jqID(c)).append("<div id='"+j+"' class='ui-pager-control' role='group'><table cellspacing='0' cellpadding='0' border='0' class='ui-pg-table' style='width:100%;table-layout:fixed;height:100%;' role='row'><tbody><tr><td id='"+k+"' align='left'></td><td id='"+l+"' align='center' style='white-space:pre;'></td><td id='"+m+"' align='right'></td></tr></tbody></table></div>").attr("dir","ltr");if(a.p.rowList.length>0){i="<td dir='"+f+"'>";i=i+"<select class='ui-pg-selbox' role='listbox'>";for(k=0;k<a.p.rowList.length;k++){i=i+('<option role="option" value="'+a.p.rowList[k]+'"'+(a.p.rowNum===a.p.rowList[k]?' selected="selected"':"")+">"+a.p.rowList[k]+"</option>")}i=i+"</select></td>"}f==="rtl"&&(g=g+i);a.p.pginput===true&&(e="<td dir='"+f+"'>"+b.jgrid.format(a.p.pgtext||"","<input class='ui-pg-input' type='text' size='2' maxlength='7' value='0' role='textbox'/>","<span id='sp_1_"+b.jgrid.jqID(c)+"'></span>")+"</td>");if(a.p.pgbuttons===true){k=["first"+d,"prev"+d,"next"+d,"last"+d];f==="rtl"&&k.reverse();g=g+("<td id='"+k[0]+"' class='ui-pg-button ui-corner-all'><span class='ui-icon ui-icon-seek-first'></span></td>");g=g+("<td id='"+k[1]+"' class='ui-pg-button ui-corner-all'><span class='ui-icon ui-icon-seek-prev'></span></td>");g=g+(e!==""?"<td class='ui-pg-button ui-state-disabled' style='width:4px;'><span class='ui-separator'></span></td>"+e+"<td class='ui-pg-button ui-state-disabled' style='width:4px;'><span class='ui-separator'></span></td>":"")+("<td id='"+k[2]+"' class='ui-pg-button ui-corner-all'><span class='ui-icon ui-icon-seek-next'></span></td>");g=g+("<td id='"+k[3]+"' class='ui-pg-button ui-corner-all'><span class='ui-icon ui-icon-seek-end'></span></td>")}else{e!==""&&(g=g+e)}f==="ltr"&&(g=g+i);g=g+"</tr></tbody></table>";a.p.viewrecords===true&&b("td#"+c+"_"+a.p.recordpos,"#"+j).append("<div dir='"+f+"' style='text-align:"+a.p.recordpos+"' class='ui-paging-info'></div>");b("td#"+c+"_"+a.p.pagerpos,"#"+j).append(g);i=b(".ui-jqgrid").css("font-size")||"11px";b(document.body).append("<div id='testpg' class='ui-jqgrid ui-widget ui-widget-content' style='font-size:"+i+";visibility:hidden;' ></div>");g=b(g).clone().appendTo("#testpg").width();b("#testpg").remove();if(g>0){e!==""&&(g=g+50);b("td#"+c+"_"+a.p.pagerpos,"#"+j).width(g)}a.p._nvtd=[];a.p._nvtd[0]=g?Math.floor((a.p.width-g)/2):Math.floor(a.p.width/3);a.p._nvtd[1]=0;g=null;b(".ui-pg-selbox","#"+j).bind("change",function(){if(!n("records")){return false}a.p.page=Math.round(a.p.rowNum*(a.p.page-1)/this.value-0.5)+1;a.p.rowNum=this.value;a.p.pager&&b(".ui-pg-selbox",a.p.pager).val(this.value);a.p.toppager&&b(".ui-pg-selbox",a.p.toppager).val(this.value);O();return false});if(a.p.pgbuttons===true){b(".ui-pg-button","#"+j).hover(function(){if(b(this).hasClass("ui-state-disabled")){this.style.cursor="default"}else{b(this).addClass("ui-state-hover");this.style.cursor="pointer"}},function(){if(!b(this).hasClass("ui-state-disabled")){b(this).removeClass("ui-state-hover");this.style.cursor="default"}});b("#first"+b.jgrid.jqID(d)+", #prev"+b.jgrid.jqID(d)+", #next"+b.jgrid.jqID(d)+", #last"+b.jgrid.jqID(d)).click(function(){var b=o(a.p.page,1),c=o(a.p.lastpage,1),e=false,g=true,f=true,h=true,i=true;if(c===0||c===1){i=h=f=g=false}else{if(c>1&&b>=1){if(b===1){f=g=false}else{if(b===c){i=h=false}}}else{if(c>1&&b===0){i=h=false;b=c-1}}}if(!n(this.id)){return false}if(this.id==="first"+d&&g){a.p.page=1;e=true}if(this.id==="prev"+d&&f){a.p.page=b-1;e=true}if(this.id==="next"+d&&h){a.p.page=b+1;e=true}if(this.id==="last"+d&&i){a.p.page=c;e=true}e&&O();return false})}a.p.pginput===true&&b("input.ui-pg-input","#"+j).keypress(function(c){if((c.charCode||c.keyCode||0)===13){if(!n("user")){return false}b(this).val(o(b(this).val(),1));a.p.page=b(this).val()>0?b(this).val():a.p.page;O();return false}return this})},ra=function(c,d){var e,g="",f=a.p.colModel,h=false,i;i=a.p.frozenColumns?d:a.grid.headers[c].el;var j="";b("span.ui-grid-ico-sort",i).addClass("ui-state-disabled");b(i).attr("aria-selected","false");if(f[c].lso){if(f[c].lso==="asc"){f[c].lso=f[c].lso+"-desc";j="desc"}else{if(f[c].lso==="desc"){f[c].lso=f[c].lso+"-asc";j="asc"}else{if(f[c].lso==="asc-desc"||f[c].lso==="desc-asc"){f[c].lso=""}}}}else{f[c].lso=j=f.firstsortorder||"asc"}if(j){b("span.s-ico",i).show();b("span.ui-icon-"+j,i).removeClass("ui-state-disabled");b(i).attr("aria-selected","true")}else{a.p.viewsortcols[0]||b("span.s-ico",i).hide()}a.p.sortorder="";b.each(f,function(b){if(this.lso){b>0&&h&&(g=g+", ");e=this.lso.split("-");g=g+(f[b].index||f[b].name);g=g+(" "+e[e.length-1]);h=true;a.p.sortorder=e[e.length-1]}});i=g.lastIndexOf(a.p.sortorder);g=g.substring(0,i);a.p.sortname=g},la=function(c,d,e,g,f){if(a.p.colModel[d].sortable){var h;if(!(a.p.savedRow.length>0)){if(!e){if(a.p.lastsort===d){if(a.p.sortorder==="asc"){a.p.sortorder="desc"}else{if(a.p.sortorder==="desc"){a.p.sortorder="asc"}}}else{a.p.sortorder=a.p.colModel[d].firstsortorder||"asc"}a.p.page=1}if(a.p.multiSort){ra(d,f)}else{if(g){if(a.p.lastsort===d&&a.p.sortorder===g&&!e){return}a.p.sortorder=g}e=a.grid.headers[a.p.lastsort].el;f=a.p.frozenColumns?f:a.grid.headers[d].el;b("span.ui-grid-ico-sort",e).addClass("ui-state-disabled");b(e).attr("aria-selected","false");if(a.p.frozenColumns){a.grid.fhDiv.find("span.ui-grid-ico-sort").addClass("ui-state-disabled");a.grid.fhDiv.find("th").attr("aria-selected","false")}b("span.ui-icon-"+a.p.sortorder,f).removeClass("ui-state-disabled");b(f).attr("aria-selected","true");if(!a.p.viewsortcols[0]&&a.p.lastsort!==d){a.p.frozenColumns&&a.grid.fhDiv.find("span.s-ico").hide();b("span.s-ico",e).hide();b("span.s-ico",f).show()}c=c.substring(5+a.p.id.length+1);a.p.sortname=a.p.colModel[d].index||c;h=a.p.sortorder}if(b(a).triggerHandler("jqGridSortCol",[c,d,h])==="stop"){a.p.lastsort=d}else{if(b.isFunction(a.p.onSortCol)&&a.p.onSortCol.call(a,c,d,h)==="stop"){a.p.lastsort=d}else{if(a.p.datatype==="local"){a.p.deselectAfterSort&&b(a).jqGrid("resetSelection")}else{a.p.selrow=null;a.p.multiselect&&ca(false);a.p.selarrrow=[];a.p.savedRow=[]}if(a.p.scroll){f=a.grid.bDiv.scrollLeft;V.call(a,true,false);a.grid.hDiv.scrollLeft=f}a.p.subGrid&&a.p.datatype==="local"&&b("td.sgexpanded","#"+b.jgrid.jqID(a.p.id)).each(function(){b(this).trigger("click")});O();a.p.lastsort=d;if(a.p.sortname!==c&&d){a.p.lastsort=d}}}}}},sa=function(c){c=b(a.grid.headers[c].el);c=[c.position().left+c.outerWidth()];a.p.direction==="rtl"&&(c[0]=a.p.width-c[0]);c[0]=c[0]-a.grid.bDiv.scrollLeft;c.push(b(a.grid.hDiv).position().top);c.push(b(a.grid.bDiv).offset().top-b(a.grid.hDiv).offset().top+b(a.grid.bDiv).height());return c},ma=function(c){var d,e=a.grid.headers,g=b.jgrid.getCellIndex(c);for(d=0;d<e.length;d++){if(c===e[d].el){g=d;break}}return g};this.p.id=this.id;-1===b.inArray(a.p.multikey,["shiftKey","altKey","ctrlKey"])&&(a.p.multikey=!1);a.p.keyIndex=!1;for(g=0;g<a.p.colModel.length;g++){a.p.colModel[g]=b.extend(!0,{},a.p.cmTemplate,a.p.colModel[g].template||{},a.p.colModel[g]),!1===a.p.keyIndex&&!0===a.p.colModel[g].key&&(a.p.keyIndex=g)}a.p.sortorder=a.p.sortorder.toLowerCase();b.jgrid.cell_width=b.jgrid.cellWidth();!0===a.p.grouping&&(a.p.scroll=!1,a.p.rownumbers=!1,a.p.treeGrid=!1,a.p.gridview=!0);if(!0===this.p.treeGrid){try{b(this).jqGrid("setTreeGrid")}catch(va){}"local"!==a.p.datatype&&(a.p.localReader={id:"_id_"})}if(this.p.subGrid){try{b(a).jqGrid("setSubGrid")}catch(wa){}}this.p.multiselect&&(this.p.colNames.unshift("<input role='checkbox' id='cb_"+this.p.id+"' class='cbox' type='checkbox'/>"),this.p.colModel.unshift({name:"cb",width:b.jgrid.cell_width?a.p.multiselectWidth+a.p.cellLayout:a.p.multiselectWidth,sortable:!1,resizable:!1,hidedlg:!0,search:!1,align:"center",fixed:!0}));this.p.rownumbers&&(this.p.colNames.unshift(""),this.p.colModel.unshift({name:"rn",width:a.p.rownumWidth,sortable:!1,resizable:!1,hidedlg:!0,search:!1,align:"center",fixed:!0}));a.p.xmlReader=b.extend(!0,{root:"rows",row:"row",page:"rows>page",total:"rows>total",records:"rows>records",repeatitems:!0,cell:"cell",id:"[id]",userdata:"userdata",subgrid:{root:"rows",row:"row",repeatitems:!0,cell:"cell"}},a.p.xmlReader);a.p.jsonReader=b.extend(!0,{root:"rows",page:"page",total:"total",records:"records",repeatitems:!0,cell:"cell",id:"id",userdata:"userdata",subgrid:{root:"rows",repeatitems:!0,cell:"cell"}},a.p.jsonReader);a.p.localReader=b.extend(!0,{root:"rows",page:"page",total:"total",records:"records",repeatitems:!1,cell:"cell",id:"id",userdata:"userdata",subgrid:{root:"rows",repeatitems:!0,cell:"cell"}},a.p.localReader);a.p.scroll&&(a.p.pgbuttons=!1,a.p.pginput=!1,a.p.rowList=[]);a.p.data.length&&N();var B="<thead><tr class='ui-jqgrid-labels' role='rowheader'>",na,C,da,ea,fa,v,p,W,oa=W="",ba=[],pa=[];C=[];if(!0===a.p.shrinkToFit&&!0===a.p.forceFit){for(g=a.p.colModel.length-1;0<=g;g--){if(!a.p.colModel[g].hidden){a.p.colModel[g].resizable=!1;break}}}"horizontal"===a.p.viewsortcols[1]&&(W=" ui-i-asc",oa=" ui-i-desc");na=k?"class='ui-th-div-ie'":"";W="<span class='s-ico' style='display:none'><span sort='asc' class='ui-grid-ico-sort ui-icon-asc"+W+" ui-state-disabled ui-icon ui-icon-triangle-1-n ui-sort-"+f+"'></span>"+("<span sort='desc' class='ui-grid-ico-sort ui-icon-desc"+oa+" ui-state-disabled ui-icon ui-icon-triangle-1-s ui-sort-"+f+"'></span></span>");if(a.p.multiSort){ba=a.p.sortname.split(",");for(g=0;g<ba.length;g++){C=b.trim(ba[g]).split(" "),ba[g]=b.trim(C[0]),pa[g]=C[1]?b.trim(C[1]):a.p.sortorder||"asc"}}for(g=0;g<this.p.colNames.length;g++){C=a.p.headertitles?' title="'+b.jgrid.stripHtml(a.p.colNames[g])+'"':"",B+="<th id='"+a.p.id+"_"+a.p.colModel[g].name+"' role='columnheader' class='ui-state-default ui-th-column ui-th-"+f+"'"+C+">",C=a.p.colModel[g].index||a.p.colModel[g].name,B+="<div id='jqgh_"+a.p.id+"_"+a.p.colModel[g].name+"' "+na+">"+a.p.colNames[g],a.p.colModel[g].width=a.p.colModel[g].width?parseInt(a.p.colModel[g].width,10):150,"boolean"!==typeof a.p.colModel[g].title&&(a.p.colModel[g].title=!0),a.p.colModel[g].lso="",C===a.p.sortname&&(a.p.lastsort=g),a.p.multiSort&&(C=b.inArray(C,ba),-1!==C&&(a.p.colModel[g].lso=pa[C])),B+=W+"</div></th>"}W=null;b(this).append(B+"</tr></thead>");b("thead tr:first th",this).hover(function(){b(this).addClass("ui-state-hover")},function(){b(this).removeClass("ui-state-hover")});if(this.p.multiselect){var ga=[],Y;b("#cb_"+b.jgrid.jqID(a.p.id),this).bind("click",function(){a.p.selarrrow=[];var c=a.p.frozenColumns===true?a.p.id+"_frozen":"";if(this.checked){b(a.rows).each(function(d){if(d>0&&!b(this).hasClass("ui-subgrid")&&!b(this).hasClass("jqgroup")&&!b(this).hasClass("ui-state-disabled")){b("#jqg_"+b.jgrid.jqID(a.p.id)+"_"+b.jgrid.jqID(this.id))[a.p.useProp?"prop":"attr"]("checked",true);b(this).addClass("ui-state-highlight").attr("aria-selected","true");a.p.selarrrow.push(this.id);a.p.selrow=this.id;if(c){b("#jqg_"+b.jgrid.jqID(a.p.id)+"_"+b.jgrid.jqID(this.id),a.grid.fbDiv)[a.p.useProp?"prop":"attr"]("checked",true);b("#"+b.jgrid.jqID(this.id),a.grid.fbDiv).addClass("ui-state-highlight")}}});Y=true;ga=[]}else{b(a.rows).each(function(d){if(d>0&&!b(this).hasClass("ui-subgrid")&&!b(this).hasClass("ui-state-disabled")){b("#jqg_"+b.jgrid.jqID(a.p.id)+"_"+b.jgrid.jqID(this.id))[a.p.useProp?"prop":"attr"]("checked",false);b(this).removeClass("ui-state-highlight").attr("aria-selected","false");ga.push(this.id);if(c){b("#jqg_"+b.jgrid.jqID(a.p.id)+"_"+b.jgrid.jqID(this.id),a.grid.fbDiv)[a.p.useProp?"prop":"attr"]("checked",false);b("#"+b.jgrid.jqID(this.id),a.grid.fbDiv).removeClass("ui-state-highlight")}}});a.p.selrow=null;Y=false}b(a).triggerHandler("jqGridSelectAll",[Y?a.p.selarrrow:ga,Y]);b.isFunction(a.p.onSelectAll)&&a.p.onSelectAll.call(a,Y?a.p.selarrrow:ga,Y)})}!0===a.p.autowidth&&(B=b(l).innerWidth(),a.p.width=0<B?B:"nw");(function(){var d=0,e=b.jgrid.cell_width?0:o(a.p.cellLayout,0),g=0,f,h=o(a.p.scrollOffset,0),i,k=false,l,m=0,n;b.each(a.p.colModel,function(){if(this.hidden===void 0){this.hidden=false}if(a.p.grouping&&a.p.autowidth){var c=b.inArray(this.name,a.p.groupingView.groupField);if(c>=0&&a.p.groupingView.groupColumnShow.length>c){this.hidden=!a.p.groupingView.groupColumnShow[c]}}this.widthOrg=i=o(this.width,0);if(this.hidden===false){d=d+(i+e);this.fixed?m=m+(i+e):g++}});if(isNaN(a.p.width)){a.p.width=d+(a.p.shrinkToFit===false&&!isNaN(a.p.height)?h:0)}c.width=a.p.width;a.p.tblwidth=d;if(a.p.shrinkToFit===false&&a.p.forceFit===true){a.p.forceFit=false}if(a.p.shrinkToFit===true&&g>0){l=c.width-e*g-m;if(!isNaN(a.p.height)){l=l-h;k=true}d=0;b.each(a.p.colModel,function(b){if(this.hidden===false&&!this.fixed){this.width=i=Math.round(l*this.width/(a.p.tblwidth-e*g-m));d=d+i;f=b}});n=0;k?c.width-m-(d+e*g)!==h&&(n=c.width-m-(d+e*g)-h):!k&&Math.abs(c.width-m-(d+e*g))!==1&&(n=c.width-m-(d+e*g));a.p.colModel[f].width=a.p.colModel[f].width+n;a.p.tblwidth=d+n+e*g+m;if(a.p.tblwidth>a.p.width){a.p.colModel[f].width=a.p.colModel[f].width-(a.p.tblwidth-parseInt(a.p.width,10));a.p.tblwidth=a.p.width}}})();b(l).css("width",c.width+"px").append("<div class='ui-jqgrid-resize-mark' id='rs_m"+a.p.id+"'>&#160;</div>");b(i).css("width",c.width+"px");var B=b("thead:first",a).get(0),Q="";a.p.footerrow&&(Q+="<table role='grid' style='width:"+a.p.tblwidth+"px' class='ui-jqgrid-ftable' cellspacing='0' cellpadding='0' border='0'><tbody><tr role='row' class='ui-widget-content footrow footrow-"+f+"'>");var i=b("tr:first",B),Z="<tr class='jqgfirstrow' role='row' style='height:auto'>";a.p.disableClick=!1;b("th",i).each(function(d){da=a.p.colModel[d].width;if(a.p.colModel[d].resizable===void 0){a.p.colModel[d].resizable=true}if(a.p.colModel[d].resizable){ea=document.createElement("span");b(ea).html("&#160;").addClass("ui-jqgrid-resize ui-jqgrid-resize-"+f).css("cursor","col-resize");b(this).addClass(a.p.resizeclass)}else{ea=""}b(this).css("width",da+"px").prepend(ea);var e="";if(a.p.colModel[d].hidden){b(this).css("display","none");e="display:none;"}Z=Z+("<td role='gridcell' style='height:0px;width:"+da+"px;"+e+"'></td>");c.headers[d]={width:da,el:this};fa=a.p.colModel[d].sortable;if(typeof fa!=="boolean"){fa=a.p.colModel[d].sortable=true}e=a.p.colModel[d].name;e==="cb"||e==="subgrid"||e==="rn"||a.p.viewsortcols[2]&&b(">div",this).addClass("ui-jqgrid-sortable");if(fa){if(a.p.multiSort){if(a.p.viewsortcols[0]){b("div span.s-ico",this).show();a.p.colModel[d].lso&&b("div span.ui-icon-"+a.p.colModel[d].lso,this).removeClass("ui-state-disabled")}else{if(a.p.colModel[d].lso){b("div span.s-ico",this).show();b("div span.ui-icon-"+a.p.colModel[d].lso,this).removeClass("ui-state-disabled")}}}else{if(a.p.viewsortcols[0]){b("div span.s-ico",this).show();d===a.p.lastsort&&b("div span.ui-icon-"+a.p.sortorder,this).removeClass("ui-state-disabled")}else{if(d===a.p.lastsort){b("div span.s-ico",this).show();b("div span.ui-icon-"+a.p.sortorder,this).removeClass("ui-state-disabled")}}}}a.p.footerrow&&(Q=Q+("<td role='gridcell' "+n(d,0,"",null,"",false)+">&#160;</td>"))}).mousedown(function(d){if(b(d.target).closest("th>span.ui-jqgrid-resize").length===1){var e=ma(this);if(a.p.forceFit===true){var g=a.p,f=e,h;for(h=e+1;h<a.p.colModel.length;h++){if(a.p.colModel[h].hidden!==true){f=h;break}}g.nv=f-e}c.dragStart(e,d,sa(e));return false}}).click(function(c){if(a.p.disableClick){return a.p.disableClick=false}var d="th>div.ui-jqgrid-sortable",e,g;a.p.viewsortcols[2]||(d="th>div>span>span.ui-grid-ico-sort");c=b(c.target).closest(d);if(c.length===1){var f;if(a.p.frozenColumns){var h=b(this)[0].id.substring(5);b(a.p.colModel).each(function(a){if(this.name===h){f=a;return false}})}else{f=ma(this)}if(!a.p.viewsortcols[2]){e=true;g=c.attr("sort")}f!=null&&la(b("div",this)[0].id,f,e,g,this);return false}});if(a.p.sortable&&b.fn.sortable){try{b(a).jqGrid("sortableColumns",i)}catch(xa){}}a.p.footerrow&&(Q+="</tr></tbody></table>");Z+="</tr>";this.appendChild(document.createElement("tbody"));b(this).addClass("ui-jqgrid-btable").append(Z);var Z=null,i=b("<table class='ui-jqgrid-htable' style='width:"+a.p.tblwidth+"px' role='grid' aria-labelledby='gbox_"+this.id+"' cellspacing='0' cellpadding='0' border='0'></table>").append(B),H=a.p.caption&&!0===a.p.hiddengrid?!0:!1;g=b("<div class='ui-jqgrid-hbox"+("rtl"===f?"-rtl":"")+"'></div>");B=null;c.hDiv=document.createElement("div");b(c.hDiv).css({width:c.width+"px"}).addClass("ui-state-default ui-jqgrid-hdiv").append(g);b(g).append(i);i=null;H&&b(c.hDiv).hide();a.p.pager&&("string"===typeof a.p.pager?"#"!==a.p.pager.substr(0,1)&&(a.p.pager="#"+a.p.pager):a.p.pager="#"+b(a.p.pager).attr("id"),b(a.p.pager).css({width:c.width+"px"}).addClass("ui-state-default ui-jqgrid-pager ui-corner-bottom").appendTo(l),H&&b(a.p.pager).hide(),ka(a.p.pager,""));!1===a.p.cellEdit&&!0===a.p.hoverrows&&b(a).bind("mouseover",function(a){p=b(a.target).closest("tr.jqgrow");b(p).attr("class")!=="ui-subgrid"&&b(p).addClass("ui-state-hover")}).bind("mouseout",function(a){p=b(a.target).closest("tr.jqgrow");b(p).removeClass("ui-state-hover")});var w,I,ha;b(a).before(c.hDiv).click(function(c){v=c.target;p=b(v,a.rows).closest("tr.jqgrow");if(b(p).length===0||p[0].className.indexOf("ui-state-disabled")>-1||(b(v,a).closest("table.ui-jqgrid-btable").attr("id")||"").replace("_frozen","")!==a.id){return this}var d=b(v).hasClass("cbox"),e=b(a).triggerHandler("jqGridBeforeSelectRow",[p[0].id,c]);(e=e===false||e==="stop"?false:true)&&b.isFunction(a.p.beforeSelectRow)&&(e=a.p.beforeSelectRow.call(a,p[0].id,c));if(!(v.tagName==="A"||(v.tagName==="INPUT"||v.tagName==="TEXTAREA"||v.tagName==="OPTION"||v.tagName==="SELECT")&&!d)&&e===true){w=p[0].id;I=b.jgrid.getCellIndex(v);ha=b(v).closest("td,th").html();b(a).triggerHandler("jqGridCellSelect",[w,I,ha,c]);b.isFunction(a.p.onCellSelect)&&a.p.onCellSelect.call(a,w,I,ha,c);if(a.p.cellEdit===true){if(a.p.multiselect&&d){b(a).jqGrid("setSelection",w,true,c)}else{w=p[0].rowIndex;try{b(a).jqGrid("editCell",w,I,true)}catch(g){}}}else{if(a.p.multikey){if(c[a.p.multikey]){b(a).jqGrid("setSelection",w,true,c)}else{if(a.p.multiselect&&d){d=b("#jqg_"+b.jgrid.jqID(a.p.id)+"_"+w).is(":checked");b("#jqg_"+b.jgrid.jqID(a.p.id)+"_"+w)[a.p.useProp?"prop":"attr"]("checked",d)}}}else{if(a.p.multiselect&&a.p.multiboxonly&&!d){var f=a.p.frozenColumns?a.p.id+"_frozen":"";b(a.p.selarrrow).each(function(c,d){var e=a.rows.namedItem(d);b(e).removeClass("ui-state-highlight");b("#jqg_"+b.jgrid.jqID(a.p.id)+"_"+b.jgrid.jqID(d))[a.p.useProp?"prop":"attr"]("checked",false);if(f){b("#"+b.jgrid.jqID(d),"#"+b.jgrid.jqID(f)).removeClass("ui-state-highlight");b("#jqg_"+b.jgrid.jqID(a.p.id)+"_"+b.jgrid.jqID(d),"#"+b.jgrid.jqID(f))[a.p.useProp?"prop":"attr"]("checked",false)}});a.p.selarrrow=[]}b(a).jqGrid("setSelection",w,true,c)}}}}).bind("reloadGrid",function(c,d){if(a.p.treeGrid===true){a.p.datatype=a.p.treedatatype}d&&d.current&&a.grid.selectionPreserver(a);if(a.p.datatype==="local"){b(a).jqGrid("resetSelection");a.p.data.length&&N()}else{if(!a.p.treeGrid){a.p.selrow=null;if(a.p.multiselect){a.p.selarrrow=[];ca(false)}a.p.savedRow=[]}}a.p.scroll&&V.call(a,true,false);if(d&&d.page){var e=d.page;if(e>a.p.lastpage){e=a.p.lastpage}e<1&&(e=1);a.p.page=e;a.grid.bDiv.scrollTop=a.grid.prevRowHeight?(e-1)*a.grid.prevRowHeight*a.p.rowNum:0}if(a.grid.prevRowHeight&&a.p.scroll){delete a.p.lastpage;a.grid.populateVisible()}else{a.grid.populate()}a.p._inlinenav===true&&b(a).jqGrid("showAddEditButtons");return false}).dblclick(function(c){v=c.target;p=b(v,a.rows).closest("tr.jqgrow");if(b(p).length!==0){w=p[0].rowIndex;I=b.jgrid.getCellIndex(v);b(a).triggerHandler("jqGridDblClickRow",[b(p).attr("id"),w,I,c]);b.isFunction(a.p.ondblClickRow)&&a.p.ondblClickRow.call(a,b(p).attr("id"),w,I,c)}}).bind("contextmenu",function(c){v=c.target;p=b(v,a.rows).closest("tr.jqgrow");if(b(p).length!==0){a.p.multiselect||b(a).jqGrid("setSelection",p[0].id,true,c);w=p[0].rowIndex;I=b.jgrid.getCellIndex(v);b(a).triggerHandler("jqGridRightClickRow",[b(p).attr("id"),w,I,c]);b.isFunction(a.p.onRightClickRow)&&a.p.onRightClickRow.call(a,b(p).attr("id"),w,I,c)}});c.bDiv=document.createElement("div");k&&"auto"===(""+a.p.height).toLowerCase()&&(a.p.height="100%");b(c.bDiv).append(b('<div style="position:relative;'+(k&&8>b.jgrid.msiever()?"height:0.01%;":"")+'"></div>').append("<div></div>").append(this)).addClass("ui-jqgrid-bdiv").css({height:a.p.height+(isNaN(a.p.height)?"":"px"),width:c.width+"px"}).scroll(c.scrollGrid);b("table:first",c.bDiv).css({width:a.p.tblwidth+"px"});b.support.tbody||2===b("tbody",this).length&&b("tbody:gt(0)",this).remove();a.p.multikey&&(b.jgrid.msie?b(c.bDiv).bind("selectstart",function(){return false}):b(c.bDiv).bind("mousedown",function(){return false}));H&&b(c.bDiv).hide();c.cDiv=document.createElement("div");var ia=!0===a.p.hidegrid?b("<a role='link' href='javascript:void(0)'/>").addClass("ui-jqgrid-titlebar-close HeaderButton").hover(function(){ia.addClass("ui-state-hover")},function(){ia.removeClass("ui-state-hover")}).append("<span class='ui-icon ui-icon-circle-triangle-n'></span>").css("rtl"===f?"left":"right","0px"):"";b(c.cDiv).append(ia).append("<span class='ui-jqgrid-title"+("rtl"===f?"-rtl":"")+"'>"+a.p.caption+"</span>").addClass("ui-jqgrid-titlebar ui-widget-header ui-corner-top ui-helper-clearfix");b(c.cDiv).insertBefore(c.hDiv);a.p.toolbar[0]&&(c.uDiv=document.createElement("div"),"top"===a.p.toolbar[1]?b(c.uDiv).insertBefore(c.hDiv):"bottom"===a.p.toolbar[1]&&b(c.uDiv).insertAfter(c.hDiv),"both"===a.p.toolbar[1]?(c.ubDiv=document.createElement("div"),b(c.uDiv).addClass("ui-userdata ui-state-default").attr("id","t_"+this.id).insertBefore(c.hDiv),b(c.ubDiv).addClass("ui-userdata ui-state-default").attr("id","tb_"+this.id).insertAfter(c.hDiv),H&&b(c.ubDiv).hide()):b(c.uDiv).width(c.width).addClass("ui-userdata ui-state-default").attr("id","t_"+this.id),H&&b(c.uDiv).hide());a.p.toppager&&(a.p.toppager=b.jgrid.jqID(a.p.id)+"_toppager",c.topDiv=b("<div id='"+a.p.toppager+"'></div>")[0],a.p.toppager="#"+a.p.toppager,b(c.topDiv).addClass("ui-state-default ui-jqgrid-toppager").width(c.width).insertBefore(c.hDiv),ka(a.p.toppager,"_t"));a.p.footerrow&&(c.sDiv=b("<div class='ui-jqgrid-sdiv'></div>")[0],g=b("<div class='ui-jqgrid-hbox"+("rtl"===f?"-rtl":"")+"'></div>"),b(c.sDiv).append(g).width(c.width).insertAfter(c.hDiv),b(g).append(Q),c.footers=b(".ui-jqgrid-ftable",c.sDiv)[0].rows[0].cells,a.p.rownumbers&&(c.footers[0].className="ui-state-default jqgrid-rownum"),H&&b(c.sDiv).hide());g=null;if(a.p.caption){var ta=a.p.datatype;!0===a.p.hidegrid&&(b(".ui-jqgrid-titlebar-close",c.cDiv).click(function(d){var e=b.isFunction(a.p.onHeaderClick),g=".ui-jqgrid-bdiv, .ui-jqgrid-hdiv, .ui-jqgrid-pager, .ui-jqgrid-sdiv",f,h=this;if(a.p.toolbar[0]===true){a.p.toolbar[1]==="both"&&(g=g+(", #"+b(c.ubDiv).attr("id")));g=g+(", #"+b(c.uDiv).attr("id"))}f=b(g,"#gview_"+b.jgrid.jqID(a.p.id)).length;a.p.gridstate==="visible"?b(g,"#gbox_"+b.jgrid.jqID(a.p.id)).slideUp("fast",function(){f--;if(f===0){b("span",h).removeClass("ui-icon-circle-triangle-n").addClass("ui-icon-circle-triangle-s");a.p.gridstate="hidden";b("#gbox_"+b.jgrid.jqID(a.p.id)).hasClass("ui-resizable")&&b(".ui-resizable-handle","#gbox_"+b.jgrid.jqID(a.p.id)).hide();b(a).triggerHandler("jqGridHeaderClick",[a.p.gridstate,d]);e&&(H||a.p.onHeaderClick.call(a,a.p.gridstate,d))}}):a.p.gridstate==="hidden"&&b(g,"#gbox_"+b.jgrid.jqID(a.p.id)).slideDown("fast",function(){f--;if(f===0){b("span",h).removeClass("ui-icon-circle-triangle-s").addClass("ui-icon-circle-triangle-n");if(H){a.p.datatype=ta;O();H=false}a.p.gridstate="visible";b("#gbox_"+b.jgrid.jqID(a.p.id)).hasClass("ui-resizable")&&b(".ui-resizable-handle","#gbox_"+b.jgrid.jqID(a.p.id)).show();b(a).triggerHandler("jqGridHeaderClick",[a.p.gridstate,d]);e&&(H||a.p.onHeaderClick.call(a,a.p.gridstate,d))}});return false}),H&&(a.p.datatype="local",b(".ui-jqgrid-titlebar-close",c.cDiv).trigger("click")))}else{b(c.cDiv).hide()}b(c.hDiv).after(c.bDiv).mousemove(function(a){if(c.resizing){c.dragMove(a);return false}});b(".ui-jqgrid-labels",c.hDiv).bind("selectstart",function(){return false});b(document).mouseup(function(){if(c.resizing){c.dragEnd();return false}return true});a.formatCol=n;a.sortData=la;a.updatepager=function(c,d){var e,g,f,h,i,j,k,l="",m=a.p.pager?"_"+b.jgrid.jqID(a.p.pager.substr(1)):"",n=a.p.toppager?"_"+a.p.toppager.substr(1):"";f=parseInt(a.p.page,10)-1;f<0&&(f=0);f=f*parseInt(a.p.rowNum,10);i=f+a.p.reccount;if(a.p.scroll){e=b("tbody:first > tr:gt(0)",a.grid.bDiv);f=i-e.length;a.p.reccount=e.length;if(e=e.outerHeight()||a.grid.prevRowHeight){g=f*e;k=parseInt(a.p.records,10)*e;b(">div:first",a.grid.bDiv).css({height:k}).children("div:first").css({height:g,display:g?"":"none"});if(a.grid.bDiv.scrollTop==0&&a.p.page>1){a.grid.bDiv.scrollTop=a.p.rowNum*(a.p.page-1)*e}}a.grid.bDiv.scrollLeft=a.grid.hDiv.scrollLeft}l=a.p.pager||"";if(l=l+(a.p.toppager?l?","+a.p.toppager:a.p.toppager:"")){k=b.jgrid.formatter.integer||{};e=o(a.p.page);g=o(a.p.lastpage);b(".selbox",l)[this.p.useProp?"prop":"attr"]("disabled",false);if(a.p.pginput===true){b(".ui-pg-input",l).val(a.p.page);h=a.p.toppager?"#sp_1"+m+",#sp_1"+n:"#sp_1"+m;b(h).html(b.fmatter?b.fmatter.util.NumberFormat(a.p.lastpage,k):a.p.lastpage)}if(a.p.viewrecords){if(a.p.reccount===0){b(".ui-paging-info",l).html(a.p.emptyrecords)}else{h=f+1;j=a.p.records;if(b.fmatter){h=b.fmatter.util.NumberFormat(h,k);i=b.fmatter.util.NumberFormat(i,k);j=b.fmatter.util.NumberFormat(j,k)}b(".ui-paging-info",l).html(b.jgrid.format(a.p.recordtext,h,i,j))}}if(a.p.pgbuttons===true){e<=0&&(e=g=0);if(e===1||e===0){b("#first"+m+", #prev"+m).addClass("ui-state-disabled").removeClass("ui-state-hover");a.p.toppager&&b("#first_t"+n+", #prev_t"+n).addClass("ui-state-disabled").removeClass("ui-state-hover")}else{b("#first"+m+", #prev"+m).removeClass("ui-state-disabled");a.p.toppager&&b("#first_t"+n+", #prev_t"+n).removeClass("ui-state-disabled")}if(e===g||e===0){b("#next"+m+", #last"+m).addClass("ui-state-disabled").removeClass("ui-state-hover");a.p.toppager&&b("#next_t"+n+", #last_t"+n).addClass("ui-state-disabled").removeClass("ui-state-hover")}else{b("#next"+m+", #last"+m).removeClass("ui-state-disabled");a.p.toppager&&b("#next_t"+n+", #last_t"+n).removeClass("ui-state-disabled")}}}c===true&&a.p.rownumbers===true&&b(">td.jqgrid-rownum",a.rows).each(function(a){b(this).html(f+1+a)});d&&a.p.jqgdnd&&b(a).jqGrid("gridDnD","updateDnD");b(a).triggerHandler("jqGridGridComplete");b.isFunction(a.p.gridComplete)&&a.p.gridComplete.call(a);b(a).triggerHandler("jqGridAfterGridComplete")};a.refreshIndex=N;a.setHeadCheckBox=ca;a.constructTr=X;a.formatter=function(a,b,c,d,e){return t(a,b,c,d,e)};b.extend(c,{populate:O,emptyRows:V});this.grid=c;a.addXmlData=function(b){J(b,a.grid.bDiv)};a.addJSONData=function(b){S(b,a.grid.bDiv)};this.grid.cols=this.rows[0].cells;b(a).triggerHandler("jqGridInitGrid");b.isFunction(a.p.onInitGrid)&&a.p.onInitGrid.call(a);O();a.p.hiddengrid=!1}}}}})};b.jgrid.extend({getGridParam:function(b){var f=this[0];return !f||!f.grid?void 0:!b?f.p:void 0!==f.p[b]?f.p[b]:null},setGridParam:function(d){return this.each(function(){this.grid&&"object"===typeof d&&b.extend(!0,this.p,d)})},getDataIDs:function(){var d=[],f=0,c,e=0;this.each(function(){if((c=this.rows.length)&&0<c){for(;f<c;){b(this.rows[f]).hasClass("jqgrow")&&(d[e]=this.rows[f].id,e++),f++}}});return d},setSelection:function(d,f,c){return this.each(function(){var e,a,j,g,h,i;if(void 0!==d&&(f=!1===f?!1:!0,(a=this.rows.namedItem(""+d))&&a.className&&!(-1<a.className.indexOf("ui-state-disabled")))){if(!0===this.p.scrollrows&&(j=this.rows.namedItem(d).rowIndex,0<=j&&(e=b(this.grid.bDiv)[0].clientHeight,g=b(this.grid.bDiv)[0].scrollTop,h=b(this.rows[j]).position().top,j=this.rows[j].clientHeight,h+j>=e+g?b(this.grid.bDiv)[0].scrollTop=h-(e+g)+j+g:h<e+g&&h<g&&(b(this.grid.bDiv)[0].scrollTop=h))),!0===this.p.frozenColumns&&(i=this.p.id+"_frozen"),this.p.multiselect){if(this.setHeadCheckBox(!1),this.p.selrow=a.id,g=b.inArray(this.p.selrow,this.p.selarrrow),-1===g?("ui-subgrid"!==a.className&&b(a).addClass("ui-state-highlight").attr("aria-selected","true"),e=!0,this.p.selarrrow.push(this.p.selrow)):("ui-subgrid"!==a.className&&b(a).removeClass("ui-state-highlight").attr("aria-selected","false"),e=!1,this.p.selarrrow.splice(g,1),h=this.p.selarrrow[0],this.p.selrow=void 0===h?null:h),b("#jqg_"+b.jgrid.jqID(this.p.id)+"_"+b.jgrid.jqID(a.id))[this.p.useProp?"prop":"attr"]("checked",e),i&&(-1===g?b("#"+b.jgrid.jqID(d),"#"+b.jgrid.jqID(i)).addClass("ui-state-highlight"):b("#"+b.jgrid.jqID(d),"#"+b.jgrid.jqID(i)).removeClass("ui-state-highlight"),b("#jqg_"+b.jgrid.jqID(this.p.id)+"_"+b.jgrid.jqID(d),"#"+b.jgrid.jqID(i))[this.p.useProp?"prop":"attr"]("checked",e)),f){b(this).triggerHandler("jqGridSelectRow",[a.id,e,c]),this.p.onSelectRow&&this.p.onSelectRow.call(this,a.id,e,c)}}else{if("ui-subgrid"!==a.className&&(this.p.selrow!==a.id?(b(this.rows.namedItem(this.p.selrow)).removeClass("ui-state-highlight").attr({"aria-selected":"false",tabindex:"-1"}),b(a).addClass("ui-state-highlight").attr({"aria-selected":"true",tabindex:"0"}),i&&(b("#"+b.jgrid.jqID(this.p.selrow),"#"+b.jgrid.jqID(i)).removeClass("ui-state-highlight"),b("#"+b.jgrid.jqID(d),"#"+b.jgrid.jqID(i)).addClass("ui-state-highlight")),e=!0):e=!1,this.p.selrow=a.id,f)){b(this).triggerHandler("jqGridSelectRow",[a.id,e,c]),this.p.onSelectRow&&this.p.onSelectRow.call(this,a.id,e,c)}}}})},resetSelection:function(d){return this.each(function(){var f=this,c,e,a;!0===f.p.frozenColumns&&(a=f.p.id+"_frozen");if(void 0!==d){e=d===f.p.selrow?f.p.selrow:d;b("#"+b.jgrid.jqID(f.p.id)+" tbody:first tr#"+b.jgrid.jqID(e)).removeClass("ui-state-highlight").attr("aria-selected","false");a&&b("#"+b.jgrid.jqID(e),"#"+b.jgrid.jqID(a)).removeClass("ui-state-highlight");if(f.p.multiselect){b("#jqg_"+b.jgrid.jqID(f.p.id)+"_"+b.jgrid.jqID(e),"#"+b.jgrid.jqID(f.p.id))[f.p.useProp?"prop":"attr"]("checked",!1);if(a){b("#jqg_"+b.jgrid.jqID(f.p.id)+"_"+b.jgrid.jqID(e),"#"+b.jgrid.jqID(a))[f.p.useProp?"prop":"attr"]("checked",!1)}f.setHeadCheckBox(!1)}e=null}else{f.p.multiselect?(b(f.p.selarrrow).each(function(d,e){c=f.rows.namedItem(e);b(c).removeClass("ui-state-highlight").attr("aria-selected","false");b("#jqg_"+b.jgrid.jqID(f.p.id)+"_"+b.jgrid.jqID(e))[f.p.useProp?"prop":"attr"]("checked",!1);a&&(b("#"+b.jgrid.jqID(e),"#"+b.jgrid.jqID(a)).removeClass("ui-state-highlight"),b("#jqg_"+b.jgrid.jqID(f.p.id)+"_"+b.jgrid.jqID(e),"#"+b.jgrid.jqID(a))[f.p.useProp?"prop":"attr"]("checked",!1))}),f.setHeadCheckBox(!1),f.p.selarrrow=[]):f.p.selrow&&(b("#"+b.jgrid.jqID(f.p.id)+" tbody:first tr#"+b.jgrid.jqID(f.p.selrow)).removeClass("ui-state-highlight").attr("aria-selected","false"),a&&b("#"+b.jgrid.jqID(f.p.selrow),"#"+b.jgrid.jqID(a)).removeClass("ui-state-highlight"),f.p.selrow=null)}!0===f.p.cellEdit&&0<=parseInt(f.p.iCol,10)&&0<=parseInt(f.p.iRow,10)&&(b("td:eq("+f.p.iCol+")",f.rows[f.p.iRow]).removeClass("edit-cell ui-state-highlight"),b(f.rows[f.p.iRow]).removeClass("selected-row ui-state-hover"));f.p.savedRow=[]})},getRowData:function(d){var f={},c,e=!1,a,j=0;this.each(function(){var g=this,h,i;if(void 0===d){e=!0,c=[],a=g.rows.length}else{i=g.rows.namedItem(d);if(!i){return f}a=2}for(;j<a;){e&&(i=g.rows[j]),b(i).hasClass("jqgrow")&&(b('td[role="gridcell"]',i).each(function(a){h=g.p.colModel[a].name;if("cb"!==h&&"subgrid"!==h&&"rn"!==h){if(!0===g.p.treeGrid&&h===g.p.ExpandColumn){f[h]=b.jgrid.htmlDecode(b("span:first",this).html())}else{try{f[h]=b.unformat.call(g,this,{rowId:i.id,colModel:g.p.colModel[a]},a)}catch(c){f[h]=b.jgrid.htmlDecode(b(this).html())}}}}),e&&(c.push(f),f={})),j++}});return c||f},delRowData:function(d){var f=!1,c,e;this.each(function(){c=this.rows.namedItem(d);if(!c){return !1}b(c).remove();this.p.records--;this.p.reccount--;this.updatepager(!0,!1);f=!0;this.p.multiselect&&(e=b.inArray(d,this.p.selarrrow),-1!==e&&this.p.selarrrow.splice(e,1));this.p.selrow=this.p.multiselect&&0<this.p.selarrrow.length?this.p.selarrrow[this.p.selarrrow.length-1]:null;if("local"===this.p.datatype){var a=this.p._index[b.jgrid.stripPref(this.p.idPrefix,d)];void 0!==a&&(this.p.data.splice(a,1),this.refreshIndex())}if(!0===this.p.altRows&&f){var j=this.p.altclass;b(this.rows).each(function(a){a%2===1?b(this).addClass(j):b(this).removeClass(j)})}});return f},setRowData:function(d,f,c){var e,a=!0,j;this.each(function(){if(!this.grid){return !1}var g=this,h,i,k=typeof c,l={};i=g.rows.namedItem(d);if(!i){return !1}if(f){try{if(b(this.p.colModel).each(function(a){e=this.name;var c=b.jgrid.getAccessor(f,e);void 0!==c&&(l[e]=this.formatter&&"string"===typeof this.formatter&&"date"===this.formatter?b.unformat.date.call(g,c,this):c,h=g.formatter(d,c,a,f,"edit"),j=this.title?{title:b.jgrid.stripHtml(h)}:{},!0===g.p.treeGrid&&e===g.p.ExpandColumn?b("td[role='gridcell']:eq("+a+") > span:first",i).html(h).attr(j):b("td[role='gridcell']:eq("+a+")",i).html(h).attr(j))}),"local"===g.p.datatype){var o=b.jgrid.stripPref(g.p.idPrefix,d),n=g.p._index[o],m;if(g.p.treeGrid){for(m in g.p.treeReader){g.p.treeReader.hasOwnProperty(m)&&delete l[g.p.treeReader[m]]}}void 0!==n&&(g.p.data[n]=b.extend(!0,g.p.data[n],l));l=null}}catch(t){a=!1}}a&&("string"===k?b(i).addClass(c):"object"===k&&b(i).css(c),b(g).triggerHandler("jqGridAfterGridComplete"))});return a},addRowData:function(d,f,c,e){c||(c="last");var a=!1,j,g,h,i,k,l,o,n,m="",t,A,T,M,$,U;f&&(b.isArray(f)?(t=!0,c="last",A=d):(f=[f],t=!1),this.each(function(){var V=f.length;k=this.p.rownumbers===true?1:0;h=this.p.multiselect===true?1:0;i=this.p.subGrid===true?1:0;if(!t){if(d!==void 0){d=""+d}else{d=b.jgrid.randId();if(this.p.keyIndex!==false){A=this.p.colModel[this.p.keyIndex+h+i+k].name;f[0][A]!==void 0&&(d=f[0][A])}}}T=this.p.altclass;for(var N=0,X="",J={},S=b.isFunction(this.p.afterInsertRow)?true:false;N<V;){M=f[N];g=[];if(t){try{d=M[A];d===void 0&&(d=b.jgrid.randId())}catch(ja){d=b.jgrid.randId()}X=this.p.altRows===true?(this.rows.length-1)%2===0?T:"":""}U=d;d=this.p.idPrefix+d;if(k){m=this.formatCol(0,1,"",null,d,true);g[g.length]='<td role="gridcell" class="ui-state-default jqgrid-rownum" '+m+">0</td>"}if(h){n='<input role="checkbox" type="checkbox" id="jqg_'+this.p.id+"_"+d+'" class="cbox"/>';m=this.formatCol(k,1,"",null,d,true);g[g.length]='<td role="gridcell" '+m+">"+n+"</td>"}i&&(g[g.length]=b(this).jqGrid("addSubGridCell",h+k,1));for(o=h+i+k;o<this.p.colModel.length;o++){$=this.p.colModel[o];j=$.name;J[j]=M[j];n=this.formatter(d,b.jgrid.getAccessor(M,j),o,M);m=this.formatCol(o,1,n,M,d,J);g[g.length]='<td role="gridcell" '+m+">"+n+"</td>"}g.unshift(this.constructTr(d,false,X,J,M,false));g[g.length]="</tr>";if(this.rows.length===0){b("table:first",this.grid.bDiv).append(g.join(""))}else{switch(c){case"last":b(this.rows[this.rows.length-1]).after(g.join(""));l=this.rows.length-1;break;case"first":b(this.rows[0]).after(g.join(""));l=1;break;case"after":(l=this.rows.namedItem(e))&&(b(this.rows[l.rowIndex+1]).hasClass("ui-subgrid")?b(this.rows[l.rowIndex+1]).after(g):b(l).after(g.join("")));l++;break;case"before":if(l=this.rows.namedItem(e)){b(l).before(g.join(""));l=l.rowIndex}l--}}this.p.subGrid===true&&b(this).jqGrid("addSubGrid",h+k,l);this.p.records++;this.p.reccount++;b(this).triggerHandler("jqGridAfterInsertRow",[d,M,M]);S&&this.p.afterInsertRow.call(this,d,M,M);N++;if(this.p.datatype==="local"){J[this.p.localReader.id]=U;this.p._index[U]=this.p.data.length;this.p.data.push(J);J={}}}this.p.altRows===true&&!t&&(c==="last"?(this.rows.length-1)%2===1&&b(this.rows[this.rows.length-1]).addClass(T):b(this.rows).each(function(a){a%2===1?b(this).addClass(T):b(this).removeClass(T)}));this.updatepager(true,true);a=true}));return a},footerData:function(d,f,c){function e(a){for(var b in a){if(a.hasOwnProperty(b)){return !1}}return !0}var a,j=!1,g={},h;void 0===d&&(d="get");"boolean"!==typeof c&&(c=!0);d=d.toLowerCase();this.each(function(){var i=this,k;if(!i.grid||!i.p.footerrow||"set"===d&&e(f)){return !1}j=!0;b(this.p.colModel).each(function(e){a=this.name;"set"===d?void 0!==f[a]&&(k=c?i.formatter("",f[a],e,f,"edit"):f[a],h=this.title?{title:b.jgrid.stripHtml(k)}:{},b("tr.footrow td:eq("+e+")",i.grid.sDiv).html(k).attr(h),j=!0):"get"===d&&(g[a]=b("tr.footrow td:eq("+e+")",i.grid.sDiv).html())})});return"get"===d?g:j},showHideCol:function(d,f){return this.each(function(){var c=this,e=!1,a=b.jgrid.cell_width?0:c.p.cellLayout,j;if(c.grid){"string"===typeof d&&(d=[d]);f="none"!==f?"":"none";var g=""===f?!0:!1,h=c.p.groupHeader&&("object"===typeof c.p.groupHeader||b.isFunction(c.p.groupHeader));h&&b(c).jqGrid("destroyGroupHeader",!1);b(this.p.colModel).each(function(h){if(-1!==b.inArray(this.name,d)&&this.hidden===g){if(!0===c.p.frozenColumns&&!0===this.frozen){return !0}b("tr",c.grid.hDiv).each(function(){b(this.cells[h]).css("display",f)});b(c.rows).each(function(){b(this).hasClass("jqgroup")||b(this.cells[h]).css("display",f)});c.p.footerrow&&b("tr.footrow td:eq("+h+")",c.grid.sDiv).css("display",f);j=parseInt(this.width,10);c.p.tblwidth="none"===f?c.p.tblwidth-(j+a):c.p.tblwidth+(j+a);this.hidden=!g;e=!0;b(c).triggerHandler("jqGridShowHideCol",[g,this.name,h])}});!0===e&&(!0===c.p.shrinkToFit&&!isNaN(c.p.height)&&(c.p.tblwidth+=parseInt(c.p.scrollOffset,10)),b(c).jqGrid("setGridWidth",!0===c.p.shrinkToFit?c.p.tblwidth:c.p.width));h&&b(c).jqGrid("setGroupHeaders",c.p.groupHeader)}})},hideCol:function(d){return this.each(function(){b(this).jqGrid("showHideCol",d,"none")})},showCol:function(d){return this.each(function(){b(this).jqGrid("showHideCol",d,"")})},remapColumns:function(d,f,c){function e(a){var c;c=a.length?b.makeArray(a):b.extend({},a);b.each(d,function(b){a[b]=c[this]})}function a(a,c){b(">tr"+(c||""),a).each(function(){var a=this,c=b.makeArray(a.cells);b.each(d,function(){var b=c[this];b&&a.appendChild(b)})})}var j=this.get(0);e(j.p.colModel);e(j.p.colNames);e(j.grid.headers);a(b("thead:first",j.grid.hDiv),c&&":not(.ui-jqgrid-labels)");f&&a(b("#"+b.jgrid.jqID(j.p.id)+" tbody:first"),".jqgfirstrow, tr.jqgrow, tr.jqfoot");j.p.footerrow&&a(b("tbody:first",j.grid.sDiv));j.p.remapColumns&&(j.p.remapColumns.length?e(j.p.remapColumns):j.p.remapColumns=b.makeArray(d));j.p.lastsort=b.inArray(j.p.lastsort,d);j.p.treeGrid&&(j.p.expColInd=b.inArray(j.p.expColInd,d));b(j).triggerHandler("jqGridRemapColumns",[d,f,c])},setGridWidth:function(d,f){return this.each(function(){if(this.grid){var c=this,e,a=0,j=b.jgrid.cell_width?0:c.p.cellLayout,g,h=0,i=!1,k=c.p.scrollOffset,l,o=0,n;"boolean"!==typeof f&&(f=c.p.shrinkToFit);if(!isNaN(d)){d=parseInt(d,10);c.grid.width=c.p.width=d;b("#gbox_"+b.jgrid.jqID(c.p.id)).css("width",d+"px");b("#gview_"+b.jgrid.jqID(c.p.id)).css("width",d+"px");b(c.grid.bDiv).css("width",d+"px");b(c.grid.hDiv).css("width",d+"px");c.p.pager&&b(c.p.pager).css("width",d+"px");c.p.toppager&&b(c.p.toppager).css("width",d+"px");!0===c.p.toolbar[0]&&(b(c.grid.uDiv).css("width",d+"px"),"both"===c.p.toolbar[1]&&b(c.grid.ubDiv).css("width",d+"px"));c.p.footerrow&&b(c.grid.sDiv).css("width",d+"px");!1===f&&!0===c.p.forceFit&&(c.p.forceFit=!1);if(!0===f){b.each(c.p.colModel,function(){if(this.hidden===false){e=this.widthOrg;a=a+(e+j);this.fixed?o=o+(e+j):h++}});if(0===h){return}c.p.tblwidth=a;l=d-j*h-o;if(!isNaN(c.p.height)&&(b(c.grid.bDiv)[0].clientHeight<b(c.grid.bDiv)[0].scrollHeight||1===c.rows.length)){i=!0,l-=k}var a=0,m=0<c.grid.cols.length;b.each(c.p.colModel,function(b){if(this.hidden===false&&!this.fixed){e=this.widthOrg;e=Math.round(l*e/(c.p.tblwidth-j*h-o));if(!(e<0)){this.width=e;a=a+e;c.grid.headers[b].width=e;c.grid.headers[b].el.style.width=e+"px";if(c.p.footerrow){c.grid.footers[b].style.width=e+"px"}if(m){c.grid.cols[b].style.width=e+"px"}g=b}}});if(!g){return}n=0;i?d-o-(a+j*h)!==k&&(n=d-o-(a+j*h)-k):1!==Math.abs(d-o-(a+j*h))&&(n=d-o-(a+j*h));c.p.colModel[g].width+=n;c.p.tblwidth=a+n+j*h+o;c.p.tblwidth>d?(i=c.p.tblwidth-parseInt(d,10),c.p.tblwidth=d,e=c.p.colModel[g].width-=i):e=c.p.colModel[g].width;c.grid.headers[g].width=e;c.grid.headers[g].el.style.width=e+"px";m&&(c.grid.cols[g].style.width=e+"px");c.p.footerrow&&(c.grid.footers[g].style.width=e+"px")}c.p.tblwidth&&(b("table:first",c.grid.bDiv).css("width",c.p.tblwidth+"px"),b("table:first",c.grid.hDiv).css("width",c.p.tblwidth+"px"),c.grid.hDiv.scrollLeft=c.grid.bDiv.scrollLeft,c.p.footerrow&&b("table:first",c.grid.sDiv).css("width",c.p.tblwidth+"px"))}}})},setGridHeight:function(d){return this.each(function(){if(this.grid){var f=b(this.grid.bDiv);f.css({height:d+(isNaN(d)?"":"px")});!0===this.p.frozenColumns&&b("#"+b.jgrid.jqID(this.p.id)+"_frozen").parent().height(f.height()-16);this.p.height=d;this.p.scroll&&this.grid.populateVisible()}})},setCaption:function(d){return this.each(function(){this.p.caption=d;b("span.ui-jqgrid-title, span.ui-jqgrid-title-rtl",this.grid.cDiv).html(d);b(this.grid.cDiv).show()})},setLabel:function(d,f,c,e){return this.each(function(){var a=-1;if(this.grid&&void 0!==d&&(b(this.p.colModel).each(function(b){if(this.name===d){return a=b,!1}}),0<=a)){var j=b("tr.ui-jqgrid-labels th:eq("+a+")",this.grid.hDiv);if(f){var g=b(".s-ico",j);b("[id^=jqgh_]",j).empty().html(f).append(g);this.p.colNames[a]=f}c&&("string"===typeof c?b(j).addClass(c):b(j).css(c));"object"===typeof e&&b(j).attr(e)}})},setCell:function(d,f,c,e,a,j){return this.each(function(){var g=-1,h,i;if(this.grid&&(isNaN(f)?b(this.p.colModel).each(function(a){if(this.name===f){return g=a,!1}}):g=parseInt(f,10),0<=g&&(h=this.rows.namedItem(d)))){var k=b("td:eq("+g+")",h);if(""!==c||!0===j){h=this.formatter(d,c,g,h,"edit"),i=this.p.colModel[g].title?{title:b.jgrid.stripHtml(h)}:{},this.p.treeGrid&&0<b(".tree-wrap",b(k)).length?b("span",b(k)).html(h).attr(i):b(k).html(h).attr(i),"local"===this.p.datatype&&(h=this.p.colModel[g],c=h.formatter&&"string"===typeof h.formatter&&"date"===h.formatter?b.unformat.date.call(this,c,h):c,i=this.p._index[b.jgrid.stripPref(this.p.idPrefix,d)],void 0!==i&&(this.p.data[i][h.name]=c))}"string"===typeof e?b(k).addClass(e):e&&b(k).css(e);"object"===typeof a&&b(k).attr(a)}})},getCell:function(d,f){var c=!1;this.each(function(){var e=-1;if(this.grid&&(isNaN(f)?b(this.p.colModel).each(function(a){if(this.name===f){return e=a,!1}}):e=parseInt(f,10),0<=e)){var a=this.rows.namedItem(d);if(a){try{c=b.unformat.call(this,b("td:eq("+e+")",a),{rowId:a.id,colModel:this.p.colModel[e]},e)}catch(j){c=b.jgrid.htmlDecode(b("td:eq("+e+")",a).html())}}}});return c},getCol:function(d,f,c){var e=[],a,j=0,g,h,i,f="boolean"!==typeof f?!1:f;void 0===c&&(c=!1);this.each(function(){var k=-1;if(this.grid&&(isNaN(d)?b(this.p.colModel).each(function(a){if(this.name===d){return k=a,!1}}):k=parseInt(d,10),0<=k)){var l=this.rows.length,o=0;if(l&&0<l){for(;o<l;){if(b(this.rows[o]).hasClass("jqgrow")){try{a=b.unformat.call(this,b(this.rows[o].cells[k]),{rowId:this.rows[o].id,colModel:this.p.colModel[k]},k)}catch(n){a=b.jgrid.htmlDecode(this.rows[o].cells[k].innerHTML)}c?(i=parseFloat(a),j+=i,void 0===h&&(h=g=i),g=Math.min(g,i),h=Math.max(h,i)):f?e.push({id:this.rows[o].id,value:a}):e.push(a)}o++}if(c){switch(c.toLowerCase()){case"sum":e=j;break;case"avg":e=j/l;break;case"count":e=l;break;case"min":e=g;break;case"max":e=h}}}}});return e},clearGridData:function(d){return this.each(function(){if(this.grid){"boolean"!==typeof d&&(d=!1);if(this.p.deepempty){b("#"+b.jgrid.jqID(this.p.id)+" tbody:first tr:gt(0)").remove()}else{var f=b("#"+b.jgrid.jqID(this.p.id)+" tbody:first tr:first")[0];b("#"+b.jgrid.jqID(this.p.id)+" tbody:first").empty().append(f)}this.p.footerrow&&d&&b(".ui-jqgrid-ftable td",this.grid.sDiv).html("&#160;");this.p.selrow=null;this.p.selarrrow=[];this.p.savedRow=[];this.p.records=0;this.p.page=1;this.p.lastpage=0;this.p.reccount=0;this.p.data=[];this.p._index={};this.updatepager(!0,!1)}})},getInd:function(b,f){var c=!1,e;this.each(function(){(e=this.rows.namedItem(b))&&(c=!0===f?e:e.rowIndex)});return c},bindKeys:function(d){var f=b.extend({onEnter:null,onSpace:null,onLeftKey:null,onRightKey:null,scrollingRows:!0},d||{});return this.each(function(){var c=this;b("body").is("[role]")||b("body").attr("role","application");c.p.scrollrows=f.scrollingRows;b(c).keydown(function(d){var a=b(c).find("tr[tabindex=0]")[0],j,g,h,i=c.p.treeReader.expanded_field;if(a){if(h=c.p._index[b.jgrid.stripPref(c.p.idPrefix,a.id)],37===d.keyCode||38===d.keyCode||39===d.keyCode||40===d.keyCode){if(38===d.keyCode){g=a.previousSibling;j="";if(g){if(b(g).is(":hidden")){for(;g;){if(g=g.previousSibling,!b(g).is(":hidden")&&b(g).hasClass("jqgrow")){j=g.id;break}}}else{j=g.id}}b(c).jqGrid("setSelection",j,!0,d);d.preventDefault()}if(40===d.keyCode){g=a.nextSibling;j="";if(g){if(b(g).is(":hidden")){for(;g;){if(g=g.nextSibling,!b(g).is(":hidden")&&b(g).hasClass("jqgrow")){j=g.id;break}}}else{j=g.id}}b(c).jqGrid("setSelection",j,!0,d);d.preventDefault()}37===d.keyCode&&(c.p.treeGrid&&c.p.data[h][i]&&b(a).find("div.treeclick").trigger("click"),b(c).triggerHandler("jqGridKeyLeft",[c.p.selrow]),b.isFunction(f.onLeftKey)&&f.onLeftKey.call(c,c.p.selrow));39===d.keyCode&&(c.p.treeGrid&&!c.p.data[h][i]&&b(a).find("div.treeclick").trigger("click"),b(c).triggerHandler("jqGridKeyRight",[c.p.selrow]),b.isFunction(f.onRightKey)&&f.onRightKey.call(c,c.p.selrow))}else{13===d.keyCode?(b(c).triggerHandler("jqGridKeyEnter",[c.p.selrow]),b.isFunction(f.onEnter)&&f.onEnter.call(c,c.p.selrow)):32===d.keyCode&&(b(c).triggerHandler("jqGridKeySpace",[c.p.selrow]),b.isFunction(f.onSpace)&&f.onSpace.call(c,c.p.selrow))}}})})},unbindKeys:function(){return this.each(function(){b(this).unbind("keydown")})},getLocalRow:function(d){var f=!1,c;this.each(function(){void 0!==d&&(c=this.p._index[b.jgrid.stripPref(this.p.idPrefix,d)],0<=c&&(f=this.p.data[c]))});return f}})})(jQuery);(function(b){b.fmatter={};b.extend(b.fmatter,{isBoolean:function(c){return"boolean"===typeof c},isObject:function(a){return a&&("object"===typeof a||b.isFunction(a))||!1},isString:function(c){return"string"===typeof c},isNumber:function(c){return"number"===typeof c&&isFinite(c)},isValue:function(c){return this.isObject(c)||this.isString(c)||this.isNumber(c)||this.isBoolean(c)},isEmpty:function(a){if(!this.isString(a)&&this.isValue(a)){return !1}if(!this.isValue(a)){return !0}a=b.trim(a).replace(/\&nbsp\;/ig,"").replace(/\&#160\;/ig,"");return""===a}});b.fn.fmatter=function(n,a,m,l,k){var j=a,m=b.extend({},b.jgrid.formatter,m);try{j=b.fn.fmatter[n].call(this,a,m,l,k)}catch(i){}return j};b.fmatter.util={NumberFormat:function(q,r){b.fmatter.isNumber(q)||(q*=1);if(b.fmatter.isNumber(q)){var p=0>q,o=""+q,n=r.decimalSeparator||".",m;if(b.fmatter.isNumber(r.decimalPlaces)){var l=r.decimalPlaces,o=Math.pow(10,l),o=""+Math.round(q*o)/o;m=o.lastIndexOf(".");if(0<l){0>m?(o+=n,m=o.length-1):"."!==n&&(o=o.replace(".",n));for(;o.length-1-m<l;){o+="0"}}}if(r.thousandsSeparator){l=r.thousandsSeparator;m=o.lastIndexOf(n);m=-1<m?m:o.length;var n=o.substring(m),a=-1,k;for(k=m;0<k;k--){a++;if(0===a%3&&k!==m&&(!p||1<k)){n=l+n}n=o.charAt(k-1)+n}o=n}o=r.prefix?r.prefix+o:o;return o=r.suffix?o+r.suffix:o}return q}};b.fn.fmatter.defaultFormat=function(d,a){return b.fmatter.isValue(d)&&""!==d?d:a.defaultValue||"&#160;"};b.fn.fmatter.email=function(d,a){return !b.fmatter.isEmpty(d)?'<a href="mailto:'+d+'">'+d+"</a>":b.fn.fmatter.defaultFormat(d,a)};b.fn.fmatter.checkbox=function(h,a){var g=b.extend({},a.checkbox),f;void 0!==a.colModel&&void 0!==a.colModel.formatoptions&&(g=b.extend({},g,a.colModel.formatoptions));f=!0===g.disabled?'disabled="disabled"':"";if(b.fmatter.isEmpty(h)||void 0===h){h=b.fn.fmatter.defaultFormat(h,g)}h=(""+h).toLowerCase();return'<input type="checkbox" '+(0>h.search(/(false|f|0|no|n|off|undefined)/i)?" checked='checked' ":"")+' value="'+h+'" offval="no" '+f+"/>"};b.fn.fmatter.link=function(h,a){var g={target:a.target},f="";void 0!==a.colModel&&void 0!==a.colModel.formatoptions&&(g=b.extend({},g,a.colModel.formatoptions));g.target&&(f="target="+g.target);return !b.fmatter.isEmpty(h)?"<a "+f+' href="'+h+'">'+h+"</a>":b.fn.fmatter.defaultFormat(h,a)};b.fn.fmatter.showlink=function(h,a){var g={baseLinkUrl:a.baseLinkUrl,showAction:a.showAction,addParam:a.addParam||"",target:a.target,idName:a.idName},f="";void 0!==a.colModel&&void 0!==a.colModel.formatoptions&&(g=b.extend({},g,a.colModel.formatoptions));g.target&&(f="target="+g.target);g=g.baseLinkUrl+g.showAction+"?"+g.idName+"="+a.rowId+g.addParam;return b.fmatter.isString(h)||b.fmatter.isNumber(h)?"<a "+f+' href="'+g+'">'+h+"</a>":b.fn.fmatter.defaultFormat(h,a)};b.fn.fmatter.integer=function(f,a){var e=b.extend({},a.integer);void 0!==a.colModel&&void 0!==a.colModel.formatoptions&&(e=b.extend({},e,a.colModel.formatoptions));return b.fmatter.isEmpty(f)?e.defaultValue:b.fmatter.util.NumberFormat(f,e)};b.fn.fmatter.number=function(f,a){var e=b.extend({},a.number);void 0!==a.colModel&&void 0!==a.colModel.formatoptions&&(e=b.extend({},e,a.colModel.formatoptions));return b.fmatter.isEmpty(f)?e.defaultValue:b.fmatter.util.NumberFormat(f,e)};b.fn.fmatter.currency=function(f,a){var e=b.extend({},a.currency);void 0!==a.colModel&&void 0!==a.colModel.formatoptions&&(e=b.extend({},e,a.colModel.formatoptions));return b.fmatter.isEmpty(f)?e.defaultValue:b.fmatter.util.NumberFormat(f,e)};b.fn.fmatter.date=function(h,a,g,f){g=b.extend({},a.date);void 0!==a.colModel&&void 0!==a.colModel.formatoptions&&(g=b.extend({},g,a.colModel.formatoptions));return !g.reformatAfterEdit&&"edit"===f?b.fn.fmatter.defaultFormat(h,a):!b.fmatter.isEmpty(h)?b.jgrid.parseDate(g.srcformat,h,g.newformat,g):b.fn.fmatter.defaultFormat(h,a)};b.fn.fmatter.select=function(u,v){var u=""+u,t=!1,s=[],r,q;void 0!==v.colModel.formatoptions?(t=v.colModel.formatoptions.value,r=void 0===v.colModel.formatoptions.separator?":":v.colModel.formatoptions.separator,q=void 0===v.colModel.formatoptions.delimiter?";":v.colModel.formatoptions.delimiter):void 0!==v.colModel.editoptions&&(t=v.colModel.editoptions.value,r=void 0===v.colModel.editoptions.separator?":":v.colModel.editoptions.separator,q=void 0===v.colModel.editoptions.delimiter?";":v.colModel.editoptions.delimiter);if(t){var p=!0===v.colModel.editoptions.multiple?!0:!1,n=[];p&&(n=u.split(","),n=b.map(n,function(c){return b.trim(c)}));if(b.fmatter.isString(t)){var o=t.split(q),m=0,a;for(a=0;a<o.length;a++){if(q=o[a].split(r),2<q.length&&(q[1]=b.map(q,function(d,c){if(c>0){return d}}).join(r)),p){-1<b.inArray(q[0],n)&&(s[m]=q[1],m++)}else{if(b.trim(q[0])===b.trim(u)){s[0]=q[1];break}}}}else{b.fmatter.isObject(t)&&(p?s=b.map(n,function(c){return t[c]}):s[0]=t[u]||"")}}u=s.join(", ");return""===u?b.fn.fmatter.defaultFormat(u,v):u};b.fn.fmatter.rowactions=function(s){var t=b(this).closest("tr.jqgrow"),r=t.attr("id"),q=b(this).closest("table.ui-jqgrid-btable").attr("id").replace(/_frozen([^_]*)$/,"$1"),q=b("#"+q),p=q[0],o=p.p,n=o.colModel[b.jgrid.getCellIndex(this)],l=n.frozen?b("tr#"+r+" td:eq("+b.jgrid.getCellIndex(this)+") > div",q):b(this).parent(),m={keys:!1,onEdit:null,onSuccess:null,afterSave:null,onError:null,afterRestore:null,extraparam:{},url:null,restoreAfterError:!0,mtype:"POST",delOptions:{},editOptions:{}},a=function(c){b.isFunction(m.afterRestore)&&m.afterRestore.call(p,c);l.find("div.ui-inline-edit,div.ui-inline-del").show();l.find("div.ui-inline-save,div.ui-inline-cancel").hide()};void 0!==n.formatoptions&&(m=b.extend(m,n.formatoptions));void 0!==o.editOptions&&(m.editOptions=o.editOptions);void 0!==o.delOptions&&(m.delOptions=o.delOptions);t.hasClass("jqgrid-new-row")&&(m.extraparam[o.prmNames.oper]=o.prmNames.addoper);t={keys:m.keys,oneditfunc:m.onEdit,successfunc:m.onSuccess,url:m.url,extraparam:m.extraparam,aftersavefunc:function(d,e){b.isFunction(m.afterSave)&&m.afterSave.call(p,d,e);l.find("div.ui-inline-edit,div.ui-inline-del").show();l.find("div.ui-inline-save,div.ui-inline-cancel").hide()},errorfunc:m.onError,afterrestorefunc:a,restoreAfterError:m.restoreAfterError,mtype:m.mtype};switch(s){case"edit":q.jqGrid("editRow",r,t);l.find("div.ui-inline-edit,div.ui-inline-del").hide();l.find("div.ui-inline-save,div.ui-inline-cancel").show();q.triggerHandler("jqGridAfterGridComplete");break;case"save":q.jqGrid("saveRow",r,t)&&(l.find("div.ui-inline-edit,div.ui-inline-del").show(),l.find("div.ui-inline-save,div.ui-inline-cancel").hide(),q.triggerHandler("jqGridAfterGridComplete"));break;case"cancel":q.jqGrid("restoreRow",r,a);l.find("div.ui-inline-edit,div.ui-inline-del").show();l.find("div.ui-inline-save,div.ui-inline-cancel").hide();q.triggerHandler("jqGridAfterGridComplete");break;case"del":q.jqGrid("delGridRow",r,m.delOptions);break;case"formedit":q.jqGrid("setSelection",r),q.jqGrid("editGridRow",r,m.editOptions)}};b.fn.fmatter.actions=function(j,a){var i={keys:!1,editbutton:!0,delbutton:!0,editformbutton:!1},h=a.rowId,g="";void 0!==a.colModel.formatoptions&&(i=b.extend(i,a.colModel.formatoptions));if(void 0===h||b.fmatter.isEmpty(h)){return""}i.editformbutton?g+="<div title='"+b.jgrid.nav.edittitle+"' style='float:left;cursor:pointer;' class='ui-pg-div ui-inline-edit' "+("id='jEditButton_"+h+"' onclick=jQuery.fn.fmatter.rowactions.call(this,'formedit'); onmouseover=jQuery(this).addClass('ui-state-hover'); onmouseout=jQuery(this).removeClass('ui-state-hover'); ")+"><span class='ui-icon ui-icon-pencil'></span></div>":i.editbutton&&(g+="<div title='"+b.jgrid.nav.edittitle+"' style='float:left;cursor:pointer;' class='ui-pg-div ui-inline-edit' "+("id='jEditButton_"+h+"' onclick=jQuery.fn.fmatter.rowactions.call(this,'edit'); onmouseover=jQuery(this).addClass('ui-state-hover'); onmouseout=jQuery(this).removeClass('ui-state-hover') ")+"><span class='ui-icon ui-icon-pencil'></span></div>");i.delbutton&&(g+="<div title='"+b.jgrid.nav.deltitle+"' style='float:left;margin-left:5px;' class='ui-pg-div ui-inline-del' "+("id='jDeleteButton_"+h+"' onclick=jQuery.fn.fmatter.rowactions.call(this,'del'); onmouseover=jQuery(this).addClass('ui-state-hover'); onmouseout=jQuery(this).removeClass('ui-state-hover'); ")+"><span class='ui-icon ui-icon-trash'></span></div>");g+="<div title='"+b.jgrid.edit.bSubmit+"' style='float:left;display:none' class='ui-pg-div ui-inline-save' "+("id='jSaveButton_"+h+"' onclick=jQuery.fn.fmatter.rowactions.call(this,'save'); onmouseover=jQuery(this).addClass('ui-state-hover'); onmouseout=jQuery(this).removeClass('ui-state-hover'); ")+"><span class='ui-icon ui-icon-disk'></span></div>";g+="<div title='"+b.jgrid.edit.bCancel+"' style='float:left;display:none;margin-left:5px;' class='ui-pg-div ui-inline-cancel' "+("id='jCancelButton_"+h+"' onclick=jQuery.fn.fmatter.rowactions.call(this,'cancel'); onmouseover=jQuery(this).addClass('ui-state-hover'); onmouseout=jQuery(this).removeClass('ui-state-hover'); ")+"><span class='ui-icon ui-icon-cancel'></span></div>";return"<div style='margin-left:8px;'>"+g+"</div>"};b.unformat=function(q,r,p,o){var n,m=r.colModel.formatter,l=r.colModel.formatoptions||{},a=/([\.\*\_\'\(\)\{\}\+\?\\])/g,k=r.colModel.unformat||b.fn.fmatter[m]&&b.fn.fmatter[m].unformat;if(void 0!==k&&b.isFunction(k)){n=k.call(this,b(q).text(),r,q)}else{if(void 0!==m&&b.fmatter.isString(m)){switch(n=b.jgrid.formatter||{},m){case"integer":l=b.extend({},n.integer,l);r=l.thousandsSeparator.replace(a,"\\$1");n=b(q).text().replace(RegExp(r,"g"),"");break;case"number":l=b.extend({},n.number,l);r=l.thousandsSeparator.replace(a,"\\$1");n=b(q).text().replace(RegExp(r,"g"),"").replace(l.decimalSeparator,".");break;case"currency":l=b.extend({},n.currency,l);r=l.thousandsSeparator.replace(a,"\\$1");r=RegExp(r,"g");n=b(q).text();l.prefix&&l.prefix.length&&(n=n.substr(l.prefix.length));l.suffix&&l.suffix.length&&(n=n.substr(0,n.length-l.suffix.length));n=n.replace(r,"").replace(l.decimalSeparator,".");break;case"checkbox":l=r.colModel.editoptions?r.colModel.editoptions.value.split(":"):["Yes","No"];n=b("input",q).is(":checked")?l[0]:l[1];break;case"select":n=b.unformat.select(q,r,p,o);break;case"actions":return"";default:n=b(q).text()}}}return void 0!==n?n:!0===o?b(q).text():b.jgrid.htmlDecode(b(q).html())};b.unformat.select=function(s,t,r,q){r=[];s=b(s).text();if(!0===q){return s}var q=b.extend({},void 0!==t.colModel.formatoptions?t.colModel.formatoptions:t.colModel.editoptions),t=void 0===q.separator?":":q.separator,p=void 0===q.delimiter?";":q.delimiter;if(q.value){var o=q.value,q=!0===q.multiple?!0:!1,n=[];q&&(n=s.split(","),n=b.map(n,function(c){return b.trim(c)}));if(b.fmatter.isString(o)){var l=o.split(p),m=0,a;for(a=0;a<l.length;a++){if(p=l[a].split(t),2<p.length&&(p[1]=b.map(p,function(d,c){if(c>0){return d}}).join(t)),q){-1<b.inArray(p[1],n)&&(r[m]=p[0],m++)}else{if(b.trim(p[1])===b.trim(s)){r[0]=p[0];break}}}}else{if(b.fmatter.isObject(o)||b.isArray(o)){q||(n[0]=s),r=b.map(n,function(d){var e;b.each(o,function(c,f){if(f===d){e=c;return false}});if(e!==void 0){return e}})}}return r.join(", ")}return s||""};b.unformat.date=function(f,a){var e=b.jgrid.formatter.date||{};void 0!==a.formatoptions&&(e=b.extend({},e,a.formatoptions));return !b.fmatter.isEmpty(f)?b.jgrid.parseDate(e.newformat,f,e.srcformat,e):b.fn.fmatter.defaultFormat(f,a)}})(jQuery);(function(b){b.jgrid.extend({getColProp:function(d){var i={},h=this[0];if(!h.grid){return !1}var h=h.p.colModel,e;for(e=0;e<h.length;e++){if(h[e].name===d){i=h[e];break}}return i},setColProp:function(a,d){return this.each(function(){if(this.grid&&d){var e=this.p.colModel,c;for(c=0;c<e.length;c++){if(e[c].name===a){b.extend(!0,this.p.colModel[c],d);break}}}})},sortGrid:function(d,g,e){return this.each(function(){var c=-1,a;if(this.grid){d||(d=this.p.sortname);for(a=0;a<this.p.colModel.length;a++){if(this.p.colModel[a].index===d||this.p.colModel[a].name===d){c=a;break}}-1!==c&&(a=this.p.colModel[c].sortable,"boolean"!==typeof a&&(a=!0),"boolean"!==typeof g&&(g=!1),a&&this.sortData("jqgh_"+this.p.id+"_"+d,c,g,e))}})},clearBeforeUnload:function(){return this.each(function(){var a=this.grid;a.emptyRows.call(this,!0,!0);b(a.hDiv).unbind("mousemove");b(this).unbind();a.dragEnd=null;a.dragMove=null;a.dragStart=null;a.emptyRows=null;a.populate=null;a.populateVisible=null;a.scrollGrid=null;a.selectionPreserver=null;a.bDiv=null;a.cDiv=null;a.hDiv=null;a.cols=null;var e,d=a.headers.length;for(e=0;e<d;e++){a.headers[e].el=null}this.addJSONData=this.addXmlData=this.formatter=this.constructTr=this.setHeadCheckBox=this.refreshIndex=this.updatepager=this.sortData=this.formatCol=null})},GridDestroy:function(){return this.each(function(){if(this.grid){this.p.pager&&b(this.p.pager).remove();try{b(this).jqGrid("clearBeforeUnload"),b("#gbox_"+b.jgrid.jqID(this.id)).remove()}catch(a){}}})},GridUnload:function(){return this.each(function(){if(this.grid){var a=b(this).attr("id"),e=b(this).attr("class");this.p.pager&&b(this.p.pager).empty().removeClass("ui-state-default ui-jqgrid-pager corner-bottom");var d=document.createElement("table");b(d).attr({id:a});d.className=e;a=b.jgrid.jqID(this.id);b(d).removeClass("ui-jqgrid-btable");1===b(this.p.pager).parents("#gbox_"+a).length?(b(d).insertBefore("#gbox_"+a).show(),b(this.p.pager).insertBefore("#gbox_"+a)):b(d).insertBefore("#gbox_"+a).show();b(this).jqGrid("clearBeforeUnload");b("#gbox_"+a).remove()}})},setGridState:function(a){return this.each(function(){this.grid&&("hidden"===a?(b(".ui-jqgrid-bdiv, .ui-jqgrid-hdiv","#gview_"+b.jgrid.jqID(this.p.id)).slideUp("fast"),this.p.pager&&b(this.p.pager).slideUp("fast"),this.p.toppager&&b(this.p.toppager).slideUp("fast"),!0===this.p.toolbar[0]&&("both"===this.p.toolbar[1]&&b(this.grid.ubDiv).slideUp("fast"),b(this.grid.uDiv).slideUp("fast")),this.p.footerrow&&b(".ui-jqgrid-sdiv","#gbox_"+b.jgrid.jqID(this.p.id)).slideUp("fast"),b(".ui-jqgrid-titlebar-close span",this.grid.cDiv).removeClass("ui-icon-circle-triangle-n").addClass("ui-icon-circle-triangle-s"),this.p.gridstate="hidden"):"visible"===a&&(b(".ui-jqgrid-hdiv, .ui-jqgrid-bdiv","#gview_"+b.jgrid.jqID(this.p.id)).slideDown("fast"),this.p.pager&&b(this.p.pager).slideDown("fast"),this.p.toppager&&b(this.p.toppager).slideDown("fast"),!0===this.p.toolbar[0]&&("both"===this.p.toolbar[1]&&b(this.grid.ubDiv).slideDown("fast"),b(this.grid.uDiv).slideDown("fast")),this.p.footerrow&&b(".ui-jqgrid-sdiv","#gbox_"+b.jgrid.jqID(this.p.id)).slideDown("fast"),b(".ui-jqgrid-titlebar-close span",this.grid.cDiv).removeClass("ui-icon-circle-triangle-s").addClass("ui-icon-circle-triangle-n"),this.p.gridstate="visible"))})},filterToolbar:function(a){a=b.extend({autosearch:!0,searchOnEnter:!0,beforeSearch:null,afterSearch:null,beforeClear:null,afterClear:null,searchurl:"",stringResult:!1,groupOp:"AND",defaultSearch:"bw",searchOperators:!1,operandTitle:"Click to select search operation.",operands:{eq:"==",ne:"!",lt:"<",le:"<=",gt:">",ge:">=",bw:"^",bn:"!^","in":"=",ni:"!=",ew:"|",en:"!@",cn:"~",nc:"!~",nu:"#",nn:"!#"}},b.jgrid.search,a||{});return this.each(function(){var l=this;if(!this.ftoolbar){var k=function(){var w={},x=0,v,p,r={},m;b.each(l.p.colModel,function(){var g=b("#gs_"+b.jgrid.jqID(this.name),!0===this.frozen&&!0===l.p.frozenColumns?l.grid.fhDiv:l.grid.hDiv);p=this.index||this.name;m=a.searchOperators?g.parent().prev().children("a").attr("soper")||a.defaultSearch:this.searchoptions&&this.searchoptions.sopt?this.searchoptions.sopt[0]:"select"===this.stype?"eq":a.defaultSearch;if((v="custom"===this.stype&&b.isFunction(this.searchoptions.custom_value)&&0<g.length&&"SPAN"===g[0].nodeName.toUpperCase()?this.searchoptions.custom_value.call(l,g.children(".customelement:first"),"get"):g.val())||"nu"===m||"nn"===m){w[p]=v,r[p]=m,x++}else{try{delete l.p.postData[p]}catch(f){}}});var s=0<x?!0:!1;if(!0===a.stringResult||"local"===l.p.datatype){var q='{"groupOp":"'+a.groupOp+'","rules":[',t=0;b.each(w,function(g,f){0<t&&(q+=",");q+='{"field":"'+g+'",';q+='"op":"'+r[g]+'",';q+='"data":"'+(f+"").replace(/\\/g,"\\\\").replace(/\"/g,'\\"')+'"}';t++});q+="]}";b.extend(l.p.postData,{filters:q});b.each(["searchField","searchString","searchOper"],function(g,f){l.p.postData.hasOwnProperty(f)&&delete l.p.postData[f]})}else{b.extend(l.p.postData,w)}var u;l.p.searchurl&&(u=l.p.url,b(l).jqGrid("setGridParam",{url:l.p.searchurl}));var c="stop"===b(l).triggerHandler("jqGridToolbarBeforeSearch")?!0:!1;!c&&b.isFunction(a.beforeSearch)&&(c=a.beforeSearch.call(l));c||b(l).jqGrid("setGridParam",{search:s}).trigger("reloadGrid",[{page:1}]);u&&b(l).jqGrid("setGridParam",{url:u});b(l).triggerHandler("jqGridToolbarAfterSearch");b.isFunction(a.afterSearch)&&a.afterSearch.call(l)},i=function(p,q,g){b("#sopt_menu").remove();var q=parseInt(q,10),g=parseInt(g,10)+18,q='<ul id="sopt_menu" class="ui-search-menu" role="menu" tabindex="0" style="font-size:'+(b(".ui-jqgrid-view").css("font-size")||"11px")+";left:"+q+"px;top:"+g+'px;">',g=b(p).attr("soper"),c,o=[],r,m=0,f=b(p).attr("colname");for(c=l.p.colModel.length;m<c&&l.p.colModel[m].name!==f;){m++}m=l.p.colModel[m];f=b.extend({},m.searchoptions);f.sopt||(f.sopt=[],f.sopt[0]="select"===m.stype?"eq":a.defaultSearch);b.each(a.odata,function(){o.push(this.oper)});for(m=0;m<f.sopt.length;m++){r=b.inArray(f.sopt[m],o),-1!==r&&(c=g===a.odata[r].oper?"ui-state-highlight":"",q+='<li class="ui-menu-item '+c+'" role="presentation"><a class="ui-corner-all g-menu-item" tabindex="0" role="menuitem" value="'+a.odata[r].oper+'" oper="'+a.operands[a.odata[r].oper]+'"><table cellspacing="0" cellpadding="0" border="0"><tr><td width="25px">'+a.operands[a.odata[r].oper]+"</td><td>"+a.odata[r].text+"</td></tr></table></a></li>")}b("body").append(q+"</ul>");b("#sopt_menu").addClass("ui-menu ui-widget ui-widget-content ui-corner-all");b("#sopt_menu > li > a").hover(function(){b(this).addClass("ui-state-hover")},function(){b(this).removeClass("ui-state-hover")}).click(function(){var j=b(this).attr("value"),h=b(this).attr("oper");b(l).triggerHandler("jqGridToolbarSelectOper",[j,h,p]);b("#sopt_menu").hide();b(p).text(h).attr("soper",j);if(a.autosearch===true){h=b(p).parent().next().children()[0];(b(h).val()||j==="nu"||j==="nn")&&k()}})},d=b("<tr class='ui-search-toolbar' role='rowheader'></tr>"),e;b.each(l.p.colModel,function(){var z=this,A,y;y="";var v="=",D,j=b("<th role='columnheader' class='ui-state-default ui-th-column ui-th-"+l.p.direction+"'></th>"),x=b("<div style='position:relative;height:100%;padding-right:0.3em;padding-left:0.3em;'></div>"),w=b("<table class='ui-search-table' cellspacing='0'><tr><td class='ui-search-oper'></td><td class='ui-search-input'></td></tr></table>");!0===this.hidden&&b(j).css("display","none");this.search=!1===this.search?!1:!0;void 0===this.stype&&(this.stype="text");A=b.extend({},this.searchoptions||{});if(this.search){if(a.searchOperators){y=A.sopt?A.sopt[0]:"select"===z.stype?"eq":a.defaultSearch;for(D=0;D<a.odata.length;D++){if(a.odata[D].oper===y){v=a.operands[y]||"";break}}y="<a title='"+(null!=A.searchtitle?A.searchtitle:a.operandTitle)+"' style='padding-right: 0.5em;' soper='"+y+"' class='soptclass' colname='"+this.name+"'>"+v+"</a>"}b("td:eq(0)",w).append(y);switch(this.stype){case"select":if(y=this.surl||A.dataUrl){b.ajax(b.extend({url:y,dataType:"html",success:function(m){if(A.buildSelect!==void 0){if(m=A.buildSelect(m)){b("td:eq(1)",w).append(m);b(x).append(w)}}else{b("td:eq(1)",w).append(m);b(x).append(w)}A.defaultValue!==void 0&&b("select",x).val(A.defaultValue);b("select",x).attr({name:z.index||z.name,id:"gs_"+z.name});A.attr&&b("select",x).attr(A.attr);b("select",x).css({width:"100%"});b.jgrid.bindEv.call(l,b("select",x)[0],A);a.autosearch===true&&b("select",x).change(function(){k();return false});m=null}},b.jgrid.ajaxOptions,l.p.ajaxSelectOptions||{}))}else{var p,c,h;z.searchoptions?(p=void 0===z.searchoptions.value?"":z.searchoptions.value,c=void 0===z.searchoptions.separator?":":z.searchoptions.separator,h=void 0===z.searchoptions.delimiter?";":z.searchoptions.delimiter):z.editoptions&&(p=void 0===z.editoptions.value?"":z.editoptions.value,c=void 0===z.editoptions.separator?":":z.editoptions.separator,h=void 0===z.editoptions.delimiter?";":z.editoptions.delimiter);if(p){v=document.createElement("select");v.style.width="100%";b(v).attr({name:z.index||z.name,id:"gs_"+z.name});var f;if("string"===typeof p){y=p.split(h);for(f=0;f<y.length;f++){p=y[f].split(c),h=document.createElement("option"),h.value=p[0],h.innerHTML=p[1],v.appendChild(h)}}else{if("object"===typeof p){for(f in p){p.hasOwnProperty(f)&&(h=document.createElement("option"),h.value=f,h.innerHTML=p[f],v.appendChild(h))}}}void 0!==A.defaultValue&&b(v).val(A.defaultValue);A.attr&&b(v).attr(A.attr);b.jgrid.bindEv.call(l,v,A);b("td:eq(1)",w).append(v);b(x).append(w);!0===a.autosearch&&b(v).change(function(){k();return false})}}break;case"text":c=void 0!==A.defaultValue?A.defaultValue:"";b("td:eq(1)",w).append("<input type='text' style='width:100%;padding:0px;' name='"+(z.index||z.name)+"' id='gs_"+z.name+"' value='"+c+"'/>");b(x).append(w);A.attr&&b("input",x).attr(A.attr);b.jgrid.bindEv.call(l,b("input",x)[0],A);!0===a.autosearch&&(a.searchOnEnter?b("input",x).keypress(function(g){if((g.charCode||g.keyCode||0)===13){k();return false}return this}):b("input",x).keydown(function(g){switch(g.which){case 13:return false;case 9:case 16:case 37:case 38:case 39:case 40:case 27:break;default:e&&clearTimeout(e);e=setTimeout(function(){k()},500)}}));break;case"custom":b("td:eq(1)",w).append("<span style='width:95%;padding:0px;' name='"+(z.index||z.name)+"' id='gs_"+z.name+"'/>");b(x).append(w);try{if(b.isFunction(A.custom_element)){var B=A.custom_element.call(l,void 0!==A.defaultValue?A.defaultValue:"",A);if(B){B=b(B).addClass("customelement"),b(x).find(">span").append(B)}else{throw"e2"}}else{throw"e1"}}catch(C){"e1"===C&&b.jgrid.info_dialog(b.jgrid.errors.errcap,"function 'custom_element' "+b.jgrid.edit.msg.nodefined,b.jgrid.edit.bClose),"e2"===C?b.jgrid.info_dialog(b.jgrid.errors.errcap,"function 'custom_element' "+b.jgrid.edit.msg.novalue,b.jgrid.edit.bClose):b.jgrid.info_dialog(b.jgrid.errors.errcap,"string"===typeof C?C:C.message,b.jgrid.edit.bClose)}}}b(j).append(x);b(d).append(j);a.searchOperators||b("td:eq(0)",w).hide()});b("table thead",l.grid.hDiv).append(d);a.searchOperators&&(b(".soptclass").click(function(f){var g=b(this).offset();i(this,g.left,g.top);f.stopPropagation()}),b("body").on("click",function(c){"soptclass"!==c.target.className&&b("#sopt_menu").hide()}));this.ftoolbar=!0;this.triggerToolbar=k;this.clearToolbar=function(t){var u={},s=0,r,t=typeof t!=="boolean"?true:t;b.each(l.p.colModel,function(){var f,m=b("#gs_"+b.jgrid.jqID(this.name),this.frozen===true&&l.p.frozenColumns===true?l.grid.fhDiv:l.grid.hDiv);if(this.searchoptions&&this.searchoptions.defaultValue!==void 0){f=this.searchoptions.defaultValue}r=this.index||this.name;switch(this.stype){case"select":m.find("option").each(function(h){if(h===0){this.selected=true}if(b(this).val()===f){this.selected=true;return false}});if(f!==void 0){u[r]=f;s++}else{try{delete l.p.postData[r]}catch(g){}}break;case"text":m.val(f);if(f!==void 0){u[r]=f;s++}else{try{delete l.p.postData[r]}catch(j){}}break;case"custom":b.isFunction(this.searchoptions.custom_value)&&m.length>0&&m[0].nodeName.toUpperCase()==="SPAN"&&this.searchoptions.custom_value.call(l,m.children(".customelement:first"),"set",f)}});var o=s>0?true:false;if(a.stringResult===true||l.p.datatype==="local"){var q='{"groupOp":"'+a.groupOp+'","rules":[',p=0;b.each(u,function(g,f){p>0&&(q=q+",");q=q+('{"field":"'+g+'",');q=q+'"op":"eq",';q=q+('"data":"'+(f+"").replace(/\\/g,"\\\\").replace(/\"/g,'\\"')+'"}');p++});q=q+"]}";b.extend(l.p.postData,{filters:q});b.each(["searchField","searchString","searchOper"],function(g,f){l.p.postData.hasOwnProperty(f)&&delete l.p.postData[f]})}else{b.extend(l.p.postData,u)}var n;if(l.p.searchurl){n=l.p.url;b(l).jqGrid("setGridParam",{url:l.p.searchurl})}var c=b(l).triggerHandler("jqGridToolbarBeforeClear")==="stop"?true:false;!c&&b.isFunction(a.beforeClear)&&(c=a.beforeClear.call(l));c||t&&b(l).jqGrid("setGridParam",{search:o}).trigger("reloadGrid",[{page:1}]);n&&b(l).jqGrid("setGridParam",{url:n});b(l).triggerHandler("jqGridToolbarAfterClear");b.isFunction(a.afterClear)&&a.afterClear()};this.toggleToolbar=function(){var c=b("tr.ui-search-toolbar",l.grid.hDiv),f=l.p.frozenColumns===true?b("tr.ui-search-toolbar",l.grid.fhDiv):false;if(c.css("display")==="none"){c.show();f&&f.show()}else{c.hide();f&&f.hide()}}}})},destroyFilterToolbar:function(){return this.each(function(){this.ftoolbar&&(this.toggleToolbar=this.clearToolbar=this.triggerToolbar=null,this.ftoolbar=!1,b(this.grid.hDiv).find("table thead tr.ui-search-toolbar").remove())})},destroyGroupHeader:function(a){void 0===a&&(a=!0);return this.each(function(){var t,q,o,m,n,r;q=this.grid;var s=b("table.ui-jqgrid-htable thead",q.hDiv),i=this.p.colModel;if(q){b(this).unbind(".setGroupHeaders");t=b("<tr>",{role:"rowheader"}).addClass("ui-jqgrid-labels");m=q.headers;q=0;for(o=m.length;q<o;q++){n=i[q].hidden?"none":"";n=b(m[q].el).width(m[q].width).css("display",n);try{n.removeAttr("rowSpan")}catch(k){n.attr("rowSpan",1)}t.append(n);r=n.children("span.ui-jqgrid-resize");0<r.length&&(r[0].style.height="");n.children("div")[0].style.top=""}b(s).children("tr.ui-jqgrid-labels").remove();b(s).prepend(t);!0===a&&b(this).jqGrid("setGridParam",{groupHeader:null})}})},setGroupHeaders:function(a){a=b.extend({useColSpanStyle:!1,groupHeaders:[]},a||{});return this.each(function(){this.p.groupHeader=a;var G,D,C=0,z,B,E,F,t,x=this.p.colModel,H=x.length,v=this.grid.headers,A=b("table.ui-jqgrid-htable",this.grid.hDiv),y=A.children("thead").children("tr.ui-jqgrid-labels:last").addClass("jqg-second-row-header");z=A.children("thead");var w=A.find(".jqg-first-row-header");void 0===w[0]?w=b("<tr>",{role:"row","aria-hidden":"true"}).addClass("jqg-first-row-header").css("height","auto"):w.empty();var q,u=function(f,e){var h=e.length,g;for(g=0;g<h;g++){if(e[g].startColumnName===f){return g}}return -1};b(this).prepend(z);z=b("<tr>",{role:"rowheader"}).addClass("ui-jqgrid-labels jqg-third-row-header");for(G=0;G<H;G++){if(E=v[G].el,F=b(E),D=x[G],B={height:"0px",width:v[G].width+"px",display:D.hidden?"none":""},b("<th>",{role:"gridcell"}).css(B).addClass("ui-first-th-"+this.p.direction).appendTo(w),E.style.width="",B=u(D.name,a.groupHeaders),0<=B){B=a.groupHeaders[B];C=B.numberOfColumns;t=B.titleText;for(B=D=0;B<C&&G+B<H;B++){x[G+B].hidden||D++}B=b("<th>").attr({role:"columnheader"}).addClass("ui-state-default ui-th-column-header ui-th-"+this.p.direction).css({height:"22px","border-top":"0px none"}).html(t);0<D&&B.attr("colspan",""+D);this.p.headertitles&&B.attr("title",B.text());0===D&&B.hide();F.before(B);z.append(E);C-=1}else{0===C?a.useColSpanStyle?F.attr("rowspan","2"):(b("<th>",{role:"columnheader"}).addClass("ui-state-default ui-th-column-header ui-th-"+this.p.direction).css({display:D.hidden?"none":"","border-top":"0px none"}).insertBefore(F),z.append(E)):(z.append(E),C--)}}x=b(this).children("thead");x.prepend(w);z.insertAfter(y);A.append(x);a.useColSpanStyle&&(A.find("span.ui-jqgrid-resize").each(function(){var c=b(this).parent();c.is(":visible")&&(this.style.cssText="height: "+c.height()+"px !important; cursor: col-resize;")}),A.find("div.ui-jqgrid-sortable").each(function(){var d=b(this),e=d.parent();e.is(":visible")&&e.is(":has(span.ui-jqgrid-resize)")&&d.css("top",(e.height()-d.outerHeight())/2+"px")}));q=x.find("tr.jqg-first-row-header");b(this).bind("jqGridResizeStop.setGroupHeaders",function(e,d,f){q.find("th").eq(f).width(d)})})},setFrozenColumns:function(){return this.each(function(){if(this.grid){var t=this,s=t.p.colModel,o=0,n=s.length,k=-1,m=!1;if(!(!0===t.p.subGrid||!0===t.p.treeGrid||!0===t.p.cellEdit||t.p.sortable||t.p.scroll||t.p.grouping)){t.p.rownumbers&&o++;for(t.p.multiselect&&o++;o<n;){if(!0===s[o].frozen){m=!0,k=o}else{break}o++}if(0<=k&&m){s=t.p.caption?b(t.grid.cDiv).outerHeight():0;o=b(".ui-jqgrid-htable","#gview_"+b.jgrid.jqID(t.p.id)).height();t.p.toppager&&(s+=b(t.grid.topDiv).outerHeight());!0===t.p.toolbar[0]&&"bottom"!==t.p.toolbar[1]&&(s+=b(t.grid.uDiv).outerHeight());t.grid.fhDiv=b('<div style="position:absolute;left:0px;top:'+s+"px;height:"+o+'px;" class="frozen-div ui-state-default ui-jqgrid-hdiv"></div>');t.grid.fbDiv=b('<div style="position:absolute;left:0px;top:'+(parseInt(s,10)+parseInt(o,10)+1)+'px;overflow-y:hidden" class="frozen-bdiv ui-jqgrid-bdiv"></div>');b("#gview_"+b.jgrid.jqID(t.p.id)).append(t.grid.fhDiv);s=b(".ui-jqgrid-htable","#gview_"+b.jgrid.jqID(t.p.id)).clone(!0);if(t.p.groupHeader){b("tr.jqg-first-row-header, tr.jqg-third-row-header",s).each(function(){b("th:gt("+k+")",this).remove()});var q=-1,r=-1,a,i;b("tr.jqg-second-row-header th",s).each(function(){a=parseInt(b(this).attr("colspan"),10);if(i=parseInt(b(this).attr("rowspan"),10)){q++,r++}a&&(q+=a,r++);if(q===k){return !1}});q!==k&&(r=k);b("tr.jqg-second-row-header",s).each(function(){b("th:gt("+r+")",this).remove()})}else{b("tr",s).each(function(){b("th:gt("+k+")",this).remove()})}b(s).width(1);b(t.grid.fhDiv).append(s).mousemove(function(c){if(t.grid.resizing){return t.grid.dragMove(c),!1}});b(t).bind("jqGridResizeStop.setFrozenColumns",function(h,g,f){h=b(".ui-jqgrid-htable",t.grid.fhDiv);b("th:eq("+f+")",h).width(g);h=b(".ui-jqgrid-btable",t.grid.fbDiv);b("tr:first td:eq("+f+")",h).width(g)});b(t).bind("jqGridOnSortCol.setFrozenColumns",function(h,g,f){h=b("tr.ui-jqgrid-labels:last th:eq("+t.p.lastsort+")",t.grid.fhDiv);g=b("tr.ui-jqgrid-labels:last th:eq("+f+")",t.grid.fhDiv);b("span.ui-grid-ico-sort",h).addClass("ui-state-disabled");b(h).attr("aria-selected","false");b("span.ui-icon-"+t.p.sortorder,g).removeClass("ui-state-disabled");b(g).attr("aria-selected","true");!t.p.viewsortcols[0]&&t.p.lastsort!==f&&(b("span.s-ico",h).hide(),b("span.s-ico",g).show())});b("#gview_"+b.jgrid.jqID(t.p.id)).append(t.grid.fbDiv);b(t.grid.bDiv).scroll(function(){b(t.grid.fbDiv).scrollTop(b(this).scrollTop())});!0===t.p.hoverrows&&b("#"+b.jgrid.jqID(t.p.id)).unbind("mouseover").unbind("mouseout");b(t).bind("jqGridAfterGridComplete.setFrozenColumns",function(){b("#"+b.jgrid.jqID(t.p.id)+"_frozen").remove();b(t.grid.fbDiv).height(b(t.grid.bDiv).height()-16);var d=b("#"+b.jgrid.jqID(t.p.id)).clone(!0);b("tr",d).each(function(){b("td:gt("+k+")",this).remove()});b(d).width(1).attr("id",t.p.id+"_frozen");b(t.grid.fbDiv).append(d);!0===t.p.hoverrows&&(b("tr.jqgrow",d).hover(function(){b(this).addClass("ui-state-hover");b("#"+b.jgrid.jqID(this.id),"#"+b.jgrid.jqID(t.p.id)).addClass("ui-state-hover")},function(){b(this).removeClass("ui-state-hover");b("#"+b.jgrid.jqID(this.id),"#"+b.jgrid.jqID(t.p.id)).removeClass("ui-state-hover")}),b("tr.jqgrow","#"+b.jgrid.jqID(t.p.id)).hover(function(){b(this).addClass("ui-state-hover");b("#"+b.jgrid.jqID(this.id),"#"+b.jgrid.jqID(t.p.id)+"_frozen").addClass("ui-state-hover")},function(){b(this).removeClass("ui-state-hover");b("#"+b.jgrid.jqID(this.id),"#"+b.jgrid.jqID(t.p.id)+"_frozen").removeClass("ui-state-hover")}));d=null});t.p.frozenColumns=!0}}}})},destroyFrozenColumns:function(){return this.each(function(){if(this.grid&&!0===this.p.frozenColumns){b(this.grid.fhDiv).remove();b(this.grid.fbDiv).remove();this.grid.fhDiv=null;this.grid.fbDiv=null;b(this).unbind(".setFrozenColumns");if(!0===this.p.hoverrows){var a;b("#"+b.jgrid.jqID(this.p.id)).bind("mouseover",function(d){a=b(d.target).closest("tr.jqgrow");"ui-subgrid"!==b(a).attr("class")&&b(a).addClass("ui-state-hover")}).bind("mouseout",function(d){a=b(d.target).closest("tr.jqgrow");b(a).removeClass("ui-state-hover")})}this.p.frozenColumns=!1}})}})})(jQuery);(function(b){b.extend(b.jgrid,{showModal:function(c){c.w.show()},closeModal:function(c){c.w.hide().attr("aria-hidden","true");c.o&&c.o.remove()},hideModal:function(f,a){a=b.extend({jqm:!0,gb:""},a||{});if(a.onClose){var h=a.gb&&"string"===typeof a.gb&&"#gbox_"===a.gb.substr(0,6)?a.onClose.call(b("#"+a.gb.substr(6))[0],f):a.onClose(f);if("boolean"===typeof h&&!h){return}}if(b.fn.jqm&&!0===a.jqm){b(f).attr("aria-hidden","true").jqmHide()}else{if(""!==a.gb){try{b(".jqgrid-overlay:first",a.gb).hide()}catch(e){}}b(f).hide().attr("aria-hidden","true")}},findPos:function(e){var d=0,f=0;if(e.offsetParent){do{d+=e.offsetLeft,f+=e.offsetTop}while(e=e.offsetParent)}return[d,f]},createModal:function(B,D,C,y,A,x,z){var C=b.extend(!0,{},b.jgrid.jqModal||{},C),w=document.createElement("div"),v,r=this,z=b.extend({},z||{});v="rtl"===b(C.gbox).attr("dir")?!0:!1;w.className="ui-widget ui-widget-content ui-corner-all ui-jqdialog";w.id=B.themodal;var u=document.createElement("div");u.className="ui-jqdialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix";u.id=B.modalhead;b(u).append("<span class='ui-jqdialog-title'>"+C.caption+"</span>");var t=b("<a href='javascript:void(0)' class='ui-jqdialog-titlebar-close ui-corner-all'></a>").hover(function(){t.addClass("ui-state-hover")},function(){t.removeClass("ui-state-hover")}).append("<span class='ui-icon ui-icon-closethick'></span>");b(u).append(t);v?(w.dir="rtl",b(".ui-jqdialog-title",u).css("float","right"),b(".ui-jqdialog-titlebar-close",u).css("left","0.3em")):(w.dir="ltr",b(".ui-jqdialog-title",u).css("float","left"),b(".ui-jqdialog-titlebar-close",u).css("right","0.3em"));var s=document.createElement("div");b(s).addClass("ui-jqdialog-content ui-widget-content").attr("id",B.modalcontent);b(s).append(D);w.appendChild(s);b(w).prepend(u);!0===x?b("body").append(w):"string"===typeof x?b(x).append(w):b(w).insertBefore(y);b(w).css(z);void 0===C.jqModal&&(C.jqModal=!0);D={};if(b.fn.jqm&&!0===C.jqModal){0===C.left&&0===C.top&&C.overlay&&(z=[],z=b.jgrid.findPos(A),C.left=z[0]+4,C.top=z[1]+4),D.top=C.top+"px",D.left=C.left}else{if(0!==C.left||0!==C.top){D.left=C.left,D.top=C.top+"px"}}b("a.ui-jqdialog-titlebar-close",u).click(function(){var c=b("#"+b.jgrid.jqID(B.themodal)).data("onClose")||C.onClose,d=b("#"+b.jgrid.jqID(B.themodal)).data("gbox")||C.gbox;r.hideModal("#"+b.jgrid.jqID(B.themodal),{gb:d,jqm:C.jqModal,onClose:c});return false});if(0===C.width||!C.width){C.width=300}if(0===C.height||!C.height){C.height=200}C.zIndex||(y=b(y).parents("*[role=dialog]").filter(":first").css("z-index"),C.zIndex=y?parseInt(y,10)+2:950);y=0;v&&D.left&&!x&&(y=b(C.gbox).width()-(!isNaN(C.width)?parseInt(C.width,10):0)-8,D.left=parseInt(D.left,10)+parseInt(y,10));D.left&&(D.left+="px");b(w).css(b.extend({width:isNaN(C.width)?"auto":C.width+"px",height:isNaN(C.height)?"auto":C.height+"px",zIndex:C.zIndex,overflow:"hidden"},D)).attr({tabIndex:"-1",role:"dialog","aria-labelledby":B.modalhead,"aria-hidden":"true"});void 0===C.drag&&(C.drag=!0);void 0===C.resize&&(C.resize=!0);if(C.drag){if(b(u).css("cursor","move"),b.fn.jqDrag){b(w).jqDrag(u)}else{try{b(w).draggable({handle:b("#"+b.jgrid.jqID(u.id))})}catch(q){}}}if(C.resize){if(b.fn.jqResize){b(w).append("<div class='jqResize ui-resizable-handle ui-resizable-se ui-icon ui-icon-gripsmall-diagonal-se'></div>"),b("#"+b.jgrid.jqID(B.themodal)).jqResize(".jqResize",B.scrollelm?"#"+b.jgrid.jqID(B.scrollelm):!1)}else{try{b(w).resizable({handles:"se, sw",alsoResize:B.scrollelm?"#"+b.jgrid.jqID(B.scrollelm):!1})}catch(a){}}}!0===C.closeOnEscape&&b(w).keydown(function(c){if(c.which==27){c=b("#"+b.jgrid.jqID(B.themodal)).data("onClose")||C.onClose;r.hideModal("#"+b.jgrid.jqID(B.themodal),{gb:C.gbox,jqm:C.jqModal,onClose:c})}})},viewModal:function(e,a){a=b.extend({toTop:!0,overlay:10,modal:!1,overlayClass:"ui-widget-overlay",onShow:b.jgrid.showModal,onHide:b.jgrid.closeModal,gbox:"",jqm:!0,jqM:!0},a||{});if(b.fn.jqm&&!0===a.jqm){a.jqM?b(e).attr("aria-hidden","false").jqm(a).jqmShow():b(e).attr("aria-hidden","false").jqmShow()}else{""!==a.gbox&&(b(".jqgrid-overlay:first",a.gbox).show(),b(e).data("gbox",a.gbox));b(e).show().attr("aria-hidden","false");try{b(":input:visible",e)[0].focus()}catch(f){}}},info_dialog:function(p,r,q,m){var o={width:290,height:"auto",dataheight:"auto",drag:!0,resize:!1,left:250,top:170,zIndex:1000,jqModal:!0,modal:!1,closeOnEscape:!0,align:"center",buttonalign:"center",buttons:[]};b.extend(!0,o,b.jgrid.jqModal||{},{caption:"<b>"+p+"</b>"},m||{});var l=o.jqModal,n=this;b.fn.jqm&&!l&&(l=!1);p="";if(0<o.buttons.length){for(m=0;m<o.buttons.length;m++){void 0===o.buttons[m].id&&(o.buttons[m].id="info_button_"+m),p+="<a href='javascript:void(0)' id='"+o.buttons[m].id+"' class='fm-button ui-state-default ui-corner-all'>"+o.buttons[m].text+"</a>"}}m=isNaN(o.dataheight)?o.dataheight:o.dataheight+"px";r="<div id='info_id'>"+("<div id='infocnt' style='margin:0px;padding-bottom:1em;width:100%;overflow:auto;position:relative;height:"+m+";"+("text-align:"+o.align+";")+"'>"+r+"</div>");r+=q?"<div class='ui-widget-content ui-helper-clearfix' style='text-align:"+o.buttonalign+";padding-bottom:0.8em;padding-top:0.5em;background-image: none;border-width: 1px 0 0 0;'><a href='javascript:void(0)' id='closedialog' class='fm-button ui-state-default ui-corner-all'>"+q+"</a>"+p+"</div>":""!==p?"<div class='ui-widget-content ui-helper-clearfix' style='text-align:"+o.buttonalign+";padding-bottom:0.8em;padding-top:0.5em;background-image: none;border-width: 1px 0 0 0;'>"+p+"</div>":"";r+="</div>";try{"false"===b("#info_dialog").attr("aria-hidden")&&b.jgrid.hideModal("#info_dialog",{jqm:l}),b("#info_dialog").remove()}catch(k){}b.jgrid.createModal({themodal:"info_dialog",modalhead:"info_head",modalcontent:"info_content",scrollelm:"infocnt"},r,o,"","",!0);p&&b.each(o.buttons,function(c){b("#"+b.jgrid.jqID(this.id),"#info_id").bind("click",function(){o.buttons[c].onClick.call(b("#info_dialog"));return !1})});b("#closedialog","#info_id").click(function(){n.hideModal("#info_dialog",{jqm:l,onClose:b("#info_dialog").data("onClose")||o.onClose,gb:b("#info_dialog").data("gbox")||o.gbox});return !1});b(".fm-button","#info_dialog").hover(function(){b(this).addClass("ui-state-hover")},function(){b(this).removeClass("ui-state-hover")});b.isFunction(o.beforeOpen)&&o.beforeOpen();b.jgrid.viewModal("#info_dialog",{onHide:function(c){c.w.hide().remove();c.o&&c.o.remove()},modal:o.modal,jqm:l});b.isFunction(o.afterOpen)&&o.afterOpen();try{b("#info_dialog").focus()}catch(a){}},bindEv:function(c,a){b.isFunction(a.dataInit)&&a.dataInit.call(this,c);a.dataEvents&&b.each(a.dataEvents,function(){void 0!==this.data?b(c).bind(this.type,this.data,this.fn):b(c).bind(this.type,this.fn)})},createEl:function(x,z,y,u,w){function t(h,f,i){var g="dataInit,dataEvents,dataUrl,buildSelect,sopt,searchhidden,defaultValue,attr,custom_element,custom_value".split(",");void 0!==i&&b.isArray(i)&&b.merge(g,i);b.each(f,function(d,e){-1===b.inArray(d,g)&&b(h).attr(d,e)});f.hasOwnProperty("id")||b(h).attr("id",b.jgrid.randId())}var v="",s=this;switch(x){case"textarea":v=document.createElement("textarea");u?z.cols||b(v).css({width:"98%"}):z.cols||(z.cols=20);z.rows||(z.rows=2);if("&nbsp;"===y||"&#160;"===y||1===y.length&&160===y.charCodeAt(0)){y=""}v.value=y;t(v,z);b(v).attr({role:"textbox",multiline:"true"});break;case"checkbox":v=document.createElement("input");v.type="checkbox";z.value?(x=z.value.split(":"),y===x[0]&&(v.checked=!0,v.defaultChecked=!0),v.value=x[0],b(v).attr("offval",x[1])):(x=y.toLowerCase(),0>x.search(/(false|f|0|no|n|off|undefined)/i)&&""!==x?(v.checked=!0,v.defaultChecked=!0,v.value=y):v.value="on",b(v).attr("offval","off"));t(v,z,["value"]);b(v).attr("role","checkbox");break;case"select":v=document.createElement("select");v.setAttribute("role","select");u=[];!0===z.multiple?(x=!0,v.multiple="multiple",b(v).attr("aria-multiselectable","true")):x=!1;if(void 0!==z.dataUrl){x=z.name?(""+z.id).substring(0,(""+z.id).length-(""+z.name).length-1):""+z.id,u=z.postData||w.postData,s.p&&s.p.idPrefix?x=b.jgrid.stripPref(s.p.idPrefix,x):u=void 0,b.ajax(b.extend({url:z.dataUrl,type:"GET",dataType:"html",data:b.isFunction(u)?u.call(s,x,y,""+z.name):u,context:{elem:v,options:z,vl:y},success:function(l){var h=[],m=this.elem,k=this.vl,j=b.extend({},this.options),i=j.multiple===true,l=b.isFunction(j.buildSelect)?j.buildSelect.call(s,l):l;typeof l==="string"&&(l=b(b.trim(l)).html());if(l){b(m).append(l);t(m,j);if(j.size===void 0){j.size=i?3:1}if(i){h=k.split(",");h=b.map(h,function(c){return b.trim(c)})}else{h[0]=b.trim(k)}setTimeout(function(){b("option",m).each(function(c){if(c===0&&m.multiple){this.selected=false}b(this).attr("role","option");if(b.inArray(b.trim(b(this).text()),h)>-1||b.inArray(b.trim(b(this).val()),h)>-1){this.selected="selected"}})},0)}}},w||{}))}else{if(z.value){var r;void 0===z.size&&(z.size=x?3:1);x&&(u=y.split(","),u=b.map(u,function(c){return b.trim(c)}));"function"===typeof z.value&&(z.value=z.value());var a,q,p=void 0===z.separator?":":z.separator,w=void 0===z.delimiter?";":z.delimiter;if("string"===typeof z.value){a=z.value.split(w);for(r=0;r<a.length;r++){q=a[r].split(p);2<q.length&&(q[1]=b.map(q,function(c,e){if(e>0){return c}}).join(p));w=document.createElement("option");w.setAttribute("role","option");w.value=q[0];w.innerHTML=q[1];v.appendChild(w);if(!x&&(b.trim(q[0])===b.trim(y)||b.trim(q[1])===b.trim(y))){w.selected="selected"}if(x&&(-1<b.inArray(b.trim(q[1]),u)||-1<b.inArray(b.trim(q[0]),u))){w.selected="selected"}}}else{if("object"===typeof z.value){for(r in p=z.value,p){if(p.hasOwnProperty(r)){w=document.createElement("option");w.setAttribute("role","option");w.value=r;w.innerHTML=p[r];v.appendChild(w);if(!x&&(b.trim(r)===b.trim(y)||b.trim(p[r])===b.trim(y))){w.selected="selected"}if(x&&(-1<b.inArray(b.trim(p[r]),u)||-1<b.inArray(b.trim(r),u))){w.selected="selected"}}}}}t(v,z,["value"])}}break;case"text":case"password":case"button":r="button"===x?"button":"textbox";v=document.createElement("input");v.type=x;v.value=y;t(v,z);"button"!==x&&(u?z.size||b(v).css({width:"98%"}):z.size||(z.size=20));b(v).attr("role",r);break;case"image":case"file":v=document.createElement("input");v.type=x;t(v,z);break;case"custom":v=document.createElement("span");try{if(b.isFunction(z.custom_element)){if(p=z.custom_element.call(s,y,z)){p=b(p).addClass("customelement").attr({id:z.id,name:z.name}),b(v).empty().append(p)}else{throw"e2"}}else{throw"e1"}}catch(o){"e1"===o&&b.jgrid.info_dialog(b.jgrid.errors.errcap,"function 'custom_element' "+b.jgrid.edit.msg.nodefined,b.jgrid.edit.bClose),"e2"===o?b.jgrid.info_dialog(b.jgrid.errors.errcap,"function 'custom_element' "+b.jgrid.edit.msg.novalue,b.jgrid.edit.bClose):b.jgrid.info_dialog(b.jgrid.errors.errcap,"string"===typeof o?o:o.message,b.jgrid.edit.bClose)}}return v},checkDate:function(r,q){var p={},m,r=r.toLowerCase();m=-1!==r.indexOf("/")?"/":-1!==r.indexOf("-")?"-":-1!==r.indexOf(".")?".":"/";r=r.split(m);q=q.split(m);if(3!==q.length){return !1}m=-1;var o,l=-1,n=-1,k;for(k=0;k<r.length;k++){o=isNaN(q[k])?0:parseInt(q[k],10),p[r[k]]=o,o=r[k],-1!==o.indexOf("y")&&(m=k),-1!==o.indexOf("m")&&(n=k),-1!==o.indexOf("d")&&(l=k)}o="y"===r[m]||"yyyy"===r[m]?4:"yy"===r[m]?2:-1;k=[0,31,29,31,30,31,30,31,31,30,31,30,31];var d;if(-1===m){return !1}d=p[r[m]].toString();2===o&&1===d.length&&(o=1);if(d.length!==o||0===p[r[m]]&&"00"!==q[m]||-1===n){return !1}d=p[r[n]].toString();if(1>d.length||1>p[r[n]]||12<p[r[n]]||-1===l){return !1}d=p[r[l]].toString();return 1>d.length||1>p[r[l]]||31<p[r[l]]||2===p[r[n]]&&p[r[l]]>(0===p[r[m]]%4&&(0!==p[r[m]]%100||0===p[r[m]]%400)?29:28)||p[r[l]]>k[p[r[n]]]?!1:!0},isEmpty:function(c){return c.match(/^\s+$/)||""===c?!0:!1},checkTime:function(c){var a=/^(\d{1,2}):(\d{2})([apAP][Mm])?$/;if(!b.jgrid.isEmpty(c)){if(c=c.match(a)){if(c[3]){if(1>c[1]||12<c[1]){return !1}}else{if(23<c[1]){return !1}}if(59<c[2]){return !1}}else{return !1}}return !0},checkValues:function(m,a,n,j){var l,i,k;k=this.p.colModel;if(void 0===n){if("string"===typeof a){n=0;for(j=k.length;n<j;n++){if(k[n].name===a){l=k[n].editrules;a=n;null!=k[n].formoptions&&(i=k[n].formoptions.label);break}}}else{0<=a&&(l=k[a].editrules)}}else{l=n,i=void 0===j?"_":j}if(l){i||(i=null!=this.p.colNames?this.p.colNames[a]:k[a].label);if(!0===l.required&&b.jgrid.isEmpty(m)){return[!1,i+": "+b.jgrid.edit.msg.required,""]}n=!1===l.required?!1:!0;if(!0===l.number&&!(!1===n&&b.jgrid.isEmpty(m))&&isNaN(m)){return[!1,i+": "+b.jgrid.edit.msg.number,""]}if(void 0!==l.minValue&&!isNaN(l.minValue)&&parseFloat(m)<parseFloat(l.minValue)){return[!1,i+": "+b.jgrid.edit.msg.minValue+" "+l.minValue,""]}if(void 0!==l.maxValue&&!isNaN(l.maxValue)&&parseFloat(m)>parseFloat(l.maxValue)){return[!1,i+": "+b.jgrid.edit.msg.maxValue+" "+l.maxValue,""]}if(!0===l.email&&!(!1===n&&b.jgrid.isEmpty(m))&&(j=/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i,!j.test(m))){return[!1,i+": "+b.jgrid.edit.msg.email,""]}if(!0===l.integer&&!(!1===n&&b.jgrid.isEmpty(m))&&(isNaN(m)||0!==m%1||-1!==m.indexOf("."))){return[!1,i+": "+b.jgrid.edit.msg.integer,""]}if(!0===l.date&&!(!1===n&&b.jgrid.isEmpty(m))&&(k[a].formatoptions&&k[a].formatoptions.newformat?(k=k[a].formatoptions.newformat,b.jgrid.formatter.date.masks.hasOwnProperty(k)&&(k=b.jgrid.formatter.date.masks[k])):k=k[a].datefmt||"Y-m-d",!b.jgrid.checkDate(k,m))){return[!1,i+": "+b.jgrid.edit.msg.date+" - "+k,""]}if(!0===l.time&&!(!1===n&&b.jgrid.isEmpty(m))&&!b.jgrid.checkTime(m)){return[!1,i+": "+b.jgrid.edit.msg.date+" - hh:mm (am/pm)",""]}if(!0===l.url&&!(!1===n&&b.jgrid.isEmpty(m))&&(j=/^(((https?)|(ftp)):\/\/([\-\w]+\.)+\w{2,3}(\/[%\-\w]+(\.\w{2,})?)*(([\w\-\.\?\\\/+@&#;`~=%!]*)(\.\w{2,})?)*\/?)/i,!j.test(m))){return[!1,i+": "+b.jgrid.edit.msg.url,""]}if(!0===l.custom&&!(!1===n&&b.jgrid.isEmpty(m))){return b.isFunction(l.custom_func)?(m=l.custom_func.call(this,m,i,a),b.isArray(m)?m:[!1,b.jgrid.edit.msg.customarray,""]):[!1,b.jgrid.edit.msg.customfcheck,""]}}return[!0,"",""]}})})(jQuery);(function(d){var c={};d.jgrid.extend({searchGrid:function(a){a=d.extend(!0,{recreateFilter:!1,drag:!0,sField:"searchField",sValue:"searchString",sOper:"searchOper",sFilter:"filters",loadDefaults:!0,beforeShowSearch:null,afterShowSearch:null,onInitializeSearch:null,afterRedraw:null,afterChange:null,closeAfterSearch:!1,closeAfterReset:!1,closeOnEscape:!1,searchOnEnter:!1,multipleSearch:!1,multipleGroup:!1,top:0,left:0,jqModal:!0,modal:!1,resize:!0,width:450,height:"auto",dataheight:"auto",showQuery:!1,errorcheck:!0,sopt:null,stringResult:void 0,onClose:null,onSearch:null,onReset:null,toTop:!0,overlay:30,columns:[],tmplNames:null,tmplFilters:null,tmplLabel:" Template: ",showOnLoad:!1,layer:null,operands:{eq:"=",ne:"<>",lt:"<",le:"<=",gt:">",ge:">=",bw:"LIKE",bn:"NOT LIKE","in":"IN",ni:"NOT IN",ew:"LIKE",en:"NOT LIKE",cn:"LIKE",nc:"NOT LIKE",nu:"IS NULL",nn:"ISNOT NULL"}},d.jgrid.search,a||{});return this.each(function(){function K(e){r=d(I).triggerHandler("jqGridFilterBeforeShow",[e]);void 0===r&&(r=!0);r&&d.isFunction(a.beforeShowSearch)&&(r=a.beforeShowSearch.call(I,e));r&&(d.jgrid.viewModal("#"+d.jgrid.jqID(l.themodal),{gbox:"#gbox_"+d.jgrid.jqID(E),jqm:a.jqModal,modal:a.modal,overlay:a.overlay,toTop:a.toTop}),d(I).triggerHandler("jqGridFilterAfterShow",[e]),d.isFunction(a.afterShowSearch)&&a.afterShowSearch.call(I,e))}var I=this;if(I.grid){var E="fbox_"+I.p.id,r=!0,l={themodal:"searchmod"+E,modalhead:"searchhd"+E,modalcontent:"searchcnt"+E,scrollelm:E},v=I.p.postData[a.sFilter];"string"===typeof v&&(v=d.jgrid.parse(v));!0===a.recreateFilter&&d("#"+d.jgrid.jqID(l.themodal)).remove();if(void 0!==d("#"+d.jgrid.jqID(l.themodal))[0]){K(d("#fbox_"+d.jgrid.jqID(+I.p.id)))}else{var C=d("<div><div id='"+E+"' class='searchFilter' style='overflow:auto'></div></div>").insertBefore("#gview_"+d.jgrid.jqID(I.p.id)),F="left",G="";"rtl"===I.p.direction&&(F="right",G=" style='text-align:left'",C.attr("dir","rtl"));var B=d.extend([],I.p.colModel),j="<a href='javascript:void(0)' id='"+E+"_search' class='fm-button ui-state-default ui-corner-all fm-button-icon-right ui-reset'><span class='ui-icon ui-icon-search'></span>"+a.Find+"</a>",J="<a href='javascript:void(0)' id='"+E+"_reset' class='fm-button ui-state-default ui-corner-all fm-button-icon-left ui-search'><span class='ui-icon ui-icon-arrowreturnthick-1-w'></span>"+a.Reset+"</a>",w="",H="",A,D=!1,z=-1;a.showQuery&&(w="<a href='javascript:void(0)' id='"+E+"_query' class='fm-button ui-state-default ui-corner-all fm-button-icon-left'><span class='ui-icon ui-icon-comment'></span>Query</a>");a.columns.length?(B=a.columns,z=0,A=B[0].index||B[0].name):d.each(B,function(f,e){if(!e.label){e.label=I.p.colNames[f]}if(!D){var h=e.search===void 0?true:e.search,g=e.hidden===true;if(e.searchoptions&&e.searchoptions.searchhidden===true&&h||h&&!g){D=true;A=e.index||e.name;z=f}}});if(!v&&A||!1===a.multipleSearch){var b="eq";0<=z&&B[z].searchoptions&&B[z].searchoptions.sopt?b=B[z].searchoptions.sopt[0]:a.sopt&&a.sopt.length&&(b=a.sopt[0]);v={groupOp:"AND",rules:[{field:A,op:b,data:""}]}}D=!1;a.tmplNames&&a.tmplNames.length&&(D=!0,H=a.tmplLabel,H+="<select class='ui-template'>",H+="<option value='default'>Default</option>",d.each(a.tmplNames,function(f,e){H=H+("<option value='"+f+"'>"+e+"</option>")}),H+="</select>");F="<table class='EditTable' style='border:0px none;margin-top:5px' id='"+E+"_2'><tbody><tr><td colspan='2'><hr class='ui-widget-content' style='margin:1px'/></td></tr><tr><td class='EditButton' style='text-align:"+F+"'>"+J+H+"</td><td class='EditButton' "+G+">"+w+j+"</td></tr></tbody></table>";E=d.jgrid.jqID(E);d("#"+E).jqFilter({columns:B,filter:a.loadDefaults?v:null,showQuery:a.showQuery,errorcheck:a.errorcheck,sopt:a.sopt,groupButton:a.multipleGroup,ruleButtons:a.multipleSearch,afterRedraw:a.afterRedraw,ops:a.odata,operands:a.operands,ajaxSelectOptions:I.p.ajaxSelectOptions,groupOps:a.groupOps,onChange:function(){this.p.showQuery&&d(".query",this).html(this.toUserFriendlyString());d.isFunction(a.afterChange)&&a.afterChange.call(I,d("#"+E),a)},direction:I.p.direction,id:I.p.id});C.append(F);D&&a.tmplFilters&&a.tmplFilters.length&&d(".ui-template",C).bind("change",function(){var e=d(this).val();e==="default"?d("#"+E).jqFilter("addFilter",v):d("#"+E).jqFilter("addFilter",a.tmplFilters[parseInt(e,10)]);return false});!0===a.multipleGroup&&(a.multipleSearch=!0);d(I).triggerHandler("jqGridFilterInitialize",[d("#"+E)]);d.isFunction(a.onInitializeSearch)&&a.onInitializeSearch.call(I,d("#"+E));a.gbox="#gbox_"+E;a.layer?d.jgrid.createModal(l,C,a,"#gview_"+d.jgrid.jqID(I.p.id),d("#gbox_"+d.jgrid.jqID(I.p.id))[0],"#"+d.jgrid.jqID(a.layer),{position:"relative"}):d.jgrid.createModal(l,C,a,"#gview_"+d.jgrid.jqID(I.p.id),d("#gbox_"+d.jgrid.jqID(I.p.id))[0]);(a.searchOnEnter||a.closeOnEscape)&&d("#"+d.jgrid.jqID(l.themodal)).keydown(function(f){var e=d(f.target);if(a.searchOnEnter&&f.which===13&&!e.hasClass("add-group")&&!e.hasClass("add-rule")&&!e.hasClass("delete-group")&&!e.hasClass("delete-rule")&&(!e.hasClass("fm-button")||!e.is("[id$=_query]"))){d("#"+E+"_search").focus().click();return false}if(a.closeOnEscape&&f.which===27){d("#"+d.jgrid.jqID(l.modalhead)).find(".ui-jqdialog-titlebar-close").focus().click();return false}});w&&d("#"+E+"_query").bind("click",function(){d(".queryresult",C).toggle();return false});void 0===a.stringResult&&(a.stringResult=a.multipleSearch);d("#"+E+"_search").bind("click",function(){var o=d("#"+E),n={},m,e=o.jqFilter("filterData");if(a.errorcheck){o[0].hideError();a.showQuery||o.jqFilter("toSQLString");if(o[0].p.error){o[0].showError();return false}}if(a.stringResult){try{m=xmlJsonClass.toJson(e,"","",false)}catch(k){try{m=JSON.stringify(e)}catch(i){}}if(typeof m==="string"){n[a.sFilter]=m;d.each([a.sField,a.sValue,a.sOper],function(){n[this]=""})}}else{if(a.multipleSearch){n[a.sFilter]=e;d.each([a.sField,a.sValue,a.sOper],function(){n[this]=""})}else{n[a.sField]=e.rules[0].field;n[a.sValue]=e.rules[0].data;n[a.sOper]=e.rules[0].op;n[a.sFilter]=""}}I.p.search=true;d.extend(I.p.postData,n);d(I).triggerHandler("jqGridFilterSearch");d.isFunction(a.onSearch)&&a.onSearch.call(I);d(I).trigger("reloadGrid",[{page:1}]);a.closeAfterSearch&&d.jgrid.hideModal("#"+d.jgrid.jqID(l.themodal),{gb:"#gbox_"+d.jgrid.jqID(I.p.id),jqm:a.jqModal,onClose:a.onClose});return false});d("#"+E+"_reset").bind("click",function(){var f={},e=d("#"+E);I.p.search=false;a.multipleSearch===false?f[a.sField]=f[a.sValue]=f[a.sOper]="":f[a.sFilter]="";e[0].resetFilter();D&&d(".ui-template",C).val("default");d.extend(I.p.postData,f);d(I).triggerHandler("jqGridFilterReset");d.isFunction(a.onReset)&&a.onReset.call(I);d(I).trigger("reloadGrid",[{page:1}]);return false});K(d("#"+E));d(".fm-button:not(.ui-state-disabled)",C).hover(function(){d(this).addClass("ui-state-hover")},function(){d(this).removeClass("ui-state-hover")})}}})},editGridRow:function(a,b){b=d.extend(!0,{top:0,left:0,width:300,datawidth:"auto",height:"auto",dataheight:"auto",modal:!1,overlay:30,drag:!0,resize:!0,url:null,mtype:"POST",clearAfterAdd:!0,closeAfterEdit:!1,reloadAfterSubmit:!0,onInitializeForm:null,beforeInitData:null,beforeShowForm:null,afterShowForm:null,beforeSubmit:null,afterSubmit:null,onclickSubmit:null,afterComplete:null,onclickPgButtons:null,afterclickPgButtons:null,editData:{},recreateForm:!1,jqModal:!0,closeOnEscape:!1,addedrow:"first",topinfo:"",bottominfo:"",saveicon:[],closeicon:[],savekey:[!1,13],navkeys:[!1,38,40],checkOnSubmit:!1,checkOnUpdate:!1,_savedData:{},processing:!1,onClose:null,ajaxEditOptions:{},serializeEditData:null,viewPagerButtons:!0,overlayClass:"ui-widget-overlay"},d.jgrid.edit,b||{});c[d(this)[0].p.id]=b;return this.each(function(){function ar(){d(al+" > tbody > tr > td > .FormElement").each(function(){var f=d(".customelement",this);if(f.length){var e=d(f[0]).attr("name");d.each(at.p.colModel,function(){if(this.name===e&&this.editoptions&&d.isFunction(this.editoptions.custom_value)){try{if(am[e]=this.editoptions.custom_value.call(at,d("#"+d.jgrid.jqID(e),al),"get"),void 0===am[e]){throw"e1"}}catch(g){"e1"===g?d.jgrid.info_dialog(d.jgrid.errors.errcap,"function 'custom_value' "+d.jgrid.edit.msg.novalue,d.jgrid.edit.bClose):d.jgrid.info_dialog(d.jgrid.errors.errcap,g.message,d.jgrid.edit.bClose)}return !0}})}else{switch(d(this).get(0).type){case"checkbox":d(this).is(":checked")?am[this.name]=d(this).val():(f=d(this).attr("offval"),am[this.name]=f);break;case"select-one":am[this.name]=d("option:selected",this).val();break;case"select-multiple":am[this.name]=d(this).val();am[this.name]=am[this.name]?am[this.name].join(","):"";d("option:selected",this).each(function(h,g){d(g).text()});break;case"password":case"text":case"textarea":case"button":am[this.name]=d(this).val()}at.p.autoencode&&(am[this.name]=d.jgrid.htmlEncode(am[this.name]))}});return !0}function an(G,E,x,D){var C,A,y,t=0,B,w,u,v=[],s=!1,F="",f;for(f=1;f<=D;f++){F+="<td class='CaptionTD'>&#160;</td><td class='DataTD'>&#160;</td>"}"_empty"!==G&&(s=d(E).jqGrid("getInd",G));d(E.p.colModel).each(function(k){C=this.name;w=(A=this.editrules&&!0===this.editrules.edithidden?!1:!0===this.hidden?!0:!1)?"style='display:none'":"";if("cb"!==C&&"subgrid"!==C&&!0===this.editable&&"rn"!==C){if(!1===s){B=""}else{if(C===E.p.ExpandColumn&&!0===E.p.treeGrid){B=d("td[role='gridcell']:eq("+k+")",E.rows[s]).text()}else{try{B=d.unformat.call(E,d("td[role='gridcell']:eq("+k+")",E.rows[s]),{rowId:G,colModel:this},k)}catch(i){B=this.edittype&&"textarea"===this.edittype?d("td[role='gridcell']:eq("+k+")",E.rows[s]).text():d("td[role='gridcell']:eq("+k+")",E.rows[s]).html()}if(!B||"&nbsp;"===B||"&#160;"===B||1===B.length&&160===B.charCodeAt(0)){B=""}}}var g=d.extend({},this.editoptions||{},{id:C,name:C}),j=d.extend({},{elmprefix:"",elmsuffix:"",rowabove:!1,rowcontent:""},this.formoptions||{}),e=parseInt(j.rowpos,10)||t+1,h=parseInt(2*(parseInt(j.colpos,10)||1),10);"_empty"===G&&g.defaultValue&&(B=d.isFunction(g.defaultValue)?g.defaultValue.call(at):g.defaultValue);this.edittype||(this.edittype="text");at.p.autoencode&&(B=d.jgrid.htmlDecode(B));u=d.jgrid.createEl.call(at,this.edittype,g,B,!1,d.extend({},d.jgrid.ajaxOptions,E.p.ajaxSelectOptions||{}));if(c[at.p.id].checkOnSubmit||c[at.p.id].checkOnUpdate){c[at.p.id]._savedData[C]=B}d(u).addClass("FormElement");-1<d.inArray(this.edittype,["text","textarea","password","select"])&&d(u).addClass("ui-widget-content ui-corner-all");y=d(x).find("tr[rowpos="+e+"]");if(j.rowabove){var l=d("<tr><td class='contentinfo' colspan='"+2*D+"'>"+j.rowcontent+"</td></tr>");d(x).append(l);l[0].rp=e}0===y.length&&(y=d("<tr "+w+" rowpos='"+e+"'></tr>").addClass("FormData").attr("id","tr_"+C),d(y).append(F),d(x).append(y),y[0].rp=e);d("td:eq("+(h-2)+")",y[0]).html(void 0===j.label?E.p.colNames[k]:j.label);d("td:eq("+(h-1)+")",y[0]).append(j.elmprefix).append(u).append(j.elmsuffix);d.isFunction(g.custom_value)&&"_empty"!==G&&g.custom_value.call(at,d("#"+C,"#"+aq),"set",B);d.jgrid.bindEv.call(at,u,g);v[t]=k;t++}});if(0<t&&(f=d("<tr class='FormData' style='display:none'><td class='CaptionTD'></td><td colspan='"+(2*D-1)+"' class='DataTD'><input class='FormElement' id='id_g' type='text' name='"+E.p.id+"_id' value='"+G+"'/></td></tr>"),f[0].rp=t+999,d(x).append(f),c[at.p.id].checkOnSubmit||c[at.p.id].checkOnUpdate)){c[at.p.id]._savedData[E.p.id+"_id"]=G}return v}function Z(A,z,y){var t,w=0,x,u,v,n,k;if(c[at.p.id].checkOnSubmit||c[at.p.id].checkOnUpdate){c[at.p.id]._savedData={},c[at.p.id]._savedData[z.p.id+"_id"]=A}var s=z.p.colModel;if("_empty"===A){d(s).each(function(){t=this.name;v=d.extend({},this.editoptions||{});if((u=d("#"+d.jgrid.jqID(t),"#"+y))&&u.length&&null!==u[0]){if(n="",v.defaultValue?(n=d.isFunction(v.defaultValue)?v.defaultValue.call(at):v.defaultValue,"checkbox"===u[0].type?(k=n.toLowerCase(),0>k.search(/(false|f|0|no|n|off|undefined)/i)&&""!==k?(u[0].checked=!0,u[0].defaultChecked=!0,u[0].value=n):(u[0].checked=!1,u[0].defaultChecked=!1)):u.val(n)):"checkbox"===u[0].type?(u[0].checked=!1,u[0].defaultChecked=!1,n=d(u).attr("offval")):u[0].type&&"select"===u[0].type.substr(0,6)?u[0].selectedIndex=0:u.val(n),!0===c[at.p.id].checkOnSubmit||c[at.p.id].checkOnUpdate){c[at.p.id]._savedData[t]=n}}}),d("#id_g","#"+y).val(A)}else{var q=d(z).jqGrid("getInd",A,!0);q&&(d('td[role="gridcell"]',q).each(function(f){t=s[f].name;if("cb"!==t&&"subgrid"!==t&&"rn"!==t&&!0===s[f].editable){if(t===z.p.ExpandColumn&&!0===z.p.treeGrid){x=d(this).text()}else{try{x=d.unformat.call(z,d(this),{rowId:A,colModel:s[f]},f)}catch(g){x="textarea"===s[f].edittype?d(this).text():d(this).html()}}at.p.autoencode&&(x=d.jgrid.htmlDecode(x));if(!0===c[at.p.id].checkOnSubmit||c[at.p.id].checkOnUpdate){c[at.p.id]._savedData[t]=x}t=d.jgrid.jqID(t);switch(s[f].edittype){case"password":case"text":case"button":case"image":case"textarea":if("&nbsp;"===x||"&#160;"===x||1===x.length&&160===x.charCodeAt(0)){x=""}d("#"+t,"#"+y).val(x);break;case"select":var e=x.split(","),e=d.map(e,function(i){return d.trim(i)});d("#"+t+" option","#"+y).each(function(){this.selected=!s[f].editoptions.multiple&&(d.trim(x)===d.trim(d(this).text())||e[0]===d.trim(d(this).text())||e[0]===d.trim(d(this).val()))?!0:s[f].editoptions.multiple?-1<d.inArray(d.trim(d(this).text()),e)||-1<d.inArray(d.trim(d(this).val()),e)?!0:!1:!1});break;case"checkbox":x=""+x;if(s[f].editoptions&&s[f].editoptions.value){if(s[f].editoptions.value.split(":")[0]===x){d("#"+t,"#"+y)[at.p.useProp?"prop":"attr"]({checked:!0,defaultChecked:!0})}else{d("#"+t,"#"+y)[at.p.useProp?"prop":"attr"]({checked:!1,defaultChecked:!1})}}else{x=x.toLowerCase(),0>x.search(/(false|f|0|no|n|off|undefined)/i)&&""!==x?(d("#"+t,"#"+y)[at.p.useProp?"prop":"attr"]("checked",!0),d("#"+t,"#"+y)[at.p.useProp?"prop":"attr"]("defaultChecked",!0)):(d("#"+t,"#"+y)[at.p.useProp?"prop":"attr"]("checked",!1),d("#"+t,"#"+y)[at.p.useProp?"prop":"attr"]("defaultChecked",!1))}break;case"custom":try{if(s[f].editoptions&&d.isFunction(s[f].editoptions.custom_value)){s[f].editoptions.custom_value.call(at,d("#"+t,"#"+y),"set",x)}else{throw"e1"}}catch(h){"e1"===h?d.jgrid.info_dialog(d.jgrid.errors.errcap,"function 'custom_value' "+d.jgrid.edit.msg.nodefined,d.jgrid.edit.bClose):d.jgrid.info_dialog(d.jgrid.errors.errcap,h.message,d.jgrid.edit.bClose)}}w++}}),0<w&&d("#id_g",al).val(A))}}function X(){d.each(at.p.colModel,function(e,f){f.editoptions&&!0===f.editoptions.NullIfEmpty&&am.hasOwnProperty(f.name)&&""===am[f.name]&&(am[f.name]="null")})}function ab(){var v,q=[!0,"",""],u={},t=at.p.prmNames,s,p,f,j,k,w=d(at).triggerHandler("jqGridAddEditBeforeCheckValues",[d("#"+aq),V]);w&&"object"===typeof w&&(am=w);d.isFunction(c[at.p.id].beforeCheckValues)&&(w=c[at.p.id].beforeCheckValues.call(at,am,d("#"+aq),V))&&"object"===typeof w&&(am=w);for(f in am){if(am.hasOwnProperty(f)&&(q=d.jgrid.checkValues.call(at,am[f],f),!1===q[0])){break}}X();q[0]&&(u=d(at).triggerHandler("jqGridAddEditClickSubmit",[c[at.p.id],am,V]),void 0===u&&d.isFunction(c[at.p.id].onclickSubmit)&&(u=c[at.p.id].onclickSubmit.call(at,c[at.p.id],am,V)||{}),q=d(at).triggerHandler("jqGridAddEditBeforeSubmit",[am,d("#"+aq),V]),void 0===q&&(q=[!0,"",""]),q[0]&&d.isFunction(c[at.p.id].beforeSubmit)&&(q=c[at.p.id].beforeSubmit.call(at,am,d("#"+aq),V)));if(q[0]&&!c[at.p.id].processing){c[at.p.id].processing=!0;d("#sData",al+"_2").addClass("ui-state-active");p=t.oper;s=t.id;am[p]="_empty"===d.trim(am[at.p.id+"_id"])?t.addoper:t.editoper;am[p]!==t.addoper?am[s]=am[at.p.id+"_id"]:void 0===am[s]&&(am[s]=am[at.p.id+"_id"]);delete am[at.p.id+"_id"];am=d.extend(am,c[at.p.id].editData,u);if(!0===at.p.treeGrid){for(k in am[p]===t.addoper&&(j=d(at).jqGrid("getGridParam","selrow"),am["adjacency"===at.p.treeGridModel?at.p.treeReader.parent_id_field:"parent_id"]=j),at.p.treeReader){at.p.treeReader.hasOwnProperty(k)&&(u=at.p.treeReader[k],am.hasOwnProperty(u)&&!(am[p]===t.addoper&&"parent_id_field"===k)&&delete am[u])}}am[s]=d.jgrid.stripPref(at.p.idPrefix,am[s]);k=d.extend({url:c[at.p.id].url||d(at).jqGrid("getGridParam","editurl"),type:c[at.p.id].mtype,data:d.isFunction(c[at.p.id].serializeEditData)?c[at.p.id].serializeEditData.call(at,am):am,complete:function(h,e){var l;am[s]=at.p.idPrefix+am[s];if(h.status>=300&&h.status!==304){q[0]=false;q[1]=d(at).triggerHandler("jqGridAddEditErrorTextFormat",[h,V]);q[1]=d.isFunction(c[at.p.id].errorTextFormat)?c[at.p.id].errorTextFormat.call(at,h,V):e+" Status: '"+h.statusText+"'. Error code: "+h.status}else{q=d(at).triggerHandler("jqGridAddEditAfterSubmit",[h,am,V]);q===void 0&&(q=[true,"",""]);q[0]&&d.isFunction(c[at.p.id].afterSubmit)&&(q=c[at.p.id].afterSubmit.call(at,h,am,V))}if(q[0]===false){d("#FormError>td",al).html(q[1]);d("#FormError",al).show()}else{at.p.autoencode&&d.each(am,function(m,g){am[m]=d.jgrid.htmlDecode(g)});if(am[p]===t.addoper){q[2]||(q[2]=d.jgrid.randId());am[s]=q[2];c[at.p.id].reloadAfterSubmit?d(at).trigger("reloadGrid"):at.p.treeGrid===true?d(at).jqGrid("addChildNode",q[2],j,am):d(at).jqGrid("addRowData",q[2],am,b.addedrow);if(c[at.p.id].closeAfterAdd){at.p.treeGrid!==true&&d(at).jqGrid("setSelection",q[2]);d.jgrid.hideModal("#"+d.jgrid.jqID(ag.themodal),{gb:"#gbox_"+d.jgrid.jqID(ae),jqm:b.jqModal,onClose:c[at.p.id].onClose})}else{c[at.p.id].clearAfterAdd&&Z("_empty",at,aq)}}else{if(c[at.p.id].reloadAfterSubmit){d(at).trigger("reloadGrid");c[at.p.id].closeAfterEdit||setTimeout(function(){d(at).jqGrid("setSelection",am[s])},1000)}else{at.p.treeGrid===true?d(at).jqGrid("setTreeRow",am[s],am):d(at).jqGrid("setRowData",am[s],am)}c[at.p.id].closeAfterEdit&&d.jgrid.hideModal("#"+d.jgrid.jqID(ag.themodal),{gb:"#gbox_"+d.jgrid.jqID(ae),jqm:b.jqModal,onClose:c[at.p.id].onClose})}if(d.isFunction(c[at.p.id].afterComplete)){v=h;setTimeout(function(){d(at).triggerHandler("jqGridAddEditAfterComplete",[v,am,d("#"+aq),V]);c[at.p.id].afterComplete.call(at,v,am,d("#"+aq),V);v=null},500)}if(c[at.p.id].checkOnSubmit||c[at.p.id].checkOnUpdate){d("#"+aq).data("disabled",false);if(c[at.p.id]._savedData[at.p.id+"_id"]!=="_empty"){for(l in c[at.p.id]._savedData){c[at.p.id]._savedData.hasOwnProperty(l)&&am[l]&&(c[at.p.id]._savedData[l]=am[l])}}}}c[at.p.id].processing=false;d("#sData",al+"_2").removeClass("ui-state-active");try{d(":input:visible","#"+aq)[0].focus()}catch(i){}}},d.jgrid.ajaxOptions,c[at.p.id].ajaxEditOptions);!k.url&&!c[at.p.id].useDataProxy&&(d.isFunction(at.p.dataProxy)?c[at.p.id].useDataProxy=!0:(q[0]=!1,q[1]+=" "+d.jgrid.errors.nourl));q[0]&&(c[at.p.id].useDataProxy?(u=at.p.dataProxy.call(at,k,"set_"+at.p.id),void 0===u&&(u=[!0,""]),!1===u[0]?(q[0]=!1,q[1]=u[1]||"Error deleting the selected row!"):(k.data.oper===t.addoper&&c[at.p.id].closeAfterAdd&&d.jgrid.hideModal("#"+d.jgrid.jqID(ag.themodal),{gb:"#gbox_"+d.jgrid.jqID(ae),jqm:b.jqModal,onClose:c[at.p.id].onClose}),k.data.oper===t.editoper&&c[at.p.id].closeAfterEdit&&d.jgrid.hideModal("#"+d.jgrid.jqID(ag.themodal),{gb:"#gbox_"+d.jgrid.jqID(ae),jqm:b.jqModal,onClose:c[at.p.id].onClose}))):d.ajax(k))}!1===q[0]&&(d("#FormError>td",al).html(q[1]),d("#FormError",al).show())}function aj(f,h){var e=!1,g;for(g in f){if(f.hasOwnProperty(g)&&f[g]!=h[g]){e=!0;break}}return e}function ao(){var e=!0;d("#FormError",al).hide();if(c[at.p.id].checkOnUpdate&&(am={},ar(),M=aj(am,c[at.p.id]._savedData))){d("#"+aq).data("disabled",!0),d(".confirm","#"+ag.themodal).show(),e=!1}return e}function ap(){var e;if("_empty"!==a&&void 0!==at.p.savedRow&&0<at.p.savedRow.length&&d.isFunction(d.fn.jqGrid.restoreRow)){for(e=0;e<at.p.savedRow.length;e++){if(at.p.savedRow[e].id==a){d(at).jqGrid("restoreRow",a);break}}}}function ai(g,e){var f=e[1].length-1;0===g?d("#pData",al+"_2").addClass("ui-state-disabled"):void 0!==e[1][g-1]&&d("#"+d.jgrid.jqID(e[1][g-1])).hasClass("ui-state-disabled")?d("#pData",al+"_2").addClass("ui-state-disabled"):d("#pData",al+"_2").removeClass("ui-state-disabled");g===f?d("#nData",al+"_2").addClass("ui-state-disabled"):void 0!==e[1][g+1]&&d("#"+d.jgrid.jqID(e[1][g+1])).hasClass("ui-state-disabled")?d("#nData",al+"_2").addClass("ui-state-disabled"):d("#nData",al+"_2").removeClass("ui-state-disabled")}function R(){var f=d(at).jqGrid("getDataIDs"),e=d("#id_g",al).val();return[d.inArray(e,f),f]}var at=this;if(at.grid&&a){var ae=at.p.id,aq="FrmGrid_"+ae,ah="TblGrid_"+ae,al="#"+d.jgrid.jqID(ah),ag={themodal:"editmod"+ae,modalhead:"edithd"+ae,modalcontent:"editcnt"+ae,scrollelm:aq},P=d.isFunction(c[at.p.id].beforeShowForm)?c[at.p.id].beforeShowForm:!1,af=d.isFunction(c[at.p.id].afterShowForm)?c[at.p.id].afterShowForm:!1,T=d.isFunction(c[at.p.id].beforeInitData)?c[at.p.id].beforeInitData:!1,ad=d.isFunction(c[at.p.id].onInitializeForm)?c[at.p.id].onInitializeForm:!1,ak=!0,N=1,W=0,am,M,V,aq=d.jgrid.jqID(aq);"new"===a?(a="_empty",V="add",b.caption=c[at.p.id].addCaption):(b.caption=c[at.p.id].editCaption,V="edit");!0===b.recreateForm&&void 0!==d("#"+d.jgrid.jqID(ag.themodal))[0]&&d("#"+d.jgrid.jqID(ag.themodal)).remove();var U=!0;b.checkOnUpdate&&b.jqModal&&!b.modal&&(U=!1);if(void 0!==d("#"+d.jgrid.jqID(ag.themodal))[0]){ak=d(at).triggerHandler("jqGridAddEditBeforeInitData",[d("#"+d.jgrid.jqID(aq)),V]);void 0===ak&&(ak=!0);ak&&T&&(ak=T.call(at,d("#"+aq),V));if(!1===ak){return}ap();d(".ui-jqdialog-title","#"+d.jgrid.jqID(ag.modalhead)).html(b.caption);d("#FormError",al).hide();c[at.p.id].topinfo?(d(".topinfo",al).html(c[at.p.id].topinfo),d(".tinfo",al).show()):d(".tinfo",al).hide();c[at.p.id].bottominfo?(d(".bottominfo",al+"_2").html(c[at.p.id].bottominfo),d(".binfo",al+"_2").show()):d(".binfo",al+"_2").hide();Z(a,at,aq);"_empty"===a||!c[at.p.id].viewPagerButtons?d("#pData, #nData",al+"_2").hide():d("#pData, #nData",al+"_2").show();!0===c[at.p.id].processing&&(c[at.p.id].processing=!1,d("#sData",al+"_2").removeClass("ui-state-active"));!0===d("#"+aq).data("disabled")&&(d(".confirm","#"+d.jgrid.jqID(ag.themodal)).hide(),d("#"+aq).data("disabled",!1));d(at).triggerHandler("jqGridAddEditBeforeShowForm",[d("#"+aq),V]);P&&P.call(at,d("#"+aq),V);d("#"+d.jgrid.jqID(ag.themodal)).data("onClose",c[at.p.id].onClose);d.jgrid.viewModal("#"+d.jgrid.jqID(ag.themodal),{gbox:"#gbox_"+d.jgrid.jqID(ae),jqm:b.jqModal,jqM:!1,overlay:b.overlay,modal:b.modal,overlayClass:b.overlayClass});U||d("."+d.jgrid.jqID(b.overlayClass)).click(function(){if(!ao()){return false}d.jgrid.hideModal("#"+d.jgrid.jqID(ag.themodal),{gb:"#gbox_"+d.jgrid.jqID(ae),jqm:b.jqModal,onClose:c[at.p.id].onClose});return false});d(at).triggerHandler("jqGridAddEditAfterShowForm",[d("#"+aq),V]);af&&af.call(at,d("#"+aq),V)}else{var Y=isNaN(b.dataheight)?b.dataheight:b.dataheight+"px",ak=isNaN(b.datawidth)?b.datawidth:b.datawidth+"px",Y=d("<form name='FormPost' id='"+aq+"' class='FormGrid' onSubmit='return false;' style='width:"+ak+";overflow:auto;position:relative;height:"+Y+";'></form>").data("disabled",!1),ac=d("<table id='"+ah+"' class='EditTable' cellspacing='0' cellpadding='0' border='0'><tbody></tbody></table>"),ak=d(at).triggerHandler("jqGridAddEditBeforeInitData",[d("#"+aq),V]);void 0===ak&&(ak=!0);ak&&T&&(ak=T.call(at,d("#"+aq,V)));if(!1===ak){return}ap();d(at.p.colModel).each(function(){var e=this.formoptions;N=Math.max(N,e?e.colpos||0:0);W=Math.max(W,e?e.rowpos||0:0)});d(Y).append(ac);T=d("<tr id='FormError' style='display:none'><td class='ui-state-error' colspan='"+2*N+"'></td></tr>");T[0].rp=0;d(ac).append(T);T=d("<tr style='display:none' class='tinfo'><td class='topinfo' colspan='"+2*N+"'>"+c[at.p.id].topinfo+"</td></tr>");T[0].rp=0;d(ac).append(T);var ak=(T="rtl"===at.p.direction?!0:!1)?"nData":"pData",aa=T?"pData":"nData";an(a,at,ac,N);var ak="<a href='javascript:void(0)' id='"+ak+"' class='fm-button ui-state-default ui-corner-left'><span class='ui-icon ui-icon-triangle-1-w'></span></a>",aa="<a href='javascript:void(0)' id='"+aa+"' class='fm-button ui-state-default ui-corner-right'><span class='ui-icon ui-icon-triangle-1-e'></span></a>",S="<a href='javascript:void(0)' id='sData' class='fm-button ui-state-default ui-corner-all'>"+b.bSubmit+"</a>",Q="<a href='javascript:void(0)' id='cData' class='fm-button ui-state-default ui-corner-all'>"+b.bCancel+"</a>",ah="<table border='0' cellspacing='0' cellpadding='0' class='EditTable' id='"+ah+"_2'><tbody><tr><td colspan='2'><hr class='ui-widget-content' style='margin:1px'/></td></tr><tr id='Act_Buttons'><td class='navButton'>"+(T?aa+ak:ak+aa)+"</td><td class='EditButton'>"+S+Q+"</td></tr>"+("<tr style='display:none' class='binfo'><td class='bottominfo' colspan='2'>"+c[at.p.id].bottominfo+"</td></tr>"),ah=ah+"</tbody></table>";if(0<W){var O=[];d.each(d(ac)[0].rows,function(e,f){O[e]=f});O.sort(function(e,f){return e.rp>f.rp?1:e.rp<f.rp?-1:0});d.each(O,function(f,e){d("tbody",ac).append(e)})}b.gbox="#gbox_"+d.jgrid.jqID(ae);var r=!1;!0===b.closeOnEscape&&(b.closeOnEscape=!1,r=!0);ah=d("<div></div>").append(Y).append(ah);d.jgrid.createModal(ag,ah,b,"#gview_"+d.jgrid.jqID(at.p.id),d("#gbox_"+d.jgrid.jqID(at.p.id))[0]);T&&(d("#pData, #nData",al+"_2").css("float","right"),d(".EditButton",al+"_2").css("text-align","left"));c[at.p.id].topinfo&&d(".tinfo",al).show();c[at.p.id].bottominfo&&d(".binfo",al+"_2").show();ah=ah=null;d("#"+d.jgrid.jqID(ag.themodal)).keydown(function(g){var f=g.target;if(d("#"+aq).data("disabled")===true){return false}if(c[at.p.id].savekey[0]===true&&g.which===c[at.p.id].savekey[1]&&f.tagName!=="TEXTAREA"){d("#sData",al+"_2").trigger("click");return false}if(g.which===27){if(!ao()){return false}r&&d.jgrid.hideModal("#"+d.jgrid.jqID(ag.themodal),{gb:b.gbox,jqm:b.jqModal,onClose:c[at.p.id].onClose});return false}if(c[at.p.id].navkeys[0]===true){if(d("#id_g",al).val()==="_empty"){return true}if(g.which===c[at.p.id].navkeys[1]){d("#pData",al+"_2").trigger("click");return false}if(g.which===c[at.p.id].navkeys[2]){d("#nData",al+"_2").trigger("click");return false}}});b.checkOnUpdate&&(d("a.ui-jqdialog-titlebar-close span","#"+d.jgrid.jqID(ag.themodal)).removeClass("jqmClose"),d("a.ui-jqdialog-titlebar-close","#"+d.jgrid.jqID(ag.themodal)).unbind("click").click(function(){if(!ao()){return false}d.jgrid.hideModal("#"+d.jgrid.jqID(ag.themodal),{gb:"#gbox_"+d.jgrid.jqID(ae),jqm:b.jqModal,onClose:c[at.p.id].onClose});return false}));b.saveicon=d.extend([!0,"left","ui-icon-disk"],b.saveicon);b.closeicon=d.extend([!0,"left","ui-icon-close"],b.closeicon);!0===b.saveicon[0]&&d("#sData",al+"_2").addClass("right"===b.saveicon[1]?"fm-button-icon-right":"fm-button-icon-left").append("<span class='ui-icon "+b.saveicon[2]+"'></span>");!0===b.closeicon[0]&&d("#cData",al+"_2").addClass("right"===b.closeicon[1]?"fm-button-icon-right":"fm-button-icon-left").append("<span class='ui-icon "+b.closeicon[2]+"'></span>");if(c[at.p.id].checkOnSubmit||c[at.p.id].checkOnUpdate){S="<a href='javascript:void(0)' id='sNew' class='fm-button ui-state-default ui-corner-all' style='z-index:1002'>"+b.bYes+"</a>",aa="<a href='javascript:void(0)' id='nNew' class='fm-button ui-state-default ui-corner-all' style='z-index:1002'>"+b.bNo+"</a>",Q="<a href='javascript:void(0)' id='cNew' class='fm-button ui-state-default ui-corner-all' style='z-index:1002'>"+b.bExit+"</a>",ah=b.zIndex||999,ah++,d("<div class='"+b.overlayClass+" jqgrid-overlay confirm' style='z-index:"+ah+";display:none;'>&#160;</div><div class='confirm ui-widget-content ui-jqconfirm' style='z-index:"+(ah+1)+"'>"+b.saveData+"<br/><br/>"+S+aa+Q+"</div>").insertAfter("#"+aq),d("#sNew","#"+d.jgrid.jqID(ag.themodal)).click(function(){ab();d("#"+aq).data("disabled",false);d(".confirm","#"+d.jgrid.jqID(ag.themodal)).hide();return false}),d("#nNew","#"+d.jgrid.jqID(ag.themodal)).click(function(){d(".confirm","#"+d.jgrid.jqID(ag.themodal)).hide();d("#"+aq).data("disabled",false);setTimeout(function(){d(":input:visible","#"+aq)[0].focus()},0);return false}),d("#cNew","#"+d.jgrid.jqID(ag.themodal)).click(function(){d(".confirm","#"+d.jgrid.jqID(ag.themodal)).hide();d("#"+aq).data("disabled",false);d.jgrid.hideModal("#"+d.jgrid.jqID(ag.themodal),{gb:"#gbox_"+d.jgrid.jqID(ae),jqm:b.jqModal,onClose:c[at.p.id].onClose});return false})}d(at).triggerHandler("jqGridAddEditInitializeForm",[d("#"+aq),V]);ad&&ad.call(at,d("#"+aq),V);"_empty"===a||!c[at.p.id].viewPagerButtons?d("#pData,#nData",al+"_2").hide():d("#pData,#nData",al+"_2").show();d(at).triggerHandler("jqGridAddEditBeforeShowForm",[d("#"+aq),V]);P&&P.call(at,d("#"+aq),V);d("#"+d.jgrid.jqID(ag.themodal)).data("onClose",c[at.p.id].onClose);d.jgrid.viewModal("#"+d.jgrid.jqID(ag.themodal),{gbox:"#gbox_"+d.jgrid.jqID(ae),jqm:b.jqModal,overlay:b.overlay,modal:b.modal,overlayClass:b.overlayClass});U||d("."+d.jgrid.jqID(b.overlayClass)).click(function(){if(!ao()){return false}d.jgrid.hideModal("#"+d.jgrid.jqID(ag.themodal),{gb:"#gbox_"+d.jgrid.jqID(ae),jqm:b.jqModal,onClose:c[at.p.id].onClose});return false});d(at).triggerHandler("jqGridAddEditAfterShowForm",[d("#"+aq),V]);af&&af.call(at,d("#"+aq),V);d(".fm-button","#"+d.jgrid.jqID(ag.themodal)).hover(function(){d(this).addClass("ui-state-hover")},function(){d(this).removeClass("ui-state-hover")});d("#sData",al+"_2").click(function(){am={};d("#FormError",al).hide();ar();if(am[at.p.id+"_id"]==="_empty"){ab()}else{if(b.checkOnSubmit===true){if(M=aj(am,c[at.p.id]._savedData)){d("#"+aq).data("disabled",true);d(".confirm","#"+d.jgrid.jqID(ag.themodal)).show()}else{ab()}}else{ab()}}return false});d("#cData",al+"_2").click(function(){if(!ao()){return false}d.jgrid.hideModal("#"+d.jgrid.jqID(ag.themodal),{gb:"#gbox_"+d.jgrid.jqID(ae),jqm:b.jqModal,onClose:c[at.p.id].onClose});return false});d("#nData",al+"_2").click(function(){if(!ao()){return false}d("#FormError",al).hide();var f=R();f[0]=parseInt(f[0],10);if(f[0]!==-1&&f[1][f[0]+1]){d(at).triggerHandler("jqGridAddEditClickPgButtons",["next",d("#"+aq),f[1][f[0]]]);var g;if(d.isFunction(b.onclickPgButtons)){g=b.onclickPgButtons.call(at,"next",d("#"+aq),f[1][f[0]]);if(g!==void 0&&g===false){return false}}if(d("#"+d.jgrid.jqID(f[1][f[0]+1])).hasClass("ui-state-disabled")){return false}Z(f[1][f[0]+1],at,aq);d(at).jqGrid("setSelection",f[1][f[0]+1]);d(at).triggerHandler("jqGridAddEditAfterClickPgButtons",["next",d("#"+aq),f[1][f[0]]]);d.isFunction(b.afterclickPgButtons)&&b.afterclickPgButtons.call(at,"next",d("#"+aq),f[1][f[0]+1]);ai(f[0]+1,f)}return false});d("#pData",al+"_2").click(function(){if(!ao()){return false}d("#FormError",al).hide();var f=R();if(f[0]!==-1&&f[1][f[0]-1]){d(at).triggerHandler("jqGridAddEditClickPgButtons",["prev",d("#"+aq),f[1][f[0]]]);var g;if(d.isFunction(b.onclickPgButtons)){g=b.onclickPgButtons.call(at,"prev",d("#"+aq),f[1][f[0]]);if(g!==void 0&&g===false){return false}}if(d("#"+d.jgrid.jqID(f[1][f[0]-1])).hasClass("ui-state-disabled")){return false}Z(f[1][f[0]-1],at,aq);d(at).jqGrid("setSelection",f[1][f[0]-1]);d(at).triggerHandler("jqGridAddEditAfterClickPgButtons",["prev",d("#"+aq),f[1][f[0]]]);d.isFunction(b.afterclickPgButtons)&&b.afterclickPgButtons.call(at,"prev",d("#"+aq),f[1][f[0]-1]);ai(f[0]-1,f)}return false})}P=R();ai(P[0],P)}})},viewGridRow:function(a,b){b=d.extend(!0,{top:0,left:0,width:0,datawidth:"auto",height:"auto",dataheight:"auto",modal:!1,overlay:30,drag:!0,resize:!0,jqModal:!0,closeOnEscape:!1,labelswidth:"30%",closeicon:[],navkeys:[!1,38,40],onClose:null,beforeShowForm:null,beforeInitData:null,viewPagerButtons:!0,recreateForm:!1},d.jgrid.view,b||{});c[d(this)[0].p.id]=b;return this.each(function(){function P(){(!0===c[J.p.id].closeOnEscape||!0===c[J.p.id].navkeys[0])&&setTimeout(function(){d(".ui-jqdialog-titlebar-close","#"+d.jgrid.jqID(E.modalhead)).focus()},0)}function L(ak,aj,ai,ag){var ah,af,ae,ad=0,Z,ac,ab=[],W=!1,aa,X="<td class='CaptionTD form-view-label ui-widget-content' width='"+b.labelswidth+"'>&#160;</td><td class='DataTD form-view-data ui-helper-reset ui-widget-content'>&#160;</td>",V="",U=["integer","number","currency"],S=0,T=0,B,R,Y;for(aa=1;aa<=ag;aa++){V+=1===aa?X:"<td class='CaptionTD form-view-label ui-widget-content'>&#160;</td><td class='DataTD form-view-data ui-widget-content'>&#160;</td>"}d(aj.p.colModel).each(function(){af=this.editrules&&!0===this.editrules.edithidden?!1:!0===this.hidden?!0:!1;!af&&"right"===this.align&&(this.formatter&&-1!==d.inArray(this.formatter,U)?S=Math.max(S,parseInt(this.width,10)):T=Math.max(T,parseInt(this.width,10)))});B=0!==S?S:0!==T?T:0;W=d(aj).jqGrid("getInd",ak);d(aj.p.colModel).each(function(e){ah=this.name;R=!1;ac=(af=this.editrules&&!0===this.editrules.edithidden?!1:!0===this.hidden?!0:!1)?"style='display:none'":"";Y="boolean"!==typeof this.viewable?!0:this.viewable;if("cb"!==ah&&"subgrid"!==ah&&"rn"!==ah&&Y){Z=!1===W?"":ah===aj.p.ExpandColumn&&!0===aj.p.treeGrid?d("td:eq("+e+")",aj.rows[W]).text():d("td:eq("+e+")",aj.rows[W]).html();R="right"===this.align&&0!==B?!0:!1;var i=d.extend({},{rowabove:!1,rowcontent:""},this.formoptions||{}),f=parseInt(i.rowpos,10)||ad+1,h=parseInt(2*(parseInt(i.colpos,10)||1),10);if(i.rowabove){var g=d("<tr><td class='contentinfo' colspan='"+2*ag+"'>"+i.rowcontent+"</td></tr>");d(ai).append(g);g[0].rp=f}ae=d(ai).find("tr[rowpos="+f+"]");0===ae.length&&(ae=d("<tr "+ac+" rowpos='"+f+"'></tr>").addClass("FormData").attr("id","trv_"+ah),d(ae).append(V),d(ai).append(ae),ae[0].rp=f);d("td:eq("+(h-2)+")",ae[0]).html("<b>"+(void 0===i.label?aj.p.colNames[e]:i.label)+"</b>");d("td:eq("+(h-1)+")",ae[0]).append("<span>"+Z+"</span>").attr("id","v_"+ah);R&&d("td:eq("+(h-1)+") span",ae[0]).css({"text-align":"right",width:B+"px"});ab[ad]=e;ad++}});0<ad&&(ak=d("<tr class='FormData' style='display:none'><td class='CaptionTD'></td><td colspan='"+(2*ag-1)+"' class='DataTD'><input class='FormElement' id='id_g' type='text' name='id' value='"+ak+"'/></td></tr>"),ak[0].rp=ad+99,d(ai).append(ak));return ab}function z(i,q){var p,o,m=0,n,k;if(k=d(q).jqGrid("getInd",i,!0)){d("td",k).each(function(e){p=q.p.colModel[e].name;o=q.p.colModel[e].editrules&&!0===q.p.colModel[e].editrules.edithidden?!1:!0===q.p.colModel[e].hidden?!0:!1;"cb"!==p&&"subgrid"!==p&&"rn"!==p&&(n=p===q.p.ExpandColumn&&!0===q.p.treeGrid?d(this).text():d(this).html(),p=d.jgrid.jqID("v_"+p),d("#"+p+" span","#"+I).html(n),o&&d("#"+p,"#"+I).parents("tr:first").hide(),m++)}),0<m&&d("#id_g","#"+I).val(i)}}function v(e,g){var f=g[1].length-1;0===e?d("#pData","#"+I+"_2").addClass("ui-state-disabled"):void 0!==g[1][e-1]&&d("#"+d.jgrid.jqID(g[1][e-1])).hasClass("ui-state-disabled")?d("#pData",I+"_2").addClass("ui-state-disabled"):d("#pData","#"+I+"_2").removeClass("ui-state-disabled");e===f?d("#nData","#"+I+"_2").addClass("ui-state-disabled"):void 0!==g[1][e+1]&&d("#"+d.jgrid.jqID(g[1][e+1])).hasClass("ui-state-disabled")?d("#nData",I+"_2").addClass("ui-state-disabled"):d("#nData","#"+I+"_2").removeClass("ui-state-disabled")}function C(){var e=d(J).jqGrid("getDataIDs"),f=d("#id_g","#"+I).val();return[d.inArray(f,e),e]}var J=this;if(J.grid&&a){var M=J.p.id,N="ViewGrid_"+d.jgrid.jqID(M),I="ViewTbl_"+d.jgrid.jqID(M),l="ViewGrid_"+M,Q="ViewTbl_"+M,E={themodal:"viewmod"+M,modalhead:"viewhd"+M,modalcontent:"viewcnt"+M,scrollelm:N},O=d.isFunction(c[J.p.id].beforeInitData)?c[J.p.id].beforeInitData:!1,H=!0,K=1,G=0;!0===b.recreateForm&&void 0!==d("#"+d.jgrid.jqID(E.themodal))[0]&&d("#"+d.jgrid.jqID(E.themodal)).remove();if(void 0!==d("#"+d.jgrid.jqID(E.themodal))[0]){O&&(H=O.call(J,d("#"+N)),void 0===H&&(H=!0));if(!1===H){return}d(".ui-jqdialog-title","#"+d.jgrid.jqID(E.modalhead)).html(b.caption);d("#FormError","#"+I).hide();z(a,J);d.isFunction(c[J.p.id].beforeShowForm)&&c[J.p.id].beforeShowForm.call(J,d("#"+N));d.jgrid.viewModal("#"+d.jgrid.jqID(E.themodal),{gbox:"#gbox_"+d.jgrid.jqID(M),jqm:b.jqModal,jqM:!1,overlay:b.overlay,modal:b.modal});P()}else{var j=isNaN(b.dataheight)?b.dataheight:b.dataheight+"px",F=isNaN(b.datawidth)?b.datawidth:b.datawidth+"px",l=d("<form name='FormPost' id='"+l+"' class='FormGrid' style='width:"+F+";overflow:auto;position:relative;height:"+j+";'></form>"),r=d("<table id='"+Q+"' class='EditTable' cellspacing='1' cellpadding='2' border='0' style='table-layout:fixed'><tbody></tbody></table>");O&&(H=O.call(J,d("#"+N)),void 0===H&&(H=!0));if(!1===H){return}d(J.p.colModel).each(function(){var e=this.formoptions;K=Math.max(K,e?e.colpos||0:0);G=Math.max(G,e?e.rowpos||0:0)});d(l).append(r);L(a,J,r,K);Q="rtl"===J.p.direction?!0:!1;O="<a href='javascript:void(0)' id='"+(Q?"nData":"pData")+"' class='fm-button ui-state-default ui-corner-left'><span class='ui-icon ui-icon-triangle-1-w'></span></a>";H="<a href='javascript:void(0)' id='"+(Q?"pData":"nData")+"' class='fm-button ui-state-default ui-corner-right'><span class='ui-icon ui-icon-triangle-1-e'></span></a>";j="<a href='javascript:void(0)' id='cData' class='fm-button ui-state-default ui-corner-all'>"+b.bClose+"</a>";if(0<G){var D=[];d.each(d(r)[0].rows,function(f,e){D[f]=e});D.sort(function(f,e){return f.rp>e.rp?1:f.rp<e.rp?-1:0});d.each(D,function(e,f){d("tbody",r).append(f)})}b.gbox="#gbox_"+d.jgrid.jqID(M);l=d("<div></div>").append(l).append("<table border='0' class='EditTable' id='"+I+"_2'><tbody><tr id='Act_Buttons'><td class='navButton' width='"+b.labelswidth+"'>"+(Q?H+O:O+H)+"</td><td class='EditButton'>"+j+"</td></tr></tbody></table>");d.jgrid.createModal(E,l,b,"#gview_"+d.jgrid.jqID(J.p.id),d("#gview_"+d.jgrid.jqID(J.p.id))[0]);Q&&(d("#pData, #nData","#"+I+"_2").css("float","right"),d(".EditButton","#"+I+"_2").css("text-align","left"));b.viewPagerButtons||d("#pData, #nData","#"+I+"_2").hide();l=null;d("#"+E.themodal).keydown(function(e){if(e.which===27){c[J.p.id].closeOnEscape&&d.jgrid.hideModal("#"+d.jgrid.jqID(E.themodal),{gb:b.gbox,jqm:b.jqModal,onClose:b.onClose});return false}if(b.navkeys[0]===true){if(e.which===b.navkeys[1]){d("#pData","#"+I+"_2").trigger("click");return false}if(e.which===b.navkeys[2]){d("#nData","#"+I+"_2").trigger("click");return false}}});b.closeicon=d.extend([!0,"left","ui-icon-close"],b.closeicon);!0===b.closeicon[0]&&d("#cData","#"+I+"_2").addClass("right"===b.closeicon[1]?"fm-button-icon-right":"fm-button-icon-left").append("<span class='ui-icon "+b.closeicon[2]+"'></span>");d.isFunction(b.beforeShowForm)&&b.beforeShowForm.call(J,d("#"+N));d.jgrid.viewModal("#"+d.jgrid.jqID(E.themodal),{gbox:"#gbox_"+d.jgrid.jqID(M),jqm:b.jqModal,overlay:b.overlay,modal:b.modal});d(".fm-button:not(.ui-state-disabled)","#"+I+"_2").hover(function(){d(this).addClass("ui-state-hover")},function(){d(this).removeClass("ui-state-hover")});P();d("#cData","#"+I+"_2").click(function(){d.jgrid.hideModal("#"+d.jgrid.jqID(E.themodal),{gb:"#gbox_"+d.jgrid.jqID(M),jqm:b.jqModal,onClose:b.onClose});return false});d("#nData","#"+I+"_2").click(function(){d("#FormError","#"+I).hide();var e=C();e[0]=parseInt(e[0],10);if(e[0]!==-1&&e[1][e[0]+1]){d.isFunction(b.onclickPgButtons)&&b.onclickPgButtons.call(J,"next",d("#"+N),e[1][e[0]]);z(e[1][e[0]+1],J);d(J).jqGrid("setSelection",e[1][e[0]+1]);d.isFunction(b.afterclickPgButtons)&&b.afterclickPgButtons.call(J,"next",d("#"+N),e[1][e[0]+1]);v(e[0]+1,e)}P();return false});d("#pData","#"+I+"_2").click(function(){d("#FormError","#"+I).hide();var e=C();if(e[0]!==-1&&e[1][e[0]-1]){d.isFunction(b.onclickPgButtons)&&b.onclickPgButtons.call(J,"prev",d("#"+N),e[1][e[0]]);z(e[1][e[0]-1],J);d(J).jqGrid("setSelection",e[1][e[0]-1]);d.isFunction(b.afterclickPgButtons)&&b.afterclickPgButtons.call(J,"prev",d("#"+N),e[1][e[0]-1]);v(e[0]-1,e)}P();return false})}l=C();v(l[0],l)}})},delGridRow:function(a,b){b=d.extend(!0,{top:0,left:0,width:240,height:"auto",dataheight:"auto",modal:!1,overlay:30,drag:!0,resize:!0,url:"",mtype:"POST",reloadAfterSubmit:!0,beforeShowForm:null,beforeInitData:null,afterShowForm:null,beforeSubmit:null,onclickSubmit:null,afterSubmit:null,jqModal:!0,closeOnEscape:!1,delData:{},delicon:[],cancelicon:[],onClose:null,ajaxDelOptions:{},processing:!1,serializeDelData:null,useDataProxy:!1},d.jgrid.del,b||{});c[d(this)[0].p.id]=b;return this.each(function(){var D=this;if(D.grid&&a){var z=d.isFunction(c[D.p.id].beforeShowForm),H=d.isFunction(c[D.p.id].afterShowForm),G=d.isFunction(c[D.p.id].beforeInitData)?c[D.p.id].beforeInitData:!1,I=D.p.id,w={},A=!0,B="DelTbl_"+d.jgrid.jqID(I),v,F,E,j,C="DelTbl_"+I,r={themodal:"delmod"+I,modalhead:"delhd"+I,modalcontent:"delcnt"+I,scrollelm:B};d.isArray(a)&&(a=a.join());if(void 0!==d("#"+d.jgrid.jqID(r.themodal))[0]){G&&(A=G.call(D,d("#"+B)),void 0===A&&(A=!0));if(!1===A){return}d("#DelData>td","#"+B).text(a);d("#DelError","#"+B).hide();!0===c[D.p.id].processing&&(c[D.p.id].processing=!1,d("#dData","#"+B).removeClass("ui-state-active"));z&&c[D.p.id].beforeShowForm.call(D,d("#"+B));d.jgrid.viewModal("#"+d.jgrid.jqID(r.themodal),{gbox:"#gbox_"+d.jgrid.jqID(I),jqm:c[D.p.id].jqModal,jqM:!1,overlay:c[D.p.id].overlay,modal:c[D.p.id].modal})}else{var y=isNaN(c[D.p.id].dataheight)?c[D.p.id].dataheight:c[D.p.id].dataheight+"px",l=isNaN(b.datawidth)?b.datawidth:b.datawidth+"px",C="<div id='"+C+"' class='formdata' style='width:"+l+";overflow:auto;position:relative;height:"+y+";'><table class='DelTable'><tbody><tr id='DelError' style='display:none'><td class='ui-state-error'></td></tr>"+("<tr id='DelData' style='display:none'><td >"+a+"</td></tr>"),C=C+('<tr><td class="delmsg" style="white-space:pre;">'+c[D.p.id].msg+"</td></tr><tr><td >&#160;</td></tr>"),C=C+"</tbody></table></div>"+("<table cellspacing='0' cellpadding='0' border='0' class='EditTable' id='"+B+"_2'><tbody><tr><td><hr class='ui-widget-content' style='margin:1px'/></td></tr><tr><td class='DelButton EditButton'>"+("<a href='javascript:void(0)' id='dData' class='fm-button ui-state-default ui-corner-all'>"+b.bSubmit+"</a>")+"&#160;"+("<a href='javascript:void(0)' id='eData' class='fm-button ui-state-default ui-corner-all'>"+b.bCancel+"</a>")+"</td></tr></tbody></table>");b.gbox="#gbox_"+d.jgrid.jqID(I);d.jgrid.createModal(r,C,b,"#gview_"+d.jgrid.jqID(D.p.id),d("#gview_"+d.jgrid.jqID(D.p.id))[0]);G&&(A=G.call(D,d("#"+B)),void 0===A&&(A=!0));if(!1===A){return}d(".fm-button","#"+B+"_2").hover(function(){d(this).addClass("ui-state-hover")},function(){d(this).removeClass("ui-state-hover")});b.delicon=d.extend([!0,"left","ui-icon-scissors"],c[D.p.id].delicon);b.cancelicon=d.extend([!0,"left","ui-icon-cancel"],c[D.p.id].cancelicon);!0===b.delicon[0]&&d("#dData","#"+B+"_2").addClass("right"===b.delicon[1]?"fm-button-icon-right":"fm-button-icon-left").append("<span class='ui-icon "+b.delicon[2]+"'></span>");!0===b.cancelicon[0]&&d("#eData","#"+B+"_2").addClass("right"===b.cancelicon[1]?"fm-button-icon-right":"fm-button-icon-left").append("<span class='ui-icon "+b.cancelicon[2]+"'></span>");d("#dData","#"+B+"_2").click(function(){var k=[true,""],g,e=d("#DelData>td","#"+B).text();w={};d.isFunction(c[D.p.id].onclickSubmit)&&(w=c[D.p.id].onclickSubmit.call(D,c[D.p.id],e)||{});d.isFunction(c[D.p.id].beforeSubmit)&&(k=c[D.p.id].beforeSubmit.call(D,e));if(k[0]&&!c[D.p.id].processing){c[D.p.id].processing=true;E=D.p.prmNames;v=d.extend({},c[D.p.id].delData,w);j=E.oper;v[j]=E.deloper;F=E.id;e=(""+e).split(",");if(!e.length){return false}for(g in e){e.hasOwnProperty(g)&&(e[g]=d.jgrid.stripPref(D.p.idPrefix,e[g]))}v[F]=e.join();d(this).addClass("ui-state-active");g=d.extend({url:c[D.p.id].url||d(D).jqGrid("getGridParam","editurl"),type:c[D.p.id].mtype,data:d.isFunction(c[D.p.id].serializeDelData)?c[D.p.id].serializeDelData.call(D,v):v,complete:function(n,i){var f;if(n.status>=300&&n.status!==304){k[0]=false;k[1]=d.isFunction(c[D.p.id].errorTextFormat)?c[D.p.id].errorTextFormat.call(D,n):i+" Status: '"+n.statusText+"'. Error code: "+n.status}else{d.isFunction(c[D.p.id].afterSubmit)&&(k=c[D.p.id].afterSubmit.call(D,n,v))}if(k[0]===false){d("#DelError>td","#"+B).html(k[1]);d("#DelError","#"+B).show()}else{if(c[D.p.id].reloadAfterSubmit&&D.p.datatype!=="local"){d(D).trigger("reloadGrid")}else{if(D.p.treeGrid===true){try{d(D).jqGrid("delTreeNode",D.p.idPrefix+e[0])}catch(m){}}else{for(f=0;f<e.length;f++){d(D).jqGrid("delRowData",D.p.idPrefix+e[f])}}D.p.selrow=null;D.p.selarrrow=[]}d.isFunction(c[D.p.id].afterComplete)&&setTimeout(function(){c[D.p.id].afterComplete.call(D,n,e)},500)}c[D.p.id].processing=false;d("#dData","#"+B+"_2").removeClass("ui-state-active");k[0]&&d.jgrid.hideModal("#"+d.jgrid.jqID(r.themodal),{gb:"#gbox_"+d.jgrid.jqID(I),jqm:b.jqModal,onClose:c[D.p.id].onClose})}},d.jgrid.ajaxOptions,c[D.p.id].ajaxDelOptions);if(!g.url&&!c[D.p.id].useDataProxy){if(d.isFunction(D.p.dataProxy)){c[D.p.id].useDataProxy=true}else{k[0]=false;k[1]=k[1]+(" "+d.jgrid.errors.nourl)}}if(k[0]){if(c[D.p.id].useDataProxy){g=D.p.dataProxy.call(D,g,"del_"+D.p.id);g===void 0&&(g=[true,""]);if(g[0]===false){k[0]=false;k[1]=g[1]||"Error deleting the selected row!"}else{d.jgrid.hideModal("#"+d.jgrid.jqID(r.themodal),{gb:"#gbox_"+d.jgrid.jqID(I),jqm:b.jqModal,onClose:c[D.p.id].onClose})}}else{d.ajax(g)}}}if(k[0]===false){d("#DelError>td","#"+B).html(k[1]);d("#DelError","#"+B).show()}return false});d("#eData","#"+B+"_2").click(function(){d.jgrid.hideModal("#"+d.jgrid.jqID(r.themodal),{gb:"#gbox_"+d.jgrid.jqID(I),jqm:c[D.p.id].jqModal,onClose:c[D.p.id].onClose});return false});z&&c[D.p.id].beforeShowForm.call(D,d("#"+B));d.jgrid.viewModal("#"+d.jgrid.jqID(r.themodal),{gbox:"#gbox_"+d.jgrid.jqID(I),jqm:c[D.p.id].jqModal,overlay:c[D.p.id].overlay,modal:c[D.p.id].modal})}H&&c[D.p.id].afterShowForm.call(D,d("#"+B));!0===c[D.p.id].closeOnEscape&&setTimeout(function(){d(".ui-jqdialog-titlebar-close","#"+d.jgrid.jqID(r.modalhead)).focus()},0)}})},navGrid:function(a,l,k,h,g,f,j){l=d.extend({edit:!0,editicon:"ui-icon-pencil",add:!0,addicon:"ui-icon-plus",del:!0,delicon:"ui-icon-trash",search:!0,searchicon:"ui-icon-search",refresh:!0,refreshicon:"ui-icon-refresh",refreshstate:"firstpage",view:!1,viewicon:"ui-icon-document",position:"left",closeOnEscape:!0,beforeRefresh:null,afterRefresh:null,cloneToTop:!1,alertwidth:200,alertheight:"auto",alerttop:null,alertleft:null,alertzIndex:null},d.jgrid.nav,l||{});return this.each(function(){if(!this.nav){var p={themodal:"alertmod_"+this.p.id,modalhead:"alerthd_"+this.p.id,modalcontent:"alertcnt_"+this.p.id},s=this,t;if(s.grid&&"string"===typeof a){void 0===d("#"+p.themodal)[0]&&(!l.alerttop&&!l.alertleft&&(void 0!==window.innerWidth?(l.alertleft=window.innerWidth,l.alerttop=window.innerHeight):void 0!==document.documentElement&&void 0!==document.documentElement.clientWidth&&0!==document.documentElement.clientWidth?(l.alertleft=document.documentElement.clientWidth,l.alerttop=document.documentElement.clientHeight):(l.alertleft=1024,l.alerttop=768),l.alertleft=l.alertleft/2-parseInt(l.alertwidth,10)/2,l.alerttop=l.alerttop/2-25),d.jgrid.createModal(p,"<div>"+l.alerttext+"</div><span tabindex='0'><span tabindex='-1' id='jqg_alrt'></span></span>",{gbox:"#gbox_"+d.jgrid.jqID(s.p.id),jqModal:!0,drag:!0,resize:!0,caption:l.alertcap,top:l.alerttop,left:l.alertleft,width:l.alertwidth,height:l.alertheight,closeOnEscape:l.closeOnEscape,zIndex:l.alertzIndex},"#gview_"+d.jgrid.jqID(s.p.id),d("#gbox_"+d.jgrid.jqID(s.p.id))[0],!0));var i=1,w,v=function(){d(this).hasClass("ui-state-disabled")||d(this).addClass("ui-state-hover")},b=function(){d(this).removeClass("ui-state-hover")};l.cloneToTop&&s.p.toppager&&(i=2);for(w=0;w<i;w++){var u=d("<table cellspacing='0' cellpadding='0' border='0' class='ui-pg-table navtable' style='float:left;table-layout:auto;'><tbody><tr></tr></tbody></table>"),e,r;0===w?(e=a,r=s.p.id,e===s.p.toppager&&(r+="_top",i=1)):(e=s.p.toppager,r=s.p.id+"_top");"rtl"===s.p.direction&&d(u).attr("dir","rtl").css("float","right");l.add&&(h=h||{},t=d("<td class='ui-pg-button ui-corner-all'></td>"),d(t).append("<div class='ui-pg-div'><span class='ui-icon "+l.addicon+"'></span>"+l.addtext+"</div>"),d("tr",u).append(t),d(t,u).attr({title:l.addtitle||"",id:h.id||"add_"+r}).click(function(){d(this).hasClass("ui-state-disabled")||(d.isFunction(l.addfunc)?l.addfunc.call(s):d(s).jqGrid("editGridRow","new",h));return false}).hover(v,b),t=null);l.edit&&(t=d("<td class='ui-pg-button ui-corner-all'></td>"),k=k||{},d(t).append("<div class='ui-pg-div'><span class='ui-icon "+l.editicon+"'></span>"+l.edittext+"</div>"),d("tr",u).append(t),d(t,u).attr({title:l.edittitle||"",id:k.id||"edit_"+r}).click(function(){if(!d(this).hasClass("ui-state-disabled")){var m=s.p.selrow;if(m){d.isFunction(l.editfunc)?l.editfunc.call(s,m):d(s).jqGrid("editGridRow",m,k)}else{d.jgrid.viewModal("#"+p.themodal,{gbox:"#gbox_"+d.jgrid.jqID(s.p.id),jqm:true});d("#jqg_alrt").focus()}}return false}).hover(v,b),t=null);l.view&&(t=d("<td class='ui-pg-button ui-corner-all'></td>"),j=j||{},d(t).append("<div class='ui-pg-div'><span class='ui-icon "+l.viewicon+"'></span>"+l.viewtext+"</div>"),d("tr",u).append(t),d(t,u).attr({title:l.viewtitle||"",id:j.id||"view_"+r}).click(function(){if(!d(this).hasClass("ui-state-disabled")){var m=s.p.selrow;if(m){d.isFunction(l.viewfunc)?l.viewfunc.call(s,m):d(s).jqGrid("viewGridRow",m,j)}else{d.jgrid.viewModal("#"+p.themodal,{gbox:"#gbox_"+d.jgrid.jqID(s.p.id),jqm:true});d("#jqg_alrt").focus()}}return false}).hover(v,b),t=null);l.del&&(t=d("<td class='ui-pg-button ui-corner-all'></td>"),g=g||{},d(t).append("<div class='ui-pg-div'><span class='ui-icon "+l.delicon+"'></span>"+l.deltext+"</div>"),d("tr",u).append(t),d(t,u).attr({title:l.deltitle||"",id:g.id||"del_"+r}).click(function(){if(!d(this).hasClass("ui-state-disabled")){var m;if(s.p.multiselect){m=s.p.selarrrow;m.length===0&&(m=null)}else{m=s.p.selrow}if(m){d.isFunction(l.delfunc)?l.delfunc.call(s,m):d(s).jqGrid("delGridRow",m,g)}else{d.jgrid.viewModal("#"+p.themodal,{gbox:"#gbox_"+d.jgrid.jqID(s.p.id),jqm:true});d("#jqg_alrt").focus()}}return false}).hover(v,b),t=null);(l.add||l.edit||l.del||l.view)&&d("tr",u).append("<td class='ui-pg-button ui-state-disabled' style='width:4px;'><span class='ui-separator'></span></td>");l.search&&(t=d("<td class='ui-pg-button ui-corner-all'></td>"),f=f||{},d(t).append("<div class='ui-pg-div'><span class='ui-icon "+l.searchicon+"'></span>"+l.searchtext+"</div>"),d("tr",u).append(t),d(t,u).attr({title:l.searchtitle||"",id:f.id||"search_"+r}).click(function(){d(this).hasClass("ui-state-disabled")||(d.isFunction(l.searchfunc)?l.searchfunc.call(s,f):d(s).jqGrid("searchGrid",f));return false}).hover(v,b),f.showOnLoad&&!0===f.showOnLoad&&d(t,u).click(),t=null);l.refresh&&(t=d("<td class='ui-pg-button ui-corner-all'></td>"),d(t).append("<div class='ui-pg-div'><span class='ui-icon "+l.refreshicon+"'></span>"+l.refreshtext+"</div>"),d("tr",u).append(t),d(t,u).attr({title:l.refreshtitle||"",id:"refresh_"+r}).click(function(){if(!d(this).hasClass("ui-state-disabled")){d.isFunction(l.beforeRefresh)&&l.beforeRefresh.call(s);s.p.search=false;try{var m=s.p.id;s.p.postData.filters="";try{d("#fbox_"+d.jgrid.jqID(m)).jqFilter("resetFilter")}catch(o){}d.isFunction(s.clearToolbar)&&s.clearToolbar.call(s,false)}catch(n){}switch(l.refreshstate){case"firstpage":d(s).trigger("reloadGrid",[{page:1}]);break;case"current":d(s).trigger("reloadGrid",[{current:true}])}d.isFunction(l.afterRefresh)&&l.afterRefresh.call(s)}return false}).hover(v,b),t=null);t=d(".ui-jqgrid").css("font-size")||"11px";d("body").append("<div id='testpg2' class='ui-jqgrid ui-widget ui-widget-content' style='font-size:"+t+";visibility:hidden;' ></div>");t=d(u).clone().appendTo("#testpg2").width();d("#testpg2").remove();d(e+"_"+l.position,e).append(u);s.p._nvtd&&(t>s.p._nvtd[0]&&(d(e+"_"+l.position,e).width(t),s.p._nvtd[0]=t),s.p._nvtd[1]=t);u=t=t=null;this.nav=!0}}}})},navButtonAdd:function(a,e){e=d.extend({caption:"newButton",title:"",buttonicon:"ui-icon-newwin",onClickButton:null,position:"last",cursor:"pointer"},e||{});return this.each(function(){if(this.grid){"string"===typeof a&&0!==a.indexOf("#")&&(a="#"+d.jgrid.jqID(a));var g=d(".navtable",a)[0],f=this;if(g&&!(e.id&&void 0!==d("#"+d.jgrid.jqID(e.id),g)[0])){var b=d("<td></td>");"NONE"===e.buttonicon.toString().toUpperCase()?d(b).addClass("ui-pg-button ui-corner-all").append("<div class='ui-pg-div'>"+e.caption+"</div>"):d(b).addClass("ui-pg-button ui-corner-all").append("<div class='ui-pg-div'><span class='ui-icon "+e.buttonicon+"'></span>"+e.caption+"</div>");e.id&&d(b).attr("id",e.id);"first"===e.position?0===g.rows[0].cells.length?d("tr",g).append(b):d("tr td:eq(0)",g).before(b):d("tr",g).append(b);d(b,g).attr("title",e.title||"").click(function(h){d(this).hasClass("ui-state-disabled")||d.isFunction(e.onClickButton)&&e.onClickButton.call(f,h);return !1}).hover(function(){d(this).hasClass("ui-state-disabled")||d(this).addClass("ui-state-hover")},function(){d(this).removeClass("ui-state-hover")})}}})},navSeparatorAdd:function(a,e){e=d.extend({sepclass:"ui-separator",sepcontent:"",position:"last"},e||{});return this.each(function(){if(this.grid){"string"===typeof a&&0!==a.indexOf("#")&&(a="#"+d.jgrid.jqID(a));var f=d(".navtable",a)[0];if(f){var b="<td class='ui-pg-button ui-state-disabled' style='width:4px;'><span class='"+e.sepclass+"'></span>"+e.sepcontent+"</td>";"first"===e.position?0===f.rows[0].cells.length?d("tr",f).append(b):d("tr td:eq(0)",f).before(b):d("tr",f).append(b)}}})},GridToForm:function(a,e){return this.each(function(){var g=this,f;if(g.grid){var b=d(g).jqGrid("getRowData",a);if(b){for(f in b){b.hasOwnProperty(f)&&(d("[name="+d.jgrid.jqID(f)+"]",e).is("input:radio")||d("[name="+d.jgrid.jqID(f)+"]",e).is("input:checkbox")?d("[name="+d.jgrid.jqID(f)+"]",e).each(function(){if(d(this).val()==b[f]){d(this)[g.p.useProp?"prop":"attr"]("checked",!0)}else{d(this)[g.p.useProp?"prop":"attr"]("checked",!1)}}):d("[name="+d.jgrid.jqID(f)+"]",e).val(b[f]))}}}})},FormToGrid:function(a,h,g,f){return this.each(function(){if(this.grid){g||(g="set");f||(f="first");var e=d(h).serializeArray(),b={};d.each(e,function(j,i){b[i.name]=i.value});"add"===g?d(this).jqGrid("addRowData",a,b,f):"set"===g&&d(this).jqGrid("setRowData",a,b)}})}})})(jQuery);(function(b){b.fn.jqFilter=function(e){if("string"===typeof e){var a=b.fn.jqFilter[e];if(!a){throw"jqFilter - No such method: "+e}var c=b.makeArray(arguments).slice(1);return a.apply(this,c)}var f=b.extend(!0,{filter:null,columns:[],onChange:null,afterRedraw:null,checkValues:null,error:!1,errmsg:"",errorcheck:!0,showQuery:!0,sopt:null,ops:[],operands:null,numopts:"eq,ne,lt,le,gt,ge,nu,nn,in,ni".split(","),stropts:"eq,ne,bw,bn,ew,en,cn,nc,nu,nn,in,ni".split(","),strarr:["text","string","blob"],groupOps:[{op:"AND",text:"AND"},{op:"OR",text:"OR"}],groupButton:!0,ruleButtons:!0,direction:"ltr"},b.jgrid.filter,e||{});return this.each(function(){if(!this.filter){this.p=f;if(null===this.p.filter||void 0===this.p.filter){this.p.filter={groupOp:this.p.groupOps[0].op,rules:[],groups:[]}}var m,g=this.p.columns.length,k,i=/msie/i.test(navigator.userAgent)&&!window.opera;this.p.initFilter=b.extend(!0,{},this.p.filter);if(g){for(m=0;m<g;m++){if(k=this.p.columns[m],k.stype?k.inputtype=k.stype:k.inputtype||(k.inputtype="text"),k.sorttype?k.searchtype=k.sorttype:k.searchtype||(k.searchtype="string"),void 0===k.hidden&&(k.hidden=!1),k.label||(k.label=k.name),k.index&&(k.name=k.index),k.hasOwnProperty("searchoptions")||(k.searchoptions={}),!k.hasOwnProperty("searchrules")){k.searchrules={}}}this.p.showQuery&&b(this).append("<table class='queryresult ui-widget ui-widget-content' style='display:block;max-width:440px;border:0px none;' dir='"+this.p.direction+"'><tbody><tr><td class='query'></td></tr></tbody></table>");var h=function(){return b("#"+b.jgrid.jqID(f.id))[0]||null},j=function(o,n){var d=[!0,""],p=h();if(b.isFunction(n.searchrules)){d=n.searchrules.call(p,o,n)}else{if(b.jgrid&&b.jgrid.checkValues){try{d=b.jgrid.checkValues.call(p,o,-1,n.searchrules,n.label)}catch(l){}}}d&&d.length&&!1===d[0]&&(f.error=!d[0],f.errmsg=d[1])};this.onchange=function(){this.p.error=!1;this.p.errmsg="";return b.isFunction(this.p.onChange)?this.p.onChange.call(this,this.p):!1};this.reDraw=function(){b("table.group:first",this).remove();var d=this.createTableForGroup(f.filter,null);b(this).append(d);b.isFunction(this.p.afterRedraw)&&this.p.afterRedraw.call(this,this.p)};this.createTableForGroup=function(q,n){var v=this,u,l=b("<table class='group ui-widget ui-widget-content' style='border:0px none;'><tbody></tbody></table>"),s="left";"rtl"===this.p.direction&&(s="right",l.attr("dir","rtl"));null===n&&l.append("<tr class='error' style='display:none;'><th colspan='5' class='ui-state-error' align='"+s+"'></th></tr>");var p=b("<tr></tr>");l.append(p);s=b("<th colspan='5' align='"+s+"'></th>");p.append(s);if(!0===this.p.ruleButtons){var t=b("<select class='opsel'></select>");s.append(t);var p="",o;for(u=0;u<f.groupOps.length;u++){o=q.groupOp===v.p.groupOps[u].op?" selected='selected'":"",p+="<option value='"+v.p.groupOps[u].op+"'"+o+">"+v.p.groupOps[u].text+"</option>"}t.append(p).bind("change",function(){q.groupOp=b(t).val();v.onchange()})}p="<span></span>";this.p.groupButton&&(p=b("<input type='button' value='+ {}' title='Add subgroup' class='add-group'/>"),p.bind("click",function(){if(q.groups===void 0){q.groups=[]}q.groups.push({groupOp:f.groupOps[0].op,rules:[],groups:[]});v.reDraw();v.onchange();return false}));s.append(p);if(!0===this.p.ruleButtons){var p=b("<input type='button' value='+' title='Add rule' class='add-rule ui-add'/>"),r;p.bind("click",function(){if(q.rules===void 0){q.rules=[]}for(u=0;u<v.p.columns.length;u++){var w=v.p.columns[u].search===void 0?true:v.p.columns[u].search,d=v.p.columns[u].hidden===true;if(v.p.columns[u].searchoptions.searchhidden===true&&w||w&&!d){r=v.p.columns[u];break}}w=r.searchoptions.sopt?r.searchoptions.sopt:v.p.sopt?v.p.sopt:b.inArray(r.searchtype,v.p.strarr)!==-1?v.p.stropts:v.p.numopts;q.rules.push({field:r.name,op:w[0],data:""});v.reDraw();return false});s.append(p)}null!==n&&(p=b("<input type='button' value='-' title='Delete group' class='delete-group'/>"),s.append(p),p.bind("click",function(){for(u=0;u<n.groups.length;u++){if(n.groups[u]===q){n.groups.splice(u,1);break}}v.reDraw();v.onchange();return false}));if(void 0!==q.groups){for(u=0;u<q.groups.length;u++){s=b("<tr></tr>"),l.append(s),p=b("<td class='first'></td>"),s.append(p),p=b("<td colspan='4'></td>"),p.append(this.createTableForGroup(q.groups[u],q)),s.append(p)}}void 0===q.groupOp&&(q.groupOp=v.p.groupOps[0].op);if(void 0!==q.rules){for(u=0;u<q.rules.length;u++){l.append(this.createTableRowForRule(q.rules[u],q))}}return l};this.createTableRowForRule=function(C,z){var H=this,G=h(),y=b("<tr></tr>"),E,B,D,A,F="",u;y.append("<td class='first'></td>");var w=b("<td class='columns'></td>");y.append(w);var x=b("<select></select>"),v,t=[];w.append(x);x.bind("change",function(){C.field=b(x).val();D=b(this).parents("tr:first");for(E=0;E<H.p.columns.length;E++){if(H.p.columns[E].name===C.field){A=H.p.columns[E];break}}if(A){A.searchoptions.id=b.jgrid.randId();i&&"text"===A.inputtype&&!A.searchoptions.size&&(A.searchoptions.size=10);var p=b.jgrid.createEl.call(G,A.inputtype,A.searchoptions,"",!0,H.p.ajaxSelectOptions,!0);b(p).addClass("input-elm");B=A.searchoptions.sopt?A.searchoptions.sopt:H.p.sopt?H.p.sopt:-1!==b.inArray(A.searchtype,H.p.strarr)?H.p.stropts:H.p.numopts;var o="",l=0;t=[];b.each(H.p.ops,function(){t.push(this.oper)});for(E=0;E<B.length;E++){v=b.inArray(B[E],t),-1!==v&&(0===l&&(C.op=H.p.ops[v].oper),o+="<option value='"+H.p.ops[v].oper+"'>"+H.p.ops[v].text+"</option>",l++)}b(".selectopts",D).empty().append(o);b(".selectopts",D)[0].selectedIndex=0;b.jgrid.msie&&9>b.jgrid.msiever()&&(o=parseInt(b("select.selectopts",D)[0].offsetWidth,10)+1,b(".selectopts",D).width(o),b(".selectopts",D).css("width","auto"));b(".data",D).empty().append(p);b.jgrid.bindEv.call(G,p,A.searchoptions);b(".input-elm",D).bind("change",function(q){var r=b(this).hasClass("ui-autocomplete-input")?200:0;setTimeout(function(){var s=q.target;C.data=s.nodeName.toUpperCase()==="SPAN"&&A.searchoptions&&b.isFunction(A.searchoptions.custom_value)?A.searchoptions.custom_value.call(G,b(s).children(".customelement:first"),"get"):s.value;H.onchange()},r)});setTimeout(function(){C.data=b(p).val();H.onchange()},0)}});for(E=w=0;E<H.p.columns.length;E++){u=void 0===H.p.columns[E].search?!0:H.p.columns[E].search;var n=!0===H.p.columns[E].hidden;if(!0===H.p.columns[E].searchoptions.searchhidden&&u||u&&!n){u="",C.field===H.p.columns[E].name&&(u=" selected='selected'",w=E),F+="<option value='"+H.p.columns[E].name+"'"+u+">"+H.p.columns[E].label+"</option>"}}x.append(F);F=b("<td class='operators'></td>");y.append(F);A=f.columns[w];A.searchoptions.id=b.jgrid.randId();i&&"text"===A.inputtype&&!A.searchoptions.size&&(A.searchoptions.size=10);w=b.jgrid.createEl.call(G,A.inputtype,A.searchoptions,C.data,!0,H.p.ajaxSelectOptions,!0);if("nu"===C.op||"nn"===C.op){b(w).attr("readonly","true"),b(w).attr("disabled","true")}var I=b("<select class='selectopts'></select>");F.append(I);I.bind("change",function(){C.op=b(I).val();D=b(this).parents("tr:first");var d=b(".input-elm",D)[0];if(C.op==="nu"||C.op==="nn"){C.data="";d.value="";d.setAttribute("readonly","true");d.setAttribute("disabled","true")}else{d.removeAttribute("readonly");d.removeAttribute("disabled")}H.onchange()});B=A.searchoptions.sopt?A.searchoptions.sopt:H.p.sopt?H.p.sopt:-1!==b.inArray(A.searchtype,H.p.strarr)?H.p.stropts:H.p.numopts;F="";b.each(H.p.ops,function(){t.push(this.oper)});for(E=0;E<B.length;E++){v=b.inArray(B[E],t),-1!==v&&(u=C.op===H.p.ops[v].oper?" selected='selected'":"",F+="<option value='"+H.p.ops[v].oper+"'"+u+">"+H.p.ops[v].text+"</option>")}I.append(F);F=b("<td class='data'></td>");y.append(F);F.append(w);b.jgrid.bindEv.call(G,w,A.searchoptions);b(w).addClass("input-elm").bind("change",function(){C.data=A.inputtype==="custom"?A.searchoptions.custom_value.call(G,b(this).children(".customelement:first"),"get"):b(this).val();H.onchange()});F=b("<td></td>");y.append(F);!0===this.p.ruleButtons&&(w=b("<input type='button' value='-' title='Delete rule' class='delete-rule ui-del'/>"),F.append(w),w.bind("click",function(){for(E=0;E<z.rules.length;E++){if(z.rules[E]===C){z.rules.splice(E,1);break}}H.reDraw();H.onchange();return false}));return y};this.getStringForGroup=function(n){var p="(",l;if(void 0!==n.groups){for(l=0;l<n.groups.length;l++){1<p.length&&(p+=" "+n.groupOp+" ");try{p+=this.getStringForGroup(n.groups[l])}catch(q){alert(q)}}}if(void 0!==n.rules){try{for(l=0;l<n.rules.length;l++){1<p.length&&(p+=" "+n.groupOp+" "),p+=this.getStringForRule(n.rules[l])}}catch(o){alert(o)}}p+=")";return"()"===p?"":p};this.getStringForRule=function(p){var o="",l="",q,n;for(q=0;q<this.p.ops.length;q++){if(this.p.ops[q].oper===p.op){o=this.p.operands.hasOwnProperty(p.op)?this.p.operands[p.op]:"";l=this.p.ops[q].oper;break}}for(q=0;q<this.p.columns.length;q++){if(this.p.columns[q].name===p.field){n=this.p.columns[q];break}}if(void 0===n){return""}q=p.data;if("bw"===l||"bn"===l){q+="%"}if("ew"===l||"en"===l){q="%"+q}if("cn"===l||"nc"===l){q="%"+q+"%"}if("in"===l||"ni"===l){q=" ("+q+")"}f.errorcheck&&j(p.data,n);return -1!==b.inArray(n.searchtype,["int","integer","float","number","currency"])||"nn"===l||"nu"===l?p.field+" "+o+" "+q:p.field+" "+o+' "'+q+'"'};this.resetFilter=function(){this.p.filter=b.extend(!0,{},this.p.initFilter);this.reDraw();this.onchange()};this.hideError=function(){b("th.ui-state-error",this).html("");b("tr.error",this).hide()};this.showError=function(){b("th.ui-state-error",this).html(this.p.errmsg);b("tr.error",this).show()};this.toUserFriendlyString=function(){return this.getStringForGroup(f.filter)};this.toString=function(){function l(d){var s="(",q;if(void 0!==d.groups){for(q=0;q<d.groups.length;q++){1<s.length&&(s="OR"===d.groupOp?s+" || ":s+" && "),s+=l(d.groups[q])}}if(void 0!==d.rules){for(q=0;q<d.rules.length;q++){1<s.length&&(s="OR"===d.groupOp?s+" || ":s+" && ");var r=d.rules[q];if(n.p.errorcheck){for(var p=void 0,o=void 0,p=0;p<n.p.columns.length;p++){if(n.p.columns[p].name===r.field){o=n.p.columns[p];break}}o&&j(r.data,o)}s+=r.op+"(item."+r.field+",'"+r.data+"')"}}s+=")";return"()"===s?"":s}var n=this;return l(this.p.filter)};this.reDraw();if(this.p.showQuery){this.onchange()}this.filter=!0}}})};b.extend(b.fn.jqFilter,{toSQLString:function(){var c="";this.each(function(){c=this.toUserFriendlyString()});return c},filterData:function(){var c;this.each(function(){c=this.p.filter});return c},getParameter:function(c){return void 0!==c&&this.p.hasOwnProperty(c)?this.p[c]:this.p},resetFilter:function(){return this.each(function(){this.resetFilter()})},addFilter:function(a){"string"===typeof a&&(a=b.jgrid.parse(a));this.each(function(){this.p.filter=a;this.reDraw();this.onchange()})}})})(jQuery);(function(b){b.jgrid.inlineEdit=b.jgrid.inlineEdit||{};b.jgrid.extend({editRow:function(u,v,s,a,k,q,i,p,r){var m={},t=b.makeArray(arguments).slice(1);if("object"===b.type(t[0])){m=t[0]}else{if(void 0!==v&&(m.keys=v),b.isFunction(s)&&(m.oneditfunc=s),b.isFunction(a)&&(m.successfunc=a),void 0!==k&&(m.url=k),void 0!==q&&(m.extraparam=q),b.isFunction(i)&&(m.aftersavefunc=i),b.isFunction(p)&&(m.errorfunc=p),b.isFunction(r)){m.afterrestorefunc=r}}m=b.extend(!0,{keys:!1,oneditfunc:null,successfunc:null,url:null,extraparam:{},aftersavefunc:null,errorfunc:null,afterrestorefunc:null,restoreAfterError:!0,mtype:"POST"},b.jgrid.inlineEdit,m);return this.each(function(){var z=this,c,x,y=0,o=null,j={},w,n;if(z.grid&&(w=b(z).jqGrid("getInd",u,!0),!1!==w&&"0"===(b(w).attr("editable")||"0")&&!b(w).hasClass("not-editable-row"))){n=z.p.colModel,b('td[role="gridcell"]',w).each(function(h){c=n[h].name;var f=!0===z.p.treeGrid&&c===z.p.ExpandColumn;if(f){x=b("span:first",this).html()}else{try{x=b.unformat.call(z,this,{rowId:u,colModel:n[h]},h)}catch(l){x=n[h].edittype&&"textarea"===n[h].edittype?b(this).text():b(this).html()}}if("cb"!==c&&"subgrid"!==c&&"rn"!==c&&(z.p.autoencode&&(x=b.jgrid.htmlDecode(x)),j[c]=x,!0===n[h].editable)){null===o&&(o=h);f?b("span:first",this).html(""):b(this).html("");var d=b.extend({},n[h].editoptions||{},{id:u+"_"+c,name:c});n[h].edittype||(n[h].edittype="text");if("&nbsp;"===x||"&#160;"===x||1===x.length&&160===x.charCodeAt(0)){x=""}var e=b.jgrid.createEl.call(z,n[h].edittype,d,x,!0,b.extend({},b.jgrid.ajaxOptions,z.p.ajaxSelectOptions||{}));b(e).addClass("editable");f?b("span:first",this).append(e):b(this).append(e);b.jgrid.bindEv.call(z,e,d);"select"===n[h].edittype&&void 0!==n[h].editoptions&&!0===n[h].editoptions.multiple&&void 0===n[h].editoptions.dataUrl&&b.jgrid.msie&&b(e).width(b(e).width());y++}}),0<y&&(j.id=u,z.p.savedRow.push(j),b(w).attr("editable","1"),b("td:eq("+o+") input",w).focus(),!0===m.keys&&b(w).bind("keydown",function(h){if(27===h.keyCode){b(z).jqGrid("restoreRow",u,m.afterrestorefunc);if(z.p._inlinenav){try{b(z).jqGrid("showAddEditButtons")}catch(d){}}return !1}if(13===h.keyCode){if("TEXTAREA"===h.target.tagName){return !0}if(b(z).jqGrid("saveRow",u,m)&&z.p._inlinenav){try{b(z).jqGrid("showAddEditButtons")}catch(e){}}return !1}}),b(z).triggerHandler("jqGridInlineEditRow",[u,m]),b.isFunction(m.oneditfunc)&&m.oneditfunc.call(z,u))}})},saveRow:function(Q,R,O,E,H,M,F){var L=b.makeArray(arguments).slice(1),N={};if("object"===b.type(L[0])){N=L[0]}else{if(b.isFunction(R)&&(N.successfunc=R),void 0!==O&&(N.url=O),void 0!==E&&(N.extraparam=E),b.isFunction(H)&&(N.aftersavefunc=H),b.isFunction(M)&&(N.errorfunc=M),b.isFunction(F)){N.afterrestorefunc=F}}var N=b.extend(!0,{successfunc:null,url:null,extraparam:{},aftersavefunc:null,errorfunc:null,afterrestorefunc:null,restoreAfterError:!0,mtype:"POST"},b.jgrid.inlineEdit,N),J=!1,P=this[0],G,K={},v={},B={},z,A,C;if(!P.grid){return J}C=b(P).jqGrid("getInd",Q,!0);if(!1===C){return J}L=b(C).attr("editable");N.url=N.url||P.p.editurl;if("1"===L){var I;b('td[role="gridcell"]',C).each(function(i){I=P.p.colModel[i];G=I.name;if("cb"!==G&&"subgrid"!==G&&!0===I.editable&&"rn"!==G&&!b(this).hasClass("not-editable-cell")){switch(I.edittype){case"checkbox":var d=["Yes","No"];I.editoptions&&(d=I.editoptions.value.split(":"));K[G]=b("input",this).is(":checked")?d[0]:d[1];break;case"text":case"password":case"textarea":case"button":K[G]=b("input, textarea",this).val();break;case"select":if(I.editoptions.multiple){var d=b("select",this),f=[];K[G]=b(d).val();K[G]=K[G]?K[G].join(","):"";b("select option:selected",this).each(function(e,g){f[e]=b(g).text()});v[G]=f.join(",")}else{K[G]=b("select option:selected",this).val(),v[G]=b("select option:selected",this).text()}I.formatter&&"select"===I.formatter&&(v={});break;case"custom":try{if(I.editoptions&&b.isFunction(I.editoptions.custom_value)){if(K[G]=I.editoptions.custom_value.call(P,b(".customelement",this),"get"),void 0===K[G]){throw"e2"}}else{throw"e1"}}catch(h){"e1"===h&&b.jgrid.info_dialog(b.jgrid.errors.errcap,"function 'custom_value' "+b.jgrid.edit.msg.nodefined,b.jgrid.edit.bClose),"e2"===h?b.jgrid.info_dialog(b.jgrid.errors.errcap,"function 'custom_value' "+b.jgrid.edit.msg.novalue,b.jgrid.edit.bClose):b.jgrid.info_dialog(b.jgrid.errors.errcap,h.message,b.jgrid.edit.bClose)}}A=b.jgrid.checkValues.call(P,K[G],i);if(!1===A[0]){return A[1]=K[G]+" "+A[1],!1}P.p.autoencode&&(K[G]=b.jgrid.htmlEncode(K[G]));"clientArray"!==N.url&&I.editoptions&&!0===I.editoptions.NullIfEmpty&&""===K[G]&&(B[G]="null")}});if(!1===A[0]){try{var x=P.rows.namedItem(Q),D=b.jgrid.findPos(x);b.jgrid.info_dialog(b.jgrid.errors.errcap,A[1],b.jgrid.edit.bClose,{left:D[0],top:D[1]+b(x).outerHeight()})}catch(a){alert(A[1])}return J}L=P.p.prmNames;x=Q;D=!1===P.p.keyIndex?L.id:P.p.colModel[P.p.keyIndex+(!0===P.p.rownumbers?1:0)+(!0===P.p.multiselect?1:0)+(!0===P.p.subGrid?1:0)].name;if(K){K[L.oper]=L.editoper;if(void 0===K[D]||""===K[D]){K[D]=Q}else{if(C.id!==P.p.idPrefix+K[D]&&(L=b.jgrid.stripPref(P.p.idPrefix,Q),void 0!==P.p._index[L]&&(P.p._index[K[D]]=P.p._index[L],delete P.p._index[L]),Q=P.p.idPrefix+K[D],b(C).attr("id",Q),P.p.selrow===x&&(P.p.selrow=Q),b.isArray(P.p.selarrrow)&&(L=b.inArray(x,P.p.selarrrow),0<=L&&(P.p.selarrrow[L]=Q)),P.p.multiselect)){L="jqg_"+P.p.id+"_"+Q,b("input.cbox",C).attr("id",L).attr("name",L)}}void 0===P.p.inlineData&&(P.p.inlineData={});K=b.extend({},K,P.p.inlineData,N.extraparam)}if("clientArray"===N.url){K=b.extend({},K,v);P.p.autoencode&&b.each(K,function(e,f){K[e]=b.jgrid.htmlDecode(f)});L=b(P).jqGrid("setRowData",Q,K);b(C).attr("editable","0");for(D=0;D<P.p.savedRow.length;D++){if(""+P.p.savedRow[D].id===""+x){z=D;break}}0<=z&&P.p.savedRow.splice(z,1);b(P).triggerHandler("jqGridInlineAfterSaveRow",[Q,L,K,N]);b.isFunction(N.aftersavefunc)&&N.aftersavefunc.call(P,Q,L,N);J=!0;b(C).removeClass("jqgrid-new-row").unbind("keydown")}else{b("#lui_"+b.jgrid.jqID(P.p.id)).show(),B=b.extend({},K,B),B[D]=b.jgrid.stripPref(P.p.idPrefix,B[D]),b.ajax(b.extend({url:N.url,data:b.isFunction(P.p.serializeRowData)?P.p.serializeRowData.call(P,B):B,type:N.mtype,async:!1,complete:function(c,f){b("#lui_"+b.jgrid.jqID(P.p.id)).hide();if("success"===f){var i=!0,d;d=b(P).triggerHandler("jqGridInlineSuccessSaveRow",[c,Q,N]);b.isArray(d)||(d=[!0,K]);d[0]&&b.isFunction(N.successfunc)&&(d=N.successfunc.call(P,c));b.isArray(d)?(i=d[0],K=d[1]||K):i=d;if(!0===i){P.p.autoencode&&b.each(K,function(e,g){K[e]=b.jgrid.htmlDecode(g)});K=b.extend({},K,v);b(P).jqGrid("setRowData",Q,K);b(C).attr("editable","0");for(i=0;i<P.p.savedRow.length;i++){if(""+P.p.savedRow[i].id===""+Q){z=i;break}}0<=z&&P.p.savedRow.splice(z,1);b(P).triggerHandler("jqGridInlineAfterSaveRow",[Q,c,K,N]);b.isFunction(N.aftersavefunc)&&N.aftersavefunc.call(P,Q,c);J=!0;b(C).removeClass("jqgrid-new-row").unbind("keydown")}else{b(P).triggerHandler("jqGridInlineErrorSaveRow",[Q,c,f,null,N]),b.isFunction(N.errorfunc)&&N.errorfunc.call(P,Q,c,f,null),!0===N.restoreAfterError&&b(P).jqGrid("restoreRow",Q,N.afterrestorefunc)}}},error:function(c,i,f){b("#lui_"+b.jgrid.jqID(P.p.id)).hide();b(P).triggerHandler("jqGridInlineErrorSaveRow",[Q,c,i,f,N]);if(b.isFunction(N.errorfunc)){N.errorfunc.call(P,Q,c,i,f)}else{c=c.responseText||c.statusText;try{b.jgrid.info_dialog(b.jgrid.errors.errcap,'<div class="ui-state-error">'+c+"</div>",b.jgrid.edit.bClose,{buttonalign:"right"})}catch(d){alert(c)}}!0===N.restoreAfterError&&b(P).jqGrid("restoreRow",Q,N.afterrestorefunc)}},b.jgrid.ajaxOptions,P.p.ajaxRowOptions||{}))}}return J},restoreRow:function(g,a){var d=b.makeArray(arguments).slice(1),f={};"object"===b.type(d[0])?f=d[0]:b.isFunction(a)&&(f.afterrestorefunc=a);f=b.extend(!0,{},b.jgrid.inlineEdit,f);return this.each(function(){var c=this,m,o,k={},l;if(c.grid){o=b(c).jqGrid("getInd",g,true);if(o!==false){for(l=0;l<c.p.savedRow.length;l++){if(""+c.p.savedRow[l].id===""+g){m=l;break}}if(m>=0){if(b.isFunction(b.fn.datepicker)){try{b("input.hasDatepicker","#"+b.jgrid.jqID(o.id)).datepicker("hide")}catch(i){}}b.each(c.p.colModel,function(){this.editable===true&&c.p.savedRow[m].hasOwnProperty(this.name)&&(k[this.name]=c.p.savedRow[m][this.name])});b(c).jqGrid("setRowData",g,k);b(o).attr("editable","0").unbind("keydown");c.p.savedRow.splice(m,1);b("#"+b.jgrid.jqID(g),"#"+b.jgrid.jqID(c.p.id)).hasClass("jqgrid-new-row")&&setTimeout(function(){b(c).jqGrid("delRowData",g);b(c).jqGrid("showAddEditButtons")},0)}b(c).triggerHandler("jqGridInlineAfterRestoreRow",[g]);b.isFunction(f.afterrestorefunc)&&f.afterrestorefunc.call(c,g)}}})},addRow:function(a){a=b.extend(!0,{rowID:null,initdata:{},position:"first",useDefValues:!0,useFormatter:!1,addRowParams:{extraparam:{}}},a||{});return this.each(function(){if(this.grid){var c=this;a.rowID=b.isFunction(a.rowID)?a.rowID.call(c,a):null!=a.rowID?a.rowID:b.jgrid.randId();!0===a.useDefValues&&b(c.p.colModel).each(function(){if(this.editoptions&&this.editoptions.defaultValue){var f=this.editoptions.defaultValue,f=b.isFunction(f)?f.call(c):f;a.initdata[this.name]=f}});b(c).jqGrid("addRowData",a.rowID,a.initdata,a.position);a.rowID=c.p.idPrefix+a.rowID;b("#"+b.jgrid.jqID(a.rowID),"#"+b.jgrid.jqID(c.p.id)).addClass("jqgrid-new-row");if(a.useFormatter){b("#"+b.jgrid.jqID(a.rowID)+" .ui-inline-edit","#"+b.jgrid.jqID(c.p.id)).click()}else{var d=c.p.prmNames;a.addRowParams.extraparam[d.oper]=d.addoper;b(c).jqGrid("editRow",a.rowID,a.addRowParams);b(c).jqGrid("setSelection",a.rowID)}}})},inlineNav:function(d,a){a=b.extend(!0,{edit:!0,editicon:"ui-icon-pencil",add:!0,addicon:"ui-icon-plus",save:!0,saveicon:"ui-icon-disk",cancel:!0,cancelicon:"ui-icon-cancel",addParams:{addRowParams:{extraparam:{}}},editParams:{},restoreAfterSelect:!0},b.jgrid.nav,a||{});return this.each(function(){if(this.grid){var h=this,i,c=b.jgrid.jqID(h.p.id);h.p._inlinenav=!0;if(!0===a.addParams.useFormatter){var f=h.p.colModel,j;for(j=0;j<f.length;j++){if(f[j].formatter&&"actions"===f[j].formatter){f[j].formatoptions&&(f=b.extend({keys:!1,onEdit:null,onSuccess:null,afterSave:null,onError:null,afterRestore:null,extraparam:{},url:null},f[j].formatoptions),a.addParams.addRowParams={keys:f.keys,oneditfunc:f.onEdit,successfunc:f.onSuccess,url:f.url,extraparam:f.extraparam,aftersavefunc:f.afterSave,errorfunc:f.onError,afterrestorefunc:f.afterRestore});break}}}a.add&&b(h).jqGrid("navButtonAdd",d,{caption:a.addtext,title:a.addtitle,buttonicon:a.addicon,id:h.p.id+"_iladd",onClickButton:function(){b(h).jqGrid("addRow",a.addParams);a.addParams.useFormatter||(b("#"+c+"_ilsave").removeClass("ui-state-disabled"),b("#"+c+"_ilcancel").removeClass("ui-state-disabled"),b("#"+c+"_iladd").addClass("ui-state-disabled"),b("#"+c+"_iledit").addClass("ui-state-disabled"))}});a.edit&&b(h).jqGrid("navButtonAdd",d,{caption:a.edittext,title:a.edittitle,buttonicon:a.editicon,id:h.p.id+"_iledit",onClickButton:function(){var e=b(h).jqGrid("getGridParam","selrow");e?(b(h).jqGrid("editRow",e,a.editParams),b("#"+c+"_ilsave").removeClass("ui-state-disabled"),b("#"+c+"_ilcancel").removeClass("ui-state-disabled"),b("#"+c+"_iladd").addClass("ui-state-disabled"),b("#"+c+"_iledit").addClass("ui-state-disabled")):(b.jgrid.viewModal("#alertmod",{gbox:"#gbox_"+c,jqm:!0}),b("#jqg_alrt").focus())}});a.save&&(b(h).jqGrid("navButtonAdd",d,{caption:a.savetext||"",title:a.savetitle||"Save row",buttonicon:a.saveicon,id:h.p.id+"_ilsave",onClickButton:function(){var m=h.p.savedRow[0].id;if(m){var k=h.p.prmNames,e=k.oper,l={};b("#"+b.jgrid.jqID(m),"#"+c).hasClass("jqgrid-new-row")?(a.addParams.addRowParams.extraparam[e]=k.addoper,l=a.addParams.addRowParams):(a.editParams.extraparam||(a.editParams.extraparam={}),a.editParams.extraparam[e]=k.editoper,l=a.editParams);b(h).jqGrid("saveRow",m,l)&&b(h).jqGrid("showAddEditButtons")}else{b.jgrid.viewModal("#alertmod",{gbox:"#gbox_"+c,jqm:!0}),b("#jqg_alrt").focus()}}}),b("#"+c+"_ilsave").addClass("ui-state-disabled"));a.cancel&&(b(h).jqGrid("navButtonAdd",d,{caption:a.canceltext||"",title:a.canceltitle||"Cancel row editing",buttonicon:a.cancelicon,id:h.p.id+"_ilcancel",onClickButton:function(){var g=h.p.savedRow[0].id,e={};if(g){e=b("#"+b.jgrid.jqID(g),"#"+c).hasClass("jqgrid-new-row")?a.addParams.addRowParams:a.editParams;b(h).jqGrid("restoreRow",g,e);b(h).jqGrid("showAddEditButtons")}else{b.jgrid.viewModal("#alertmod",{gbox:"#gbox_"+c,jqm:true});b("#jqg_alrt").focus()}}}),b("#"+c+"_ilcancel").addClass("ui-state-disabled"));!0===a.restoreAfterSelect&&(i=b.isFunction(h.p.beforeSelectRow)?h.p.beforeSelectRow:!1,h.p.beforeSelectRow=function(l,k){var e=true;if(h.p.savedRow.length>0&&h.p._inlinenav===true&&l!==h.p.selrow&&h.p.selrow!==null){h.p.selrow===a.addParams.rowID?b(h).jqGrid("delRowData",h.p.selrow):b(h).jqGrid("restoreRow",h.p.selrow,a.editParams);b(h).jqGrid("showAddEditButtons")}i&&(e=i.call(h,l,k));return e})}})},showAddEditButtons:function(){return this.each(function(){if(this.grid){var a=b.jgrid.jqID(this.p.id);b("#"+a+"_ilsave").addClass("ui-state-disabled");b("#"+a+"_ilcancel").addClass("ui-state-disabled");b("#"+a+"_iladd").removeClass("ui-state-disabled");b("#"+a+"_iledit").removeClass("ui-state-disabled")}})}})})(jQuery);(function(a){a.jgrid.extend({editCell:function(e,c,b){return this.each(function(){var r=this,o,p,m,l;if(r.grid&&!0===r.p.cellEdit){c=parseInt(c,10);r.p.selrow=r.rows[e].id;r.p.knv||a(r).jqGrid("GridNav");if(0<r.p.savedRow.length){if(!0===b&&e==r.p.iRow&&c==r.p.iCol){return}a(r).jqGrid("saveCell",r.p.savedRow[0].id,r.p.savedRow[0].ic)}else{window.setTimeout(function(){a("#"+a.jgrid.jqID(r.p.knv)).attr("tabindex","-1").focus()},0)}l=r.p.colModel[c];o=l.name;if(!("subgrid"===o||"cb"===o||"rn"===o)){m=a("td:eq("+c+")",r.rows[e]);if(!0===l.editable&&!0===b&&!m.hasClass("not-editable-cell")){0<=parseInt(r.p.iCol,10)&&0<=parseInt(r.p.iRow,10)&&(a("td:eq("+r.p.iCol+")",r.rows[r.p.iRow]).removeClass("edit-cell ui-state-highlight"),a(r.rows[r.p.iRow]).removeClass("selected-row ui-state-hover"));a(m).addClass("edit-cell ui-state-highlight");a(r.rows[e]).addClass("selected-row ui-state-hover");try{p=a.unformat.call(r,m,{rowId:r.rows[e].id,colModel:l},c)}catch(d){p=l.edittype&&"textarea"===l.edittype?a(m).text():a(m).html()}r.p.autoencode&&(p=a.jgrid.htmlDecode(p));l.edittype||(l.edittype="text");r.p.savedRow.push({id:e,ic:c,name:o,v:p});if("&nbsp;"===p||"&#160;"===p||1===p.length&&160===p.charCodeAt(0)){p=""}if(a.isFunction(r.p.formatCell)){var f=r.p.formatCell.call(r,r.rows[e].id,o,p,e,c);void 0!==f&&(p=f)}var f=a.extend({},l.editoptions||{},{id:e+"_"+o,name:o}),q=a.jgrid.createEl.call(r,l.edittype,f,p,!0,a.extend({},a.jgrid.ajaxOptions,r.p.ajaxSelectOptions||{}));a(r).triggerHandler("jqGridBeforeEditCell",[r.rows[e].id,o,p,e,c]);a.isFunction(r.p.beforeEditCell)&&r.p.beforeEditCell.call(r,r.rows[e].id,o,p,e,c);a(m).html("").append(q).attr("tabindex","0");a.jgrid.bindEv.call(r,q,f);window.setTimeout(function(){a(q).focus()},0);a("input, select, textarea",m).bind("keydown",function(g){g.keyCode===27&&(a("input.hasDatepicker",m).length>0?a(".ui-datepicker").is(":hidden")?a(r).jqGrid("restoreCell",e,c):a("input.hasDatepicker",m).datepicker("hide"):a(r).jqGrid("restoreCell",e,c));if(g.keyCode===13){a(r).jqGrid("saveCell",e,c);return false}if(g.keyCode===9){if(r.grid.hDiv.loading){return false}g.shiftKey?a(r).jqGrid("prevCell",e,c):a(r).jqGrid("nextCell",e,c)}g.stopPropagation()});a(r).triggerHandler("jqGridAfterEditCell",[r.rows[e].id,o,p,e,c]);a.isFunction(r.p.afterEditCell)&&r.p.afterEditCell.call(r,r.rows[e].id,o,p,e,c)}else{0<=parseInt(r.p.iCol,10)&&0<=parseInt(r.p.iRow,10)&&(a("td:eq("+r.p.iCol+")",r.rows[r.p.iRow]).removeClass("edit-cell ui-state-highlight"),a(r.rows[r.p.iRow]).removeClass("selected-row ui-state-hover")),m.addClass("edit-cell ui-state-highlight"),a(r.rows[e]).addClass("selected-row ui-state-hover"),p=m.html().replace(/\&#160\;/ig,""),a(r).triggerHandler("jqGridSelectCell",[r.rows[e].id,o,p,e,c]),a.isFunction(r.p.onSelectCell)&&r.p.onSelectCell.call(r,r.rows[e].id,o,p,e,c)}r.p.iCol=c;r.p.iRow=e}}})},saveCell:function(c,b){return this.each(function(){var E=this,D;if(E.grid&&!0===E.p.cellEdit){D=1<=E.p.savedRow.length?0:null;if(null!==D){var B=a("td:eq("+b+")",E.rows[c]),C,A,z=E.p.colModel[b],x=z.name,y=a.jgrid.jqID(x);switch(z.edittype){case"select":if(z.editoptions.multiple){var y=a("#"+c+"_"+y,E.rows[c]),u=[];(C=a(y).val())?C.join(","):C="";a("option:selected",y).each(function(e,g){u[e]=a(g).text()});A=u.join(",")}else{C=a("#"+c+"_"+y+" option:selected",E.rows[c]).val(),A=a("#"+c+"_"+y+" option:selected",E.rows[c]).text()}z.formatter&&(A=C);break;case"checkbox":var w=["Yes","No"];z.editoptions&&(w=z.editoptions.value.split(":"));A=C=a("#"+c+"_"+y,E.rows[c]).is(":checked")?w[0]:w[1];break;case"password":case"text":case"textarea":case"button":A=C=a("#"+c+"_"+y,E.rows[c]).val();break;case"custom":try{if(z.editoptions&&a.isFunction(z.editoptions.custom_value)){C=z.editoptions.custom_value.call(E,a(".customelement",B),"get");if(void 0===C){throw"e2"}A=C}else{throw"e1"}}catch(t){"e1"===t&&a.jgrid.info_dialog(a.jgrid.errors.errcap,"function 'custom_value' "+a.jgrid.edit.msg.nodefined,a.jgrid.edit.bClose),"e2"===t?a.jgrid.info_dialog(a.jgrid.errors.errcap,"function 'custom_value' "+a.jgrid.edit.msg.novalue,a.jgrid.edit.bClose):a.jgrid.info_dialog(a.jgrid.errors.errcap,t.message,a.jgrid.edit.bClose)}}if(A!==E.p.savedRow[D].v){if(D=a(E).triggerHandler("jqGridBeforeSaveCell",[E.rows[c].id,x,C,c,b])){A=C=D}if(a.isFunction(E.p.beforeSaveCell)&&(D=E.p.beforeSaveCell.call(E,E.rows[c].id,x,C,c,b))){A=C=D}var s=a.jgrid.checkValues.call(E,C,b);if(!0===s[0]){D=a(E).triggerHandler("jqGridBeforeSubmitCell",[E.rows[c].id,x,C,c,b])||{};a.isFunction(E.p.beforeSubmitCell)&&((D=E.p.beforeSubmitCell.call(E,E.rows[c].id,x,C,c,b))||(D={}));0<a("input.hasDatepicker",B).length&&a("input.hasDatepicker",B).datepicker("hide");if("remote"===E.p.cellsubmit){if(E.p.cellurl){var v={};E.p.autoencode&&(C=a.jgrid.htmlEncode(C));v[x]=C;w=E.p.prmNames;z=w.id;y=w.oper;v[z]=a.jgrid.stripPref(E.p.idPrefix,E.rows[c].id);v[y]=w.editoper;v=a.extend(D,v);a("#lui_"+a.jgrid.jqID(E.p.id)).show();E.grid.hDiv.loading=!0;a.ajax(a.extend({url:E.p.cellurl,data:a.isFunction(E.p.serializeCellData)?E.p.serializeCellData.call(E,v):v,type:"POST",complete:function(h,g){a("#lui_"+E.p.id).hide();E.grid.hDiv.loading=false;if(g==="success"){var e=a(E).triggerHandler("jqGridAfterSubmitCell",[E,h,v.id,x,C,c,b])||[true,""];e[0]===true&&a.isFunction(E.p.afterSubmitCell)&&(e=E.p.afterSubmitCell.call(E,h,v.id,x,C,c,b));if(e[0]===true){a(B).empty();a(E).jqGrid("setCell",E.rows[c].id,b,A,false,false,true);a(B).addClass("dirty-cell");a(E.rows[c]).addClass("edited");a(E).triggerHandler("jqGridAfterSaveCell",[E.rows[c].id,x,C,c,b]);a.isFunction(E.p.afterSaveCell)&&E.p.afterSaveCell.call(E,E.rows[c].id,x,C,c,b);E.p.savedRow.splice(0,1)}else{a.jgrid.info_dialog(a.jgrid.errors.errcap,e[1],a.jgrid.edit.bClose);a(E).jqGrid("restoreCell",c,b)}}},error:function(j,i,g){a("#lui_"+a.jgrid.jqID(E.p.id)).hide();E.grid.hDiv.loading=false;a(E).triggerHandler("jqGridErrorCell",[j,i,g]);a.isFunction(E.p.errorCell)?E.p.errorCell.call(E,j,i,g):a.jgrid.info_dialog(a.jgrid.errors.errcap,j.status+" : "+j.statusText+"<br/>"+i,a.jgrid.edit.bClose);a(E).jqGrid("restoreCell",c,b)}},a.jgrid.ajaxOptions,E.p.ajaxCellOptions||{}))}else{try{a.jgrid.info_dialog(a.jgrid.errors.errcap,a.jgrid.errors.nourl,a.jgrid.edit.bClose),a(E).jqGrid("restoreCell",c,b)}catch(f){}}}"clientArray"===E.p.cellsubmit&&(a(B).empty(),a(E).jqGrid("setCell",E.rows[c].id,b,A,!1,!1,!0),a(B).addClass("dirty-cell"),a(E.rows[c]).addClass("edited"),a(E).triggerHandler("jqGridAfterSaveCell",[E.rows[c].id,x,C,c,b]),a.isFunction(E.p.afterSaveCell)&&E.p.afterSaveCell.call(E,E.rows[c].id,x,C,c,b),E.p.savedRow.splice(0,1))}else{try{window.setTimeout(function(){a.jgrid.info_dialog(a.jgrid.errors.errcap,C+" "+s[1],a.jgrid.edit.bClose)},100),a(E).jqGrid("restoreCell",c,b)}catch(d){}}}else{a(E).jqGrid("restoreCell",c,b)}}window.setTimeout(function(){a("#"+a.jgrid.jqID(E.p.knv)).attr("tabindex","-1").focus()},0)}})},restoreCell:function(c,b){return this.each(function(){var d=this,i;if(d.grid&&!0===d.p.cellEdit){i=1<=d.p.savedRow.length?0:null;if(null!==i){var f=a("td:eq("+b+")",d.rows[c]);if(a.isFunction(a.fn.datepicker)){try{a("input.hasDatepicker",f).datepicker("hide")}catch(h){}}a(f).empty().attr("tabindex","-1");a(d).jqGrid("setCell",d.rows[c].id,b,d.p.savedRow[i].v,!1,!1,!0);a(d).triggerHandler("jqGridAfterRestoreCell",[d.rows[c].id,d.p.savedRow[i].v,c,b]);a.isFunction(d.p.afterRestoreCell)&&d.p.afterRestoreCell.call(d,d.rows[c].id,d.p.savedRow[i].v,c,b);d.p.savedRow.splice(0,1)}window.setTimeout(function(){a("#"+d.p.knv).attr("tabindex","-1").focus()},0)}})},nextCell:function(c,b){return this.each(function(){var d=!1,e;if(this.grid&&!0===this.p.cellEdit){for(e=b+1;e<this.p.colModel.length;e++){if(!0===this.p.colModel[e].editable){d=e;break}}!1!==d?a(this).jqGrid("editCell",c,d,!0):0<this.p.savedRow.length&&a(this).jqGrid("saveCell",c,b)}})},prevCell:function(c,b){return this.each(function(){var d=!1,e;if(this.grid&&!0===this.p.cellEdit){for(e=b-1;0<=e;e--){if(!0===this.p.colModel[e].editable){d=e;break}}!1!==d?a(this).jqGrid("editCell",c,d,!0):0<this.p.savedRow.length&&a(this).jqGrid("saveCell",c,b)}})},GridNav:function(){return this.each(function(){function k(t,s,q){if("v"===q.substr(0,1)){var p=a(b.grid.bDiv)[0].clientHeight,n=a(b.grid.bDiv)[0].scrollTop,m=b.rows[t].offsetTop+b.rows[t].clientHeight,r=b.rows[t].offsetTop;"vd"===q&&m>=p&&(a(b.grid.bDiv)[0].scrollTop=a(b.grid.bDiv)[0].scrollTop+b.rows[t].clientHeight);"vu"===q&&r<n&&(a(b.grid.bDiv)[0].scrollTop=a(b.grid.bDiv)[0].scrollTop-b.rows[t].clientHeight)}"h"===q&&(q=a(b.grid.bDiv)[0].clientWidth,p=a(b.grid.bDiv)[0].scrollLeft,n=b.rows[t].cells[s].offsetLeft,b.rows[t].cells[s].offsetLeft+b.rows[t].cells[s].clientWidth>=q+parseInt(p,10)?a(b.grid.bDiv)[0].scrollLeft=a(b.grid.bDiv)[0].scrollLeft+b.rows[t].cells[s].clientWidth:n<p&&(a(b.grid.bDiv)[0].scrollLeft=a(b.grid.bDiv)[0].scrollLeft-b.rows[t].cells[s].clientWidth))}function i(f,n){var m,g;if("lft"===n){m=f+1;for(g=f;0<=g;g--){if(!0!==b.p.colModel[g].hidden){m=g;break}}}if("rgt"===n){m=f-1;for(g=f;g<b.p.colModel.length;g++){if(!0!==b.p.colModel[g].hidden){m=g;break}}}return m}var b=this;if(b.grid&&!0===b.p.cellEdit){b.p.knv=b.p.id+"_kn";var l=a("<div style='position:fixed;top:0px;width:1px;height:1px;' tabindex='0'><div tabindex='-1' style='width:1px;height:1px;' id='"+b.p.knv+"'></div></div>"),h,j;a(l).insertBefore(b.grid.cDiv);a("#"+b.p.knv).focus().keydown(function(d){j=d.keyCode;"rtl"===b.p.direction&&(37===j?j=39:39===j&&(j=37));switch(j){case 38:0<b.p.iRow-1&&(k(b.p.iRow-1,b.p.iCol,"vu"),a(b).jqGrid("editCell",b.p.iRow-1,b.p.iCol,!1));break;case 40:b.p.iRow+1<=b.rows.length-1&&(k(b.p.iRow+1,b.p.iCol,"vd"),a(b).jqGrid("editCell",b.p.iRow+1,b.p.iCol,!1));break;case 37:0<=b.p.iCol-1&&(h=i(b.p.iCol-1,"lft"),k(b.p.iRow,h,"h"),a(b).jqGrid("editCell",b.p.iRow,h,!1));break;case 39:b.p.iCol+1<=b.p.colModel.length-1&&(h=i(b.p.iCol+1,"rgt"),k(b.p.iRow,h,"h"),a(b).jqGrid("editCell",b.p.iRow,h,!1));break;case 13:0<=parseInt(b.p.iCol,10)&&0<=parseInt(b.p.iRow,10)&&a(b).jqGrid("editCell",b.p.iRow,b.p.iCol,!0);break;default:return !0}return !1})}})},getChangedCells:function(c){var b=[];c||(c="all");this.each(function(){var d=this,e;d.grid&&!0===d.p.cellEdit&&a(d.rows).each(function(f){var h={};a(this).hasClass("edited")&&(a("td",this).each(function(l){e=d.p.colModel[l].name;if("cb"!==e&&"subgrid"!==e){if("dirty"===c){if(a(this).hasClass("dirty-cell")){try{h[e]=a.unformat.call(d,this,{rowId:d.rows[f].id,colModel:d.p.colModel[l]},l)}catch(j){h[e]=a.jgrid.htmlDecode(a(this).html())}}}else{try{h[e]=a.unformat.call(d,this,{rowId:d.rows[f].id,colModel:d.p.colModel[l]},l)}catch(g){h[e]=a.jgrid.htmlDecode(a(this).html())}}}}),h.id=this.id,b.push(h))})});return b}})})(jQuery);(function(r){r.fn.jqm=function(c){var d={overlay:50,closeoverlay:!0,overlayClass:"jqmOverlay",closeClass:"jqmClose",trigger:".jqModal",ajax:q,ajaxText:"",target:q,modal:q,toTop:q,onShow:q,onHide:q,onLoad:q};return this.each(function(){if(this._jqm){return i[this._jqm].c=r.extend({},i[this._jqm].c,c)}g++;this._jqm=g;i[g]={c:r.extend(d,r.jqm.params,c),a:q,w:r(this).addClass("jqmID"+g),s:g};d.trigger&&r(this).jqmAddTrigger(d.trigger)})};r.fn.jqmAddClose=function(c){return b(this,c,"jqmHide")};r.fn.jqmAddTrigger=function(c){return b(this,c,"jqmShow")};r.fn.jqmShow=function(c){return this.each(function(){r.jqm.open(this._jqm,c)})};r.fn.jqmHide=function(c){return this.each(function(){r.jqm.close(this._jqm,c)})};r.jqm={hash:{},open:function(d,j){var c=i[d],n=c.c,k="."+n.closeClass,m=parseInt(c.w.css("z-index")),m=0<m?m:3000,l=r("<div></div>").css({height:"100%",width:"100%",position:"fixed",left:0,top:0,"z-index":m-1,opacity:n.overlay/100});if(c.a){return q}c.t=j;c.a=!0;c.w.css("z-index",m);n.modal?(h[0]||setTimeout(function(){a("bind")},1),h.push(d)):0<n.overlay?n.closeoverlay&&c.w.jqmAddClose(l):l=q;c.o=l?l.addClass(n.overlayClass).prependTo("body"):q;n.ajax?(m=n.target||c.w,l=n.ajax,m="string"==typeof m?r(m,c.w):r(m),l="@"==l.substr(0,1)?r(j).attr(l.substring(1)):l,m.html(n.ajaxText).load(l,function(){n.onLoad&&n.onLoad.call(this,c);k&&c.w.jqmAddClose(r(k,c.w));f(c)})):k&&c.w.jqmAddClose(r(k,c.w));n.toTop&&c.o&&c.w.before('<span id="jqmP'+c.w[0]._jqm+'"></span>').insertAfter(c.o);n.onShow?n.onShow(c):c.w.show();f(c);return q},close:function(c){c=i[c];if(!c.a){return q}c.a=q;h[0]&&(h.pop(),h[0]||a("unbind"));c.c.toTop&&c.o&&r("#jqmP"+c.w[0]._jqm).after(c.w).remove();if(c.c.onHide){c.c.onHide(c)}else{c.w.hide(),c.o&&c.o.remove()}return q},params:{}};var g=0,i=r.jqm.hash,h=[],q=!1,f=function(c){try{r(":input:visible",c.w)[0].focus()}catch(j){}},a=function(c){r(document)[c]("keypress",e)[c]("keydown",e)[c]("mousedown",e)},e=function(j){var k=i[h[h.length-1]],c=!r(j.target).parents(".jqmID"+k.s)[0];c&&(r(".jqmID"+k.s).each(function(){var m=r(this),l=m.offset();if(l.top<=j.pageY&&j.pageY<=l.top+m.height()&&l.left<=j.pageX&&j.pageX<=l.left+m.width()){return c=!1}}),f(k));return !c},b=function(d,j,c){return d.each(function(){var k=this._jqm;r(j).each(function(){this[c]||(this[c]=[],r(this).click(function(){for(var m in {jqmShow:1,jqmHide:1}){for(var l in this[m]){if(i[this[m][l]]){i[this[m][l]].w[m](this)}}}return q}));this[c].push(k)})})}})(jQuery);(function(r){r.fn.jqDrag=function(b){return l(this,b,"d")};r.fn.jqResize=function(d,c){return l(this,d,"r",c)};r.jqDnR={dnr:{},e:0,drag:function(b){"d"==p.k?o.css({left:p.X+b.pageX-p.pX,top:p.Y+b.pageY-p.pY}):(o.css({width:Math.max(b.pageX-p.pX+p.W,0),height:Math.max(b.pageY-p.pY+p.H,0)}),n&&m.css({width:Math.max(b.pageX-n.pX+n.W,0),height:Math.max(b.pageY-n.pY+n.H,0)}));return !1},stop:function(){r(document).unbind("mousemove",q.drag).unbind("mouseup",q.stop)}};var q=r.jqDnR,p=q.dnr,o=q.e,m,n,l=function(d,f,e,b){return d.each(function(){f=f?r(f,d):d;f.bind("mousedown",{e:d,k:e},function(j){var t=j.data,k={};o=t.e;m=b?r(b):!1;if("relative"!=o.css("position")){try{o.position(k)}catch(s){}}p={X:k.left||i("left")||0,Y:k.top||i("top")||0,W:i("width")||o[0].scrollWidth||0,H:i("height")||o[0].scrollHeight||0,pX:j.pageX,pY:j.pageY,k:t.k};n=m&&"d"!=t.k?{X:k.left||a("left")||0,Y:k.top||a("top")||0,W:m[0].offsetWidth||a("width")||0,H:m[0].offsetHeight||a("height")||0,pX:j.pageX,pY:j.pageY,k:t.k}:!1;if(r("input.hasDatepicker",o[0])[0]){try{r("input.hasDatepicker",o[0]).datepicker("hide")}catch(g){}}r(document).mousemove(r.jqDnR.drag).mouseup(r.jqDnR.stop);return !1})})},i=function(b){return parseInt(o.css(b),10)||!1},a=function(b){return parseInt(m.css(b),10)||!1}})(jQuery);(function(a){a.jgrid.extend({setSubGrid:function(){return this.each(function(){var b,d;this.p.subGridOptions=a.extend({plusicon:"ui-icon-plus",minusicon:"ui-icon-minus",openicon:"ui-icon-carat-1-sw",expandOnLoad:!1,delayOnLoad:50,selectOnExpand:!1,reloadOnExpand:!0},this.p.subGridOptions||{});this.p.colNames.unshift("");this.p.colModel.unshift({name:"subgrid",width:a.jgrid.cell_width?this.p.subGridWidth+this.p.cellLayout:this.p.subGridWidth,sortable:!1,resizable:!1,hidedlg:!0,search:!1,fixed:!0});b=this.p.subGridModel;if(b[0]){b[0].align=a.extend([],b[0].align||[]);for(d=0;d<b[0].name.length;d++){b[0].align[d]=b[0].align[d]||"left"}}})},addSubGridCell:function(e,h){var g="",d,f;this.each(function(){g=this.formatCol(e,h);f=this.p.id;d=this.p.subGridOptions.plusicon});return'<td role="gridcell" aria-describedby="'+f+'_subgrid" class="ui-sgcollapsed sgcollapsed" '+g+"><a href='javascript:void(0);'><span class='ui-icon "+d+"'></span></a></td>"},addSubGrid:function(b,d){return this.each(function(){var y=this;if(y.grid){var i=function(k,j,g){j=a("<td align='"+y.p.subGridModel[0].align[g]+"'></td>").html(j);a(k).append(j)},n=function(p,l){var j,k,o,m=a("<table cellspacing='0' cellpadding='0' border='0'><tbody></tbody></table>"),g=a("<tr></tr>");for(k=0;k<y.p.subGridModel[0].name.length;k++){j=a("<th class='ui-state-default ui-th-subgrid ui-th-column ui-th-"+y.p.direction+"'></th>"),a(j).html(y.p.subGridModel[0].name[k]),a(j).width(y.p.subGridModel[0].width[k]),a(g).append(j)}a(m).append(g);p&&(o=y.p.xmlReader.subgrid,a(o.root+" "+o.row,p).each(function(){g=a("<tr class='ui-widget-content ui-subtblcell'></tr>");if(!0===o.repeatitems){a(o.cell,this).each(function(r){i(g,a(this).text()||"&#160;",r)})}else{var q=y.p.subGridModel[0].mapping||y.p.subGridModel[0].name;if(q){for(k=0;k<q.length;k++){i(g,a(q[k],this).text()||"&#160;",k)}}}a(m).append(g)}));j=a("table:first",y.grid.bDiv).attr("id")+"_";a("#"+a.jgrid.jqID(j+l)).append(m);y.grid.hDiv.loading=!1;a("#load_"+a.jgrid.jqID(y.p.id)).hide();return !1},f=function(D,B){var r,t,C,s,q,o=a("<table cellspacing='0' cellpadding='0' border='0'><tbody></tbody></table>"),p=a("<tr></tr>");for(t=0;t<y.p.subGridModel[0].name.length;t++){r=a("<th class='ui-state-default ui-th-subgrid ui-th-column ui-th-"+y.p.direction+"'></th>"),a(r).html(y.p.subGridModel[0].name[t]),a(r).width(y.p.subGridModel[0].width[t]),a(p).append(r)}a(o).append(p);if(D&&(s=y.p.jsonReader.subgrid,r=a.jgrid.getAccessor(D,s.root),void 0!==r)){for(t=0;t<r.length;t++){C=r[t];p=a("<tr class='ui-widget-content ui-subtblcell'></tr>");if(!0===s.repeatitems){s.cell&&(C=C[s.cell]);for(q=0;q<C.length;q++){i(p,C[q]||"&#160;",q)}}else{var m=y.p.subGridModel[0].mapping||y.p.subGridModel[0].name;if(m.length){for(q=0;q<m.length;q++){i(p,C[m[q]]||"&#160;",q)}}}a(o).append(p)}}t=a("table:first",y.grid.bDiv).attr("id")+"_";a("#"+a.jgrid.jqID(t+B)).append(o);y.grid.hDiv.loading=!1;a("#load_"+a.jgrid.jqID(y.p.id)).hide();return !1},z=function(o){var l,m,k,j;l=a(o).attr("id");m={nd_:(new Date).getTime()};m[y.p.prmNames.subgridid]=l;if(!y.p.subGridModel[0]){return !1}if(y.p.subGridModel[0].params){for(j=0;j<y.p.subGridModel[0].params.length;j++){for(k=0;k<y.p.colModel.length;k++){y.p.colModel[k].name===y.p.subGridModel[0].params[j]&&(m[y.p.colModel[k].name]=a("td:eq("+k+")",o).text().replace(/\&#160\;/ig,""))}}}if(!y.grid.hDiv.loading){switch(y.grid.hDiv.loading=!0,a("#load_"+a.jgrid.jqID(y.p.id)).show(),y.p.subgridtype||(y.p.subgridtype=y.p.datatype),a.isFunction(y.p.subgridtype)?y.p.subgridtype.call(y,m):y.p.subgridtype=y.p.subgridtype.toLowerCase(),y.p.subgridtype){case"xml":case"json":a.ajax(a.extend({type:y.p.mtype,url:y.p.subGridUrl,dataType:y.p.subgridtype,data:a.isFunction(y.p.serializeSubGridData)?y.p.serializeSubGridData.call(y,m):m,complete:function(g){y.p.subgridtype==="xml"?n(g.responseXML,l):f(a.jgrid.parse(g.responseText),l)}},a.jgrid.ajaxOptions,y.p.ajaxSubgridOptions||{}))}}return !1},x,u,e,c=0,w,v;a.each(y.p.colModel,function(){(!0===this.hidden||"rn"===this.name||"cb"===this.name)&&c++});var A=y.rows.length,h=1;void 0!==d&&0<d&&(h=d,A=d+1);for(;h<A;){a(y.rows[h]).hasClass("jqgrow")&&a(y.rows[h].cells[b]).bind("click",function(){var g=a(this).parent("tr")[0];v=g.nextSibling;if(a(this).hasClass("sgcollapsed")){u=y.p.id;x=g.id;if(y.p.subGridOptions.reloadOnExpand===true||y.p.subGridOptions.reloadOnExpand===false&&!a(v).hasClass("ui-subgrid")){e=b>=1?"<td colspan='"+b+"'>&#160;</td>":"";w=a(y).triggerHandler("jqGridSubGridBeforeExpand",[u+"_"+x,x]);(w=w===false||w==="stop"?false:true)&&a.isFunction(y.p.subGridBeforeExpand)&&(w=y.p.subGridBeforeExpand.call(y,u+"_"+x,x));if(w===false){return false}a(g).after("<tr role='row' class='ui-subgrid'>"+e+"<td class='ui-widget-content subgrid-cell'><span class='ui-icon "+y.p.subGridOptions.openicon+"'></span></td><td colspan='"+parseInt(y.p.colNames.length-1-c,10)+"' class='ui-widget-content subgrid-data'><div id="+u+"_"+x+" class='tablediv'></div></td></tr>");a(y).triggerHandler("jqGridSubGridRowExpanded",[u+"_"+x,x]);a.isFunction(y.p.subGridRowExpanded)?y.p.subGridRowExpanded.call(y,u+"_"+x,x):z(g)}else{a(v).show()}a(this).html("<a href='javascript:void(0);'><span class='ui-icon "+y.p.subGridOptions.minusicon+"'></span></a>").removeClass("sgcollapsed").addClass("sgexpanded");y.p.subGridOptions.selectOnExpand&&a(y).jqGrid("setSelection",x)}else{if(a(this).hasClass("sgexpanded")){w=a(y).triggerHandler("jqGridSubGridRowColapsed",[u+"_"+x,x]);if((w=w===false||w==="stop"?false:true)&&a.isFunction(y.p.subGridRowColapsed)){x=g.id;w=y.p.subGridRowColapsed.call(y,u+"_"+x,x)}if(w===false){return false}y.p.subGridOptions.reloadOnExpand===true?a(v).remove(".ui-subgrid"):a(v).hasClass("ui-subgrid")&&a(v).hide();a(this).html("<a href='javascript:void(0);'><span class='ui-icon "+y.p.subGridOptions.plusicon+"'></span></a>").removeClass("sgexpanded").addClass("sgcollapsed")}}return false}),h++}!0===y.p.subGridOptions.expandOnLoad&&a(y.rows).filter(".jqgrow").each(function(g,j){a(j.cells[0]).click()});y.subGridXml=function(j,g){n(j,g)};y.subGridJson=function(j,g){f(j,g)}}})},expandSubGridRow:function(b){return this.each(function(){if((this.grid||b)&&!0===this.p.subGrid){var d=a(this).jqGrid("getInd",b,!0);d&&(d=a("td.sgcollapsed",d)[0])&&a(d).trigger("click")}})},collapseSubGridRow:function(b){return this.each(function(){if((this.grid||b)&&!0===this.p.subGrid){var d=a(this).jqGrid("getInd",b,!0);d&&(d=a("td.sgexpanded",d)[0])&&a(d).trigger("click")}})},toggleSubGridRow:function(b){return this.each(function(){if((this.grid||b)&&!0===this.p.subGrid){var e=a(this).jqGrid("getInd",b,!0);if(e){var d=a("td.sgcollapsed",e)[0];d?a(d).trigger("click"):(d=a("td.sgexpanded",e)[0])&&a(d).trigger("click")}}})}})})(jQuery);(function(a){a.extend(a.jgrid,{template:function(c){var e=a.makeArray(arguments).slice(1),h,d=e.length;null==c&&(c="");return c.replace(/\{([\w\-]+)(?:\:([\w\.]*)(?:\((.*?)?\))?)?\}/g,function(i,f){if(!isNaN(parseInt(f,10))){return e[parseInt(f,10)]}for(h=0;h<d;h++){if(a.isArray(e[h])){for(var j=e[h],g=j.length;g--;){if(f===j[g].nm){return j[g].v}}}}})}});a.jgrid.extend({groupingSetup:function(){return this.each(function(){var c,e,h=this.p.colModel,d=this.p.groupingView;if(null!==d&&("object"===typeof d||a.isFunction(d))){if(d.groupField.length){void 0===d.visibiltyOnNextGrouping&&(d.visibiltyOnNextGrouping=[]);d.lastvalues=[];d.groups=[];d.counters=[];for(c=0;c<d.groupField.length;c++){d.groupOrder[c]||(d.groupOrder[c]="asc"),d.groupText[c]||(d.groupText[c]="{0}"),"boolean"!==typeof d.groupColumnShow[c]&&(d.groupColumnShow[c]=!0),"boolean"!==typeof d.groupSummary[c]&&(d.groupSummary[c]=!1),!0===d.groupColumnShow[c]?(d.visibiltyOnNextGrouping[c]=!0,a(this).jqGrid("showCol",d.groupField[c])):(d.visibiltyOnNextGrouping[c]=a("#"+a.jgrid.jqID(this.p.id+"_"+d.groupField[c])).is(":visible"),a(this).jqGrid("hideCol",d.groupField[c]))}d.summary=[];c=0;for(e=h.length;c<e;c++){h[c].summaryType&&d.summary.push({nm:h[c].name,st:h[c].summaryType,v:"",sr:h[c].summaryRound,srt:h[c].summaryRoundType||"round"})}}else{this.p.grouping=!1}}else{this.p.grouping=!1}})},groupingPrepare:function(c,e,h,d){this.each(function(){var p=this.p.groupingView,n=this,r,g=p.groupField.length,f,i,b,o=0;for(r=0;r<g;r++){f=p.groupField[r],b=p.displayField[r],i=h[f],b=null==b?null:h[b],null==b&&(b=i),void 0!==i&&(0===d?(p.groups.push({idx:r,dataIndex:f,value:i,displayValue:b,startRow:d,cnt:1,summary:[]}),p.lastvalues[r]=i,p.counters[r]={cnt:1,pos:p.groups.length-1,summary:a.extend(!0,[],p.summary)}):"object"!==typeof i&&(a.isArray(p.isInTheSameGroup)&&a.isFunction(p.isInTheSameGroup[r])?!p.isInTheSameGroup[r].call(n,p.lastvalues[r],i,r,p):p.lastvalues[r]!==i)?(p.groups.push({idx:r,dataIndex:f,value:i,displayValue:b,startRow:d,cnt:1,summary:[]}),p.lastvalues[r]=i,o=1,p.counters[r]={cnt:1,pos:p.groups.length-1,summary:a.extend(!0,[],p.summary)}):1===o?(p.groups.push({idx:r,dataIndex:f,value:i,displayValue:b,startRow:d,cnt:1,summary:[]}),p.lastvalues[r]=i,p.counters[r]={cnt:1,pos:p.groups.length-1,summary:a.extend(!0,[],p.summary)}):(p.counters[r].cnt+=1,p.groups[p.counters[r].pos].cnt=p.counters[r].cnt),a.each(p.counters[r].summary,function(){this.v=a.isFunction(this.st)?this.st.call(n,this.v,this.nm,h):a(n).jqGrid("groupingCalculations.handler",this.st,this.v,this.nm,this.sr,this.srt,h)}),p.groups[p.counters[r].pos].summary=p.counters[r].summary)}e.push(c)});return e},groupingToggle:function(c){this.each(function(){var m=this.p.groupingView,n=c.split("_"),d=parseInt(n[n.length-2],10);n.splice(n.length-2,2);var n=n.join("_"),o=m.minusicon,j=m.plusicon,p=a("#"+a.jgrid.jqID(c)),p=p.length?p[0].nextSibling:null,i=a("#"+a.jgrid.jqID(c)+" span.tree-wrap-"+this.p.direction),b=!1;if(i.hasClass(o)){if(m.showSummaryOnHide){if(p){for(;p&&!(a(p).hasClass("jqfoot")&&parseInt(a(p).attr("jqfootlevel"),10)<=d);){a(p).hide(),p=p.nextSibling}}}else{if(p){for(;p;){m=p.className.indexOf(n);if(-1!==m&&parseInt(p.className.substring(m+n.length+1),10)<=d){break}a(p).hide();p=p.nextSibling}}}i.removeClass(o).addClass(j);b=!0}else{if(p){for(;p;){m=p.className.indexOf(n);if(-1!==m&&parseInt(p.className.substring(m+n.length+1),10)<=d){break}a(p).show();(m=a(p).find("span.tree-wrap-"+this.p.direction))&&a(m).hasClass(j)&&a(m).removeClass(j).addClass(o);p=p.nextSibling}}i.removeClass(j).addClass(o)}a(this).triggerHandler("jqGridGroupingClickGroup",[c,b]);a.isFunction(this.p.onClickGroup)&&this.p.onClickGroup.call(this,c,b)});return !1},groupingRender:function(c,d){return this.each(function(){function r(h,f,l){var j=!1;if(0===f){j=l[h]}else{var k=l[h].idx;if(0===k){j=l[h]}else{for(;0<=h;h--){if(l[h].idx===k-f){j=l[h];break}}}}return j}var y=this,s=y.p.groupingView,p="",u="",n,i,o=s.groupCollapse?s.plusicon:s.minusicon,g,b=[],z=s.groupField.length,o=o+(" tree-wrap-"+y.p.direction);a.each(y.p.colModel,function(f,h){var e;for(e=0;e<z;e++){if(s.groupField[e]===h.name){b[e]=f;break}}});var A=0,v=a.makeArray(s.groupSummary);v.reverse();a.each(s.groups,function(E,q){A++;i=y.p.id+"ghead_"+q.idx;n=i+"_"+E;u="<span style='cursor:pointer;' class='ui-icon "+o+"' onclick=\"jQuery('#"+a.jgrid.jqID(y.p.id)+"').jqGrid('groupingToggle','"+n+"');return false;\"></span>";try{a.isArray(s.formatDisplayField)&&a.isFunction(s.formatDisplayField[q.idx])&&(q.displayValue=s.formatDisplayField[q.idx].call(y,q.displayValue,q.value,y.p.colModel[b[q.idx]],q.idx,s)),g=y.formatter(n,q.displayValue,b[q.idx],q.value)}catch(f){g=q.displayValue}p+='<tr id="'+n+'" role="row" class= "ui-widget-content jqgroup ui-row-'+y.p.direction+" "+i+'"><td style="padding-left:'+12*q.idx+'px;" colspan="'+d+'">'+u+a.jgrid.template(s.groupText[q.idx],g,q.cnt,q.summary)+"</td></tr>";if(z-1===q.idx){var l=s.groups[E+1],j,m,h=void 0!==l?s.groups[E+1].startRow:c.length;for(m=q.startRow;m<h;m++){p+=c[m].join("")}var e;if(void 0!==l){for(e=0;e<s.groupField.length&&l.dataIndex!==s.groupField[e];e++){}A=s.groupField.length-e}for(l=0;l<A;l++){if(v[l]){m="";s.groupCollapse&&!s.showSummaryOnHide&&(m=' style="display:none;"');p+="<tr"+m+' jqfootlevel="'+(q.idx-l)+'" role="row" class="ui-widget-content jqfoot ui-row-'+y.p.direction+'">';m=r(E,l,s.groups);var D=y.p.colModel,x,w=m.cnt;for(j=0;j<d;j++){var t="<td "+y.formatCol(j,1,"")+">&#160;</td>",k="{0}";a.each(m.summary,function(){if(this.nm===D[j].name){D[j].summaryTpl&&(k=D[j].summaryTpl);"string"===typeof this.st&&"avg"===this.st.toLowerCase()&&this.v&&0<w&&(this.v/=w);try{x=y.formatter("",this.v,j,this)}catch(B){x=this.v}t="<td "+y.formatCol(j,1,"")+">"+a.jgrid.format(k,x)+"</td>";return !1}});p+=t}p+="</tr>"}}A=e}});a("#"+a.jgrid.jqID(y.p.id)+" tbody:first").append(p);p=null})},groupingGroupBy:function(c,d){return this.each(function(){"string"===typeof c&&(c=[c]);var e=this.p.groupingView;this.p.grouping=!0;void 0===e.visibiltyOnNextGrouping&&(e.visibiltyOnNextGrouping=[]);var b;for(b=0;b<e.groupField.length;b++){!e.groupColumnShow[b]&&e.visibiltyOnNextGrouping[b]&&a(this).jqGrid("showCol",e.groupField[b])}for(b=0;b<c.length;b++){e.visibiltyOnNextGrouping[b]=a("#"+a.jgrid.jqID(this.p.id)+"_"+a.jgrid.jqID(c[b])).is(":visible")}this.p.groupingView=a.extend(this.p.groupingView,d||{});e.groupField=c;a(this).trigger("reloadGrid")})},groupingRemove:function(c){return this.each(function(){void 0===c&&(c=!0);this.p.grouping=!1;if(!0===c){var b=this.p.groupingView,d;for(d=0;d<b.groupField.length;d++){!b.groupColumnShow[d]&&b.visibiltyOnNextGrouping[d]&&a(this).jqGrid("showCol",b.groupField)}a("tr.jqgroup, tr.jqfoot","#"+a.jgrid.jqID(this.p.id)+" tbody:first").remove();a("tr.jqgrow:hidden","#"+a.jgrid.jqID(this.p.id)+" tbody:first").show()}else{a(this).trigger("reloadGrid")}})},groupingCalculations:{handler:function(g,m,k,i,l,j){var n={sum:function(){return parseFloat(m||0)+parseFloat(j[k]||0)},min:function(){return""===m?parseFloat(j[k]||0):Math.min(parseFloat(m),parseFloat(j[k]||0))},max:function(){return""===m?parseFloat(j[k]||0):Math.max(parseFloat(m),parseFloat(j[k]||0))},count:function(){""===m&&(m=0);return j.hasOwnProperty(k)?m+1:0},avg:function(){return n.sum()}};if(!n[g]){throw"jqGrid Grouping No such method: "+g}g=n[g]();null!=i&&("fixed"===l?g=g.toFixed(i):(i=Math.pow(10,i),g=Math.round(g*i)/i));return g}}})})(jQuery);(function(a){a.jgrid.extend({setTreeNode:function(d,e){return this.each(function(){var w=this;if(w.grid&&w.p.treeGrid){for(var s=w.p.expColInd,v=w.p.treeReader.expanded_field,r=w.p.treeReader.leaf_field,t=w.p.treeReader.level_field,u=w.p.treeReader.icon_field,o=w.p.treeReader.loaded,p,c,b,q;d<e;){q=a.jgrid.stripPref(w.p.idPrefix,w.rows[d].id),q=w.p.data[w.p._index[q]],"nested"===w.p.treeGridModel&&!q[r]&&(p=parseInt(q[w.p.treeReader.left_field],10),c=parseInt(q[w.p.treeReader.right_field],10),q[r]=c===p+1?"true":"false",w.rows[d].cells[w.p._treeleafpos].innerHTML=q[r]),p=parseInt(q[t],10),0===w.p.tree_root_level?(b=p+1,c=p):(b=p,c=p-1),b="<div class='tree-wrap tree-wrap-"+w.p.direction+"' style='width:"+18*b+"px;'>",b+="<div style='"+("rtl"===w.p.direction?"right:":"left:")+18*c+"px;' class='ui-icon ",void 0!==q[o]&&(q[o]="true"===q[o]||!0===q[o]?!0:!1),"true"===q[r]||!0===q[r]?(b+=(void 0!==q[u]&&""!==q[u]?q[u]:w.p.treeIcons.leaf)+" tree-leaf treeclick",q[r]=!0,c="leaf"):(q[r]=!1,c=""),q[v]=("true"===q[v]||!0===q[v]?!0:!1)&&(q[o]||void 0===q[o]),b=!1===q[v]?b+(!0===q[r]?"'":w.p.treeIcons.plus+" tree-plus treeclick'"):b+(!0===q[r]?"'":w.p.treeIcons.minus+" tree-minus treeclick'"),b+="></div></div>",a(w.rows[d].cells[s]).wrapInner("<span class='cell-wrapper"+c+"'></span>").prepend(b),p!==parseInt(w.p.tree_root_level,10)&&((q=(q=a(w).jqGrid("getNodeParent",q))&&q.hasOwnProperty(v)?q[v]:!0)||a(w.rows[d]).css("display","none")),a(w.rows[d].cells[s]).find("div.treeclick").bind("click",function(f){f=a.jgrid.stripPref(w.p.idPrefix,a(f.target||f.srcElement,w.rows).closest("tr.jqgrow")[0].id);f=w.p._index[f];if(!w.p.data[f][r]){if(w.p.data[f][v]){a(w).jqGrid("collapseRow",w.p.data[f]);a(w).jqGrid("collapseNode",w.p.data[f])}else{a(w).jqGrid("expandRow",w.p.data[f]);a(w).jqGrid("expandNode",w.p.data[f])}}return false}),!0===w.p.ExpandColClick&&a(w.rows[d].cells[s]).find("span.cell-wrapper").css("cursor","pointer").bind("click",function(f){var f=a.jgrid.stripPref(w.p.idPrefix,a(f.target||f.srcElement,w.rows).closest("tr.jqgrow")[0].id),g=w.p._index[f];if(!w.p.data[g][r]){if(w.p.data[g][v]){a(w).jqGrid("collapseRow",w.p.data[g]);a(w).jqGrid("collapseNode",w.p.data[g])}else{a(w).jqGrid("expandRow",w.p.data[g]);a(w).jqGrid("expandNode",w.p.data[g])}}a(w).jqGrid("setSelection",f);return false}),d++}}})},setTreeGrid:function(){return this.each(function(){var d=this,n=0,f=!1,k,m,j,l=[];if(d.p.treeGrid){d.p.treedatatype||a.extend(d.p,{treedatatype:d.p.datatype});d.p.subGrid=!1;d.p.altRows=!1;d.p.pgbuttons=!1;d.p.pginput=!1;d.p.gridview=!0;null===d.p.rowTotal&&(d.p.rowNum=10000);d.p.multiselect=!1;d.p.rowList=[];d.p.expColInd=0;d.p.treeIcons=a.extend({plus:"ui-icon-triangle-1-"+("rtl"===d.p.direction?"w":"e"),minus:"ui-icon-triangle-1-s",leaf:"ui-icon-radio-off"},d.p.treeIcons||{});"nested"===d.p.treeGridModel?d.p.treeReader=a.extend({level_field:"level",left_field:"lft",right_field:"rgt",leaf_field:"isLeaf",expanded_field:"expanded",loaded:"loaded",icon_field:"icon"},d.p.treeReader):"adjacency"===d.p.treeGridModel&&(d.p.treeReader=a.extend({level_field:"level",parent_id_field:"parent",leaf_field:"isLeaf",expanded_field:"expanded",loaded:"loaded",icon_field:"icon"},d.p.treeReader));for(m in d.p.colModel){if(d.p.colModel.hasOwnProperty(m)){for(j in k=d.p.colModel[m].name,k===d.p.ExpandColumn&&!f&&(f=!0,d.p.expColInd=n),n++,d.p.treeReader){d.p.treeReader.hasOwnProperty(j)&&d.p.treeReader[j]===k&&l.push(k)}}}a.each(d.p.treeReader,function(b,c){if(c&&a.inArray(c,l)===-1){if(b==="leaf_field"){d.p._treeleafpos=n}n++;d.p.colNames.push(c);d.p.colModel.push({name:c,width:1,hidden:true,sortable:false,resizable:false,hidedlg:true,editable:true,search:false})}})}})},expandRow:function(c){this.each(function(){var g=this;if(g.grid&&g.p.treeGrid){var b=a(g).jqGrid("getNodeChildren",c),d=g.p.treeReader.expanded_field,f=g.rows;a(b).each(function(){var e=g.p.idPrefix+a.jgrid.getAccessor(this,g.p.localReader.id);a(f.namedItem(e)).css("display","");this[d]&&a(g).jqGrid("expandRow",this)})}})},collapseRow:function(c){this.each(function(){var g=this;if(g.grid&&g.p.treeGrid){var b=a(g).jqGrid("getNodeChildren",c),d=g.p.treeReader.expanded_field,f=g.rows;a(b).each(function(){var e=g.p.idPrefix+a.jgrid.getAccessor(this,g.p.localReader.id);a(f.namedItem(e)).css("display","none");this[d]&&a(g).jqGrid("collapseRow",this)})}})},getRootNodes:function(){var c=[];this.each(function(){var e=this;if(e.grid&&e.p.treeGrid){switch(e.p.treeGridModel){case"nested":var b=e.p.treeReader.level_field;a(e.p.data).each(function(){parseInt(this[b],10)===parseInt(e.p.tree_root_level,10)&&c.push(this)});break;case"adjacency":var d=e.p.treeReader.parent_id_field;a(e.p.data).each(function(){(null===this[d]||"null"===(""+this[d]).toLowerCase())&&c.push(this)})}}});return c},getNodeDepth:function(d){var e=null;this.each(function(){if(this.grid&&this.p.treeGrid){switch(this.p.treeGridModel){case"nested":e=parseInt(d[this.p.treeReader.level_field],10)-parseInt(this.p.tree_root_level,10);break;case"adjacency":e=a(this).jqGrid("getNodeAncestors",d).length}}});return e},getNodeParent:function(d){var e=null;this.each(function(){var s=this;if(s.grid&&s.p.treeGrid){switch(s.p.treeGridModel){case"nested":var o=s.p.treeReader.left_field,r=s.p.treeReader.right_field,n=s.p.treeReader.level_field,p=parseInt(d[o],10),q=parseInt(d[r],10),c=parseInt(d[n],10);a(this.p.data).each(function(){if(parseInt(this[n],10)===c-1&&parseInt(this[o],10)<p&&parseInt(this[r],10)>q){return e=this,!1}});break;case"adjacency":var j=s.p.treeReader.parent_id_field,b=s.p.localReader.id;a(this.p.data).each(function(){if(this[b]===a.jgrid.stripPref(s.p.idPrefix,d[j])){return e=this,!1}})}}});return e},getNodeChildren:function(d){var e=[];this.each(function(){var s=this;if(s.grid&&s.p.treeGrid){switch(s.p.treeGridModel){case"nested":var o=s.p.treeReader.left_field,r=s.p.treeReader.right_field,n=s.p.treeReader.level_field,p=parseInt(d[o],10),q=parseInt(d[r],10),c=parseInt(d[n],10);a(this.p.data).each(function(){parseInt(this[n],10)===c+1&&parseInt(this[o],10)>p&&parseInt(this[r],10)<q&&e.push(this)});break;case"adjacency":var j=s.p.treeReader.parent_id_field,b=s.p.localReader.id;a(this.p.data).each(function(){this[j]==a.jgrid.stripPref(s.p.idPrefix,d[b])&&e.push(this)})}}});return e},getFullTreeNode:function(d){var e=[];this.each(function(){var u=this,q;if(u.grid&&u.p.treeGrid){switch(u.p.treeGridModel){case"nested":var t=u.p.treeReader.left_field,p=u.p.treeReader.right_field,r=u.p.treeReader.level_field,s=parseInt(d[t],10),j=parseInt(d[p],10),o=parseInt(d[r],10);a(this.p.data).each(function(){parseInt(this[r],10)>=o&&parseInt(this[t],10)>=s&&parseInt(this[t],10)<=j&&e.push(this)});break;case"adjacency":if(d){e.push(d);var c=u.p.treeReader.parent_id_field,b=u.p.localReader.id;a(this.p.data).each(function(f){q=e.length;for(f=0;f<q;f++){if(a.jgrid.stripPref(u.p.idPrefix,e[f][b])===this[c]){e.push(this);break}}})}}}});return e},getNodeAncestors:function(d){var e=[];this.each(function(){if(this.grid&&this.p.treeGrid){for(var b=a(this).jqGrid("getNodeParent",d);b;){e.push(b),b=a(this).jqGrid("getNodeParent",b)}}});return e},isVisibleNode:function(d){var e=!0;this.each(function(){if(this.grid&&this.p.treeGrid){var b=a(this).jqGrid("getNodeAncestors",d),c=this.p.treeReader.expanded_field;a(b).each(function(){e=e&&this[c];if(!e){return !1}})}});return e},isNodeLoaded:function(d){var e;this.each(function(){if(this.grid&&this.p.treeGrid){var b=this.p.treeReader.leaf_field;e=void 0!==d?void 0!==d.loaded?d.loaded:d[b]||0<a(this).jqGrid("getNodeChildren",d).length?!0:!1:!1}});return e},expandNode:function(c){return this.each(function(){if(this.grid&&this.p.treeGrid){var q=this.p.treeReader.expanded_field,r=this.p.treeReader.parent_id_field,m=this.p.treeReader.loaded,p=this.p.treeReader.level_field,j=this.p.treeReader.left_field,n=this.p.treeReader.right_field;if(!c[q]){var o=a.jgrid.getAccessor(c,this.p.localReader.id),b=a("#"+this.p.idPrefix+a.jgrid.jqID(o),this.grid.bDiv)[0],d=this.p._index[o];a(this).jqGrid("isNodeLoaded",this.p.data[d])?(c[q]=!0,a("div.treeclick",b).removeClass(this.p.treeIcons.plus+" tree-plus").addClass(this.p.treeIcons.minus+" tree-minus")):this.grid.hDiv.loading||(c[q]=!0,a("div.treeclick",b).removeClass(this.p.treeIcons.plus+" tree-plus").addClass(this.p.treeIcons.minus+" tree-minus"),this.p.treeANode=b.rowIndex,this.p.datatype=this.p.treedatatype,"nested"===this.p.treeGridModel?a(this).jqGrid("setGridParam",{postData:{nodeid:o,n_left:c[j],n_right:c[n],n_level:c[p]}}):a(this).jqGrid("setGridParam",{postData:{nodeid:o,parentid:c[r],n_level:c[p]}}),a(this).trigger("reloadGrid"),c[m]=!0,"nested"===this.p.treeGridModel?a(this).jqGrid("setGridParam",{postData:{nodeid:"",n_left:"",n_right:"",n_level:""}}):a(this).jqGrid("setGridParam",{postData:{nodeid:"",parentid:"",n_level:""}}))}}})},collapseNode:function(c){return this.each(function(){if(this.grid&&this.p.treeGrid){var b=this.p.treeReader.expanded_field;c[b]&&(c[b]=!1,b=a.jgrid.getAccessor(c,this.p.localReader.id),b=a("#"+this.p.idPrefix+a.jgrid.jqID(b),this.grid.bDiv)[0],a("div.treeclick",b).removeClass(this.p.treeIcons.minus+" tree-minus").addClass(this.p.treeIcons.plus+" tree-plus"))}})},SortTree:function(d,g,e,f){return this.each(function(){if(this.grid&&this.p.treeGrid){var n,h,j,m=[],b=this,c;n=a(this).jqGrid("getRootNodes");n=a.jgrid.from(n);n.orderBy(d,g,e,f);c=n.select();n=0;for(h=c.length;n<h;n++){j=c[n],m.push(j),a(this).jqGrid("collectChildrenSortTree",m,j,d,g,e,f)}a.each(m,function(k){var i=a.jgrid.getAccessor(this,b.p.localReader.id);a("#"+a.jgrid.jqID(b.p.id)+" tbody tr:eq("+k+")").after(a("tr#"+a.jgrid.jqID(i),b.grid.bDiv))});m=c=n=null}})},collectChildrenSortTree:function(d,l,f,j,k,g){return this.each(function(){if(this.grid&&this.p.treeGrid){var e,h,b,c;e=a(this).jqGrid("getNodeChildren",l);e=a.jgrid.from(e);e.orderBy(f,j,k,g);c=e.select();e=0;for(h=c.length;e<h;e++){b=c[e],d.push(b),a(this).jqGrid("collectChildrenSortTree",d,b,f,j,k,g)}}})},setTreeRow:function(d,f){var e=!1;this.each(function(){this.grid&&this.p.treeGrid&&(e=a(this).jqGrid("setRowData",d,f))});return e},delTreeNode:function(c){return this.each(function(){var p=this.p.localReader.id,d,k=this.p.treeReader.left_field,o=this.p.treeReader.right_field,j,m,n;if(this.grid&&this.p.treeGrid&&(d=this.p._index[c],void 0!==d)){j=parseInt(this.p.data[d][o],10);m=j-parseInt(this.p.data[d][k],10)+1;var b=a(this).jqGrid("getFullTreeNode",this.p.data[d]);if(0<b.length){for(d=0;d<b.length;d++){a(this).jqGrid("delRowData",b[d][p])}}if("nested"===this.p.treeGridModel){p=a.jgrid.from(this.p.data).greater(k,j,{stype:"integer"}).select();if(p.length){for(n in p){p.hasOwnProperty(n)&&(p[n][k]=parseInt(p[n][k],10)-m)}}p=a.jgrid.from(this.p.data).greater(o,j,{stype:"integer"}).select();if(p.length){for(n in p){p.hasOwnProperty(n)&&(p[n][o]=parseInt(p[n][o],10)-m)}}}}})},addChildNode:function(O,N,P,J){var M=this[0];if(P){var I=M.p.treeReader.expanded_field,K=M.p.treeReader.leaf_field,L=M.p.treeReader.level_field,F=M.p.treeReader.parent_id_field,G=M.p.treeReader.left_field,E=M.p.treeReader.right_field,D=M.p.treeReader.loaded,H,z,A,x,B;H=0;var y=N,w;void 0===J&&(J=!1);if(void 0===O||null===O){B=M.p.data.length-1;if(0<=B){for(;0<=B;){H=Math.max(H,parseInt(M.p.data[B][M.p.localReader.id],10)),B--}}O=H+1}var d=a(M).jqGrid("getInd",N);w=!1;if(void 0===N||null===N||""===N){y=N=null,H="last",x=M.p.tree_root_level,B=M.p.data.length+1}else{if(H="after",z=M.p._index[N],A=M.p.data[z],N=A[M.p.localReader.id],x=parseInt(A[L],10)+1,B=a(M).jqGrid("getFullTreeNode",A),B.length?(y=B=B[B.length-1][M.p.localReader.id],B=a(M).jqGrid("getInd",y)+1):B=a(M).jqGrid("getInd",N)+1,A[K]){w=!0,A[I]=!0,a(M.rows[d]).find("span.cell-wrapperleaf").removeClass("cell-wrapperleaf").addClass("cell-wrapper").end().find("div.tree-leaf").removeClass(M.p.treeIcons.leaf+" tree-leaf").addClass(M.p.treeIcons.minus+" tree-minus"),M.p.data[z][K]=!1,A[D]=!0}}z=B+1;void 0===P[I]&&(P[I]=!1);void 0===P[D]&&(P[D]=!1);P[L]=x;void 0===P[K]&&(P[K]=!0);"adjacency"===M.p.treeGridModel&&(P[F]=N);if("nested"===M.p.treeGridModel){var C;if(null!==N){K=parseInt(A[E],10);L=a.jgrid.from(M.p.data);L=L.greaterOrEquals(E,K,{stype:"integer"});L=L.select();if(L.length){for(C in L){L.hasOwnProperty(C)&&(L[C][G]=L[C][G]>K?parseInt(L[C][G],10)+2:L[C][G],L[C][E]=L[C][E]>=K?parseInt(L[C][E],10)+2:L[C][E])}}P[G]=K;P[E]=K+1}else{K=parseInt(a(M).jqGrid("getCol",E,!1,"max"),10);L=a.jgrid.from(M.p.data).greater(G,K,{stype:"integer"}).select();if(L.length){for(C in L){L.hasOwnProperty(C)&&(L[C][G]=parseInt(L[C][G],10)+2)}}L=a.jgrid.from(M.p.data).greater(E,K,{stype:"integer"}).select();if(L.length){for(C in L){L.hasOwnProperty(C)&&(L[C][E]=parseInt(L[C][E],10)+2)}}P[G]=K+1;P[E]=K+2}}if(null===N||a(M).jqGrid("isNodeLoaded",A)||w){a(M).jqGrid("addRowData",O,P,H,y),a(M).jqGrid("setTreeNode",B,z)}A&&!A[I]&&J&&a(M.rows[d]).find("div.treeclick").click()}}})})(jQuery);(function(a){a.jgrid.extend({jqGridImport:function(b){b=a.extend({imptype:"xml",impstring:"",impurl:"",mtype:"GET",impData:{},xmlGrid:{config:"roots>grid",data:"roots>rows"},jsonGrid:{config:"grid",data:"data"},ajaxOptions:{}},b||{});return this.each(function(){var i=this,h=function(j,d){var n=a(d.xmlGrid.config,j)[0],k=a(d.xmlGrid.data,j)[0],m,l;if(xmlJsonClass.xml2json&&a.jgrid.parse){n=xmlJsonClass.xml2json(n," ");n=a.jgrid.parse(n);for(l in n){n.hasOwnProperty(l)&&(m=n[l])}k?(k=n.grid.datatype,n.grid.datatype="xmlstring",n.grid.datastr=j,a(i).jqGrid(m).jqGrid("setGridParam",{datatype:k})):a(i).jqGrid(m)}else{alert("xml2json or parse are not present")}},c=function(j,d){if(j&&"string"===typeof j){var m=!1;a.jgrid.useJSON&&(a.jgrid.useJSON=!1,m=!0);var l=a.jgrid.parse(j);m&&(a.jgrid.useJSON=!0);m=l[d.jsonGrid.config];if(l=l[d.jsonGrid.data]){var k=m.datatype;m.datatype="jsonstring";m.datastr=l;a(i).jqGrid(m).jqGrid("setGridParam",{datatype:k})}else{a(i).jqGrid(m)}}};switch(b.imptype){case"xml":a.ajax(a.extend({url:b.impurl,type:b.mtype,data:b.impData,dataType:"xml",complete:function(d,f){"success"===f&&(h(d.responseXML,b),a(i).triggerHandler("jqGridImportComplete",[d,b]),a.isFunction(b.importComplete)&&b.importComplete(d))}},b.ajaxOptions));break;case"xmlstring":if(b.impstring&&"string"===typeof b.impstring){var e=a.parseXML(b.impstring);e&&(h(e,b),a(i).triggerHandler("jqGridImportComplete",[e,b]),a.isFunction(b.importComplete)&&b.importComplete(e),b.impstring=null);e=null}break;case"json":a.ajax(a.extend({url:b.impurl,type:b.mtype,data:b.impData,dataType:"json",complete:function(j){try{c(j.responseText,b),a(i).triggerHandler("jqGridImportComplete",[j,b]),a.isFunction(b.importComplete)&&b.importComplete(j)}catch(d){}}},b.ajaxOptions));break;case"jsonstring":b.impstring&&"string"===typeof b.impstring&&(c(b.impstring,b),a(i).triggerHandler("jqGridImportComplete",[b.impstring,b]),a.isFunction(b.importComplete)&&b.importComplete(b.impstring),b.impstring=null)}})},jqGridExport:function(b){var b=a.extend({exptype:"xmlstring",root:"grid",ident:"\t"},b||{}),c=null;this.each(function(){if(this.grid){var e,d=a.extend(!0,{},a(this).jqGrid("getGridParam"));d.rownumbers&&(d.colNames.splice(0,1),d.colModel.splice(0,1));d.multiselect&&(d.colNames.splice(0,1),d.colModel.splice(0,1));d.subGrid&&(d.colNames.splice(0,1),d.colModel.splice(0,1));d.knv=null;if(d.treeGrid){for(e in d.treeReader){d.treeReader.hasOwnProperty(e)&&(d.colNames.splice(d.colNames.length-1),d.colModel.splice(d.colModel.length-1))}}switch(b.exptype){case"xmlstring":c="<"+b.root+">"+xmlJsonClass.json2xml(d,b.ident)+"</"+b.root+">";break;case"jsonstring":c="{"+xmlJsonClass.toJson(d,b.root,b.ident,!1)+"}",void 0!==d.postData.filters&&(c=c.replace(/filters":"/,'filters":'),c=c.replace(/}]}"/,"}]}"))}}});return c},excelExport:function(b){b=a.extend({exptype:"remote",url:null,oper:"oper",tag:"excel",exportOptions:{}},b||{});return this.each(function(){if(this.grid){var c;"remote"===b.exptype&&(c=a.extend({},this.p.postData),c[b.oper]=b.tag,c=jQuery.param(c),c=-1!==b.url.indexOf("?")?b.url+"&"+c:b.url+"?"+c,window.location=c)}})}})})(jQuery);var xmlJsonClass={xml2json:function(d,c){9===d.nodeType&&(d=d.documentElement);var e=this.toJson(this.toObj(this.removeWhite(d)),d.nodeName,"\t");return"{\n"+c+(c?e.replace(/\t/g,c):e.replace(/\t|\n/g,""))+"\n}"},json2xml:function(d,c){var h=function(m,g,p){var q="",o,n;if(m instanceof Array){if(0===m.length){q+=p+"<"+g+">__EMPTY_ARRAY_</"+g+">\n"}else{o=0;for(n=m.length;o<n;o+=1){var k=p+h(m[o],g,p+"\t")+"\n",q=q+k}}}else{if("object"===typeof m){o=!1;q+=p+"<"+g;for(n in m){m.hasOwnProperty(n)&&("@"===n.charAt(0)?q+=" "+n.substr(1)+'="'+m[n].toString()+'"':o=!0)}q+=o?">":"/>";if(o){for(n in m){m.hasOwnProperty(n)&&("#text"===n?q+=m[n]:"#cdata"===n?q+="<![CDATA["+m[n]+"]]>":"@"!==n.charAt(0)&&(q+=h(m[n],n,p+"\t")))}q+=("\n"===q.charAt(q.length-1)?p:"")+"</"+g+">"}}else{"function"===typeof m?q+=p+"<"+g+"><![CDATA["+m+"]]></"+g+">":(void 0===m&&(m=""),q='""'===m.toString()||0===m.toString().length?q+(p+"<"+g+">__EMPTY_STRING_</"+g+">"):q+(p+"<"+g+">"+m.toString()+"</"+g+">"))}}return q},i="",j;for(j in d){d.hasOwnProperty(j)&&(i+=h(d[j],j,""))}return c?i.replace(/\t/g,c):i.replace(/\t|\n/g,"")},toObj:function(i){var d={},k=/function/i;if(1===i.nodeType){if(i.attributes.length){var l;for(l=0;l<i.attributes.length;l+=1){d["@"+i.attributes[l].nodeName]=(i.attributes[l].nodeValue||"").toString()}}if(i.firstChild){var m=l=0,j=!1,n;for(n=i.firstChild;n;n=n.nextSibling){1===n.nodeType?j=!0:3===n.nodeType&&n.nodeValue.match(/[^ \f\n\r\t\v]/)?l+=1:4===n.nodeType&&(m+=1)}if(j){if(2>l&&2>m){this.removeWhite(i);for(n=i.firstChild;n;n=n.nextSibling){3===n.nodeType?d["#text"]=this.escape(n.nodeValue):4===n.nodeType?k.test(n.nodeValue)?d[n.nodeName]=[d[n.nodeName],n.nodeValue]:d["#cdata"]=this.escape(n.nodeValue):d[n.nodeName]?d[n.nodeName] instanceof Array?d[n.nodeName][d[n.nodeName].length]=this.toObj(n):d[n.nodeName]=[d[n.nodeName],this.toObj(n)]:d[n.nodeName]=this.toObj(n)}}else{i.attributes.length?d["#text"]=this.escape(this.innerXml(i)):d=this.escape(this.innerXml(i))}}else{if(l){i.attributes.length?d["#text"]=this.escape(this.innerXml(i)):(d=this.escape(this.innerXml(i)),"__EMPTY_ARRAY_"===d?d="[]":"__EMPTY_STRING_"===d&&(d=""))}else{if(m){if(1<m){d=this.escape(this.innerXml(i))}else{for(n=i.firstChild;n;n=n.nextSibling){if(k.test(i.firstChild.nodeValue)){d=i.firstChild.nodeValue;break}else{d["#cdata"]=this.escape(n.nodeValue)}}}}}}}!i.attributes.length&&!i.firstChild&&(d=null)}else{9===i.nodeType?d=this.toObj(i.documentElement):alert("unhandled node type: "+i.nodeType)}return d},toJson:function(t,s,n,o){void 0===o&&(o=!0);var p=s?'"'+s+'"':"",m="\t",r="\n";o||(r=m="");if("[]"===t){p+=s?":[]":"[]"}else{if(t instanceof Array){var l,q,i=[];q=0;for(l=t.length;q<l;q+=1){i[q]=this.toJson(t[q],"",n+m,o)}p+=(s?":[":"[")+(1<i.length?r+n+m+i.join(","+r+n+m)+r+n:i.join(""))+"]"}else{if(null===t){p+=(s&&":")+"null"}else{if("object"===typeof t){l=[];for(q in t){t.hasOwnProperty(q)&&(l[l.length]=this.toJson(t[q],q,n+m,o))}p+=(s?":{":"{")+(1<l.length?r+n+m+l.join(","+r+n+m)+r+n:l.join(""))+"}"}else{p="string"===typeof t?p+((s&&":")+'"'+t.replace(/\\/g,"\\\\").replace(/\"/g,'\\"')+'"'):p+((s&&":")+t.toString())}}}}return p},innerXml:function(d){var c="";if("innerHTML" in d){c=d.innerHTML}else{for(var e=function(g){var f="",i;if(1===g.nodeType){f+="<"+g.nodeName;for(i=0;i<g.attributes.length;i+=1){f+=" "+g.attributes[i].nodeName+'="'+(g.attributes[i].nodeValue||"").toString()+'"'}if(g.firstChild){f+=">";for(i=g.firstChild;i;i=i.nextSibling){f+=e(i)}f+="</"+g.nodeName+">"}else{f+="/>"}}else{3===g.nodeType?f+=g.nodeValue:4===g.nodeType&&(f+="<![CDATA["+g.nodeValue+"]]>")}return f},d=d.firstChild;d;d=d.nextSibling){c+=e(d)}}return c},escape:function(b){return b.replace(/[\\]/g,"\\\\").replace(/[\"]/g,'\\"').replace(/[\n]/g,"\\n").replace(/[\r]/g,"\\r")},removeWhite:function(d){d.normalize();var c;for(c=d.firstChild;c;){if(3===c.nodeType){if(c.nodeValue.match(/[^ \f\n\r\t\v]/)){c=c.nextSibling}else{var e=c.nextSibling;d.removeChild(c);c=e}}else{1===c.nodeType&&this.removeWhite(c),c=c.nextSibling}}return d}};function tableToGrid(b,a){jQuery(b).each(function(){if(!this.grid){jQuery(this).width("99%");var q=jQuery(this).width(),p=jQuery("tr td:first-child input[type=checkbox]:first",jQuery(this)),r=jQuery("tr td:first-child input[type=radio]:first",jQuery(this)),p=0<p.length,r=!p&&0<r.length,j=p||r,o=[],n=[];jQuery("th",jQuery(this)).each(function(){0===o.length&&j?(o.push({name:"__selection__",index:"__selection__",width:0,hidden:!0}),n.push("__selection__")):(o.push({name:jQuery(this).attr("id")||jQuery.trim(jQuery.jgrid.stripHtml(jQuery(this).html())).split(" ").join("_"),index:jQuery(this).attr("id")||jQuery.trim(jQuery.jgrid.stripHtml(jQuery(this).html())).split(" ").join("_"),width:jQuery(this).width()||150}),n.push(jQuery(this).html()))});var m=[],l=[],k=[];jQuery("tbody > tr",jQuery(this)).each(function(){var c={},d=0;jQuery("td",jQuery(this)).each(function(){if(0===d&&j){var g=jQuery("input",jQuery(this)),f=g.attr("value");l.push(f||m.length);g.is(":checked")&&k.push(f);c[o[d].name]=g.attr("value")}else{c[o[d].name]=jQuery(this).html()}d++});0<d&&m.push(c)});jQuery(this).empty();jQuery(this).addClass("scroll");jQuery(this).jqGrid(jQuery.extend({datatype:"local",width:q,colNames:n,colModel:o,multiselect:p},a||{}));for(q=0;q<m.length;q++){r=null,0<l.length&&(r=l[q])&&r.replace&&(r=encodeURIComponent(r).replace(/[.\-%]/g,"_")),null===r&&(r=q+1),jQuery(this).jqGrid("addRowData",r,m[q])}for(q=0;q<k.length;q++){jQuery(this).jqGrid("setSelection",k[q])}}})}(function(b){b.jgrid.msie&&8===b.jgrid.msiever()&&(b.expr[":"].hidden=function(b){return 0===b.offsetWidth||0===b.offsetHeight||"none"===b.style.display});b.jgrid._multiselect=!1;if(b.ui&&b.ui.multiselect){if(b.ui.multiselect.prototype._setSelected){var o=b.ui.multiselect.prototype._setSelected;b.ui.multiselect.prototype._setSelected=function(a,d){var c=o.call(this,a,d);if(d&&this.selectedList){var e=this.element;this.selectedList.find("li").each(function(){b(this).data("optionLink")&&b(this).data("optionLink").remove().appendTo(e)})}return c}}b.ui.multiselect.prototype.destroy&&(b.ui.multiselect.prototype.destroy=function(){this.element.show();this.container.remove();b.Widget===void 0?b.widget.prototype.destroy.apply(this,arguments):b.Widget.prototype.destroy.apply(this,arguments)});b.jgrid._multiselect=!0}b.jgrid.extend({sortableColumns:function(a){return this.each(function(){function d(){c.p.disableClick=true}var c=this,e=b.jgrid.jqID(c.p.id),e={tolerance:"pointer",axis:"x",scrollSensitivity:"1",items:">th:not(:has(#jqgh_"+e+"_cb,#jqgh_"+e+"_rn,#jqgh_"+e+"_subgrid),:hidden)",placeholder:{element:function(a){return b(document.createElement(a[0].nodeName)).addClass(a[0].className+" ui-sortable-placeholder ui-state-highlight").removeClass("ui-sortable-helper")[0]},update:function(b,a){a.height(b.currentItem.innerHeight()-parseInt(b.currentItem.css("paddingTop")||0,10)-parseInt(b.currentItem.css("paddingBottom")||0,10));a.width(b.currentItem.innerWidth()-parseInt(b.currentItem.css("paddingLeft")||0,10)-parseInt(b.currentItem.css("paddingRight")||0,10))}},update:function(a,e){var d=b(e.item).parent(),d=b(">th",d),f={},g=c.p.id+"_";b.each(c.p.colModel,function(b){f[this.name]=b});var j=[];d.each(function(){var a=b(">div",this).get(0).id.replace(/^jqgh_/,"").replace(g,"");f.hasOwnProperty(a)&&j.push(f[a])});b(c).jqGrid("remapColumns",j,true,true);b.isFunction(c.p.sortable.update)&&c.p.sortable.update(j);setTimeout(function(){c.p.disableClick=false},50)}};if(c.p.sortable.options){b.extend(e,c.p.sortable.options)}else{if(b.isFunction(c.p.sortable)){c.p.sortable={update:c.p.sortable}}}if(e.start){var g=e.start;e.start=function(b,a){d();g.call(this,b,a)}}else{e.start=d}if(c.p.sortable.exclude){e.items=e.items+(":not("+c.p.sortable.exclude+")")}a.sortable(e).data("sortable").floating=true})},columnChooser:function(a){function d(a,c){a&&(typeof a==="string"?b.fn[a]&&b.fn[a].apply(c,b.makeArray(arguments).slice(2)):b.isFunction(a)&&a.apply(c,b.makeArray(arguments).slice(2)))}var c=this;if(!b("#colchooser_"+b.jgrid.jqID(c[0].p.id)).length){var e=b('<div id="colchooser_'+c[0].p.id+'" style="position:relative;overflow:hidden"><div><select multiple="multiple"></select></div></div>'),g=b("select",e),a=b.extend({width:420,height:240,classname:null,done:function(b){b&&c.jqGrid("remapColumns",b,true)},msel:"multiselect",dlog:"dialog",dialog_opts:{minWidth:470},dlog_opts:function(a){var c={};c[a.bSubmit]=function(){a.apply_perm();a.cleanup(false)};c[a.bCancel]=function(){a.cleanup(true)};return b.extend(true,{buttons:c,close:function(){a.cleanup(true)},modal:a.modal||false,resizable:a.resizable||true,width:a.width+20},a.dialog_opts||{})},apply_perm:function(){b("option",g).each(function(){this.selected?c.jqGrid("showCol",i[this.value].name):c.jqGrid("hideCol",i[this.value].name)});var e=[];b("option:selected",g).each(function(){e.push(parseInt(this.value,10))});b.each(e,function(){delete m[i[parseInt(this,10)].name]});b.each(m,function(){var b=parseInt(this,10);var a=e,c=b;if(c>=0){var d=a.slice(),i=d.splice(c,Math.max(a.length-c,c));if(c>a.length){c=a.length}d[c]=b;e=d.concat(i)}else{e=void 0}});a.done&&a.done.call(c,e)},cleanup:function(b){d(a.dlog,e,"destroy");d(a.msel,g,"destroy");e.remove();b&&a.done&&a.done.call(c)},msel_opts:{}},b.jgrid.col,a||{});if(b.ui&&b.ui.multiselect&&a.msel==="multiselect"){if(!b.jgrid._multiselect){alert("Multiselect plugin loaded after jqGrid. Please load the plugin before the jqGrid!");return}a.msel_opts=b.extend(b.ui.multiselect.defaults,a.msel_opts)}a.caption&&e.attr("title",a.caption);if(a.classname){e.addClass(a.classname);g.addClass(a.classname)}if(a.width){b(">div",e).css({width:a.width,margin:"0 auto"});g.css("width",a.width)}if(a.height){b(">div",e).css("height",a.height);g.css("height",a.height-10)}var i=c.jqGrid("getGridParam","colModel"),q=c.jqGrid("getGridParam","colNames"),m={},f=[];g.empty();b.each(i,function(a){m[this.name]=a;this.hidedlg?this.hidden||f.push(a):g.append("<option value='"+a+"' "+(this.hidden?"":"selected='selected'")+">"+b.jgrid.stripHtml(q[a])+"</option>")});var n=b.isFunction(a.dlog_opts)?a.dlog_opts.call(c,a):a.dlog_opts;d(a.dlog,e,n);n=b.isFunction(a.msel_opts)?a.msel_opts.call(c,a):a.msel_opts;d(a.msel,g,n)}},sortableRows:function(a){return this.each(function(){var d=this;if(d.grid&&!d.p.treeGrid&&b.fn.sortable){a=b.extend({cursor:"move",axis:"y",items:".jqgrow"},a||{});if(a.start&&b.isFunction(a.start)){a._start_=a.start;delete a.start}else{a._start_=false}if(a.update&&b.isFunction(a.update)){a._update_=a.update;delete a.update}else{a._update_=false}a.start=function(c,e){b(e.item).css("border-width","0px");b("td",e.item).each(function(b){this.style.width=d.grid.cols[b].style.width});if(d.p.subGrid){var g=b(e.item).attr("id");try{b(d).jqGrid("collapseSubGridRow",g)}catch(i){}}a._start_&&a._start_.apply(this,[c,e])};a.update=function(c,e){b(e.item).css("border-width","");d.p.rownumbers===true&&b("td.jqgrid-rownum",d.rows).each(function(a){b(this).html(a+1+(parseInt(d.p.page,10)-1)*parseInt(d.p.rowNum,10))});a._update_&&a._update_.apply(this,[c,e])};b("tbody:first",d).sortable(a);b("tbody:first",d).disableSelection()}})},gridDnD:function(a){return this.each(function(){function d(){var a=b.data(c,"dnd");b("tr.jqgrow:not(.ui-draggable)",c).draggable(b.isFunction(a.drag)?a.drag.call(b(c),a):a.drag)}var c=this,e,g;if(c.grid&&!c.p.treeGrid&&b.fn.draggable&&b.fn.droppable){b("#jqgrid_dnd")[0]===void 0&&b("body").append("<table id='jqgrid_dnd' class='ui-jqgrid-dnd'></table>");if(typeof a==="string"&&a==="updateDnD"&&c.p.jqgdnd===true){d()}else{a=b.extend({drag:function(a){return b.extend({start:function(e,d){var f;if(c.p.subGrid){f=b(d.helper).attr("id");try{b(c).jqGrid("collapseSubGridRow",f)}catch(g){}}for(f=0;f<b.data(c,"dnd").connectWith.length;f++){b(b.data(c,"dnd").connectWith[f]).jqGrid("getGridParam","reccount")===0&&b(b.data(c,"dnd").connectWith[f]).jqGrid("addRowData","jqg_empty_row",{})}d.helper.addClass("ui-state-highlight");b("td",d.helper).each(function(b){this.style.width=c.grid.headers[b].width+"px"});a.onstart&&b.isFunction(a.onstart)&&a.onstart.call(b(c),e,d)},stop:function(e,d){var f;if(d.helper.dropped&&!a.dragcopy){f=b(d.helper).attr("id");f===void 0&&(f=b(this).attr("id"));b(c).jqGrid("delRowData",f)}for(f=0;f<b.data(c,"dnd").connectWith.length;f++){b(b.data(c,"dnd").connectWith[f]).jqGrid("delRowData","jqg_empty_row")}a.onstop&&b.isFunction(a.onstop)&&a.onstop.call(b(c),e,d)}},a.drag_opts||{})},drop:function(a){return b.extend({accept:function(a){if(!b(a).hasClass("jqgrow")){return a}a=b(a).closest("table.ui-jqgrid-btable");if(a.length>0&&b.data(a[0],"dnd")!==void 0){a=b.data(a[0],"dnd").connectWith;return b.inArray("#"+b.jgrid.jqID(this.id),a)!==-1?true:false}return false},drop:function(e,d){if(b(d.draggable).hasClass("jqgrow")){var f=b(d.draggable).attr("id"),f=d.draggable.parent().parent().jqGrid("getRowData",f);if(!a.dropbyname){var g=0,j={},h,l,p=b("#"+b.jgrid.jqID(this.id)).jqGrid("getGridParam","colModel");try{for(l in f){if(f.hasOwnProperty(l)){h=p[g].name;h==="cb"||h==="rn"||h==="subgrid"||f.hasOwnProperty(l)&&p[g]&&(j[h]=f[l]);g++}}f=j}catch(o){}}d.helper.dropped=true;if(a.beforedrop&&b.isFunction(a.beforedrop)){h=a.beforedrop.call(this,e,d,f,b("#"+b.jgrid.jqID(c.p.id)),b(this));h!==void 0&&h!==null&&typeof h==="object"&&(f=h)}if(d.helper.dropped){var k;if(a.autoid){if(b.isFunction(a.autoid)){k=a.autoid.call(this,f)}else{k=Math.ceil(Math.random()*1000);k=a.autoidprefix+k}}b("#"+b.jgrid.jqID(this.id)).jqGrid("addRowData",k,f,a.droppos)}a.ondrop&&b.isFunction(a.ondrop)&&a.ondrop.call(this,e,d,f)}}},a.drop_opts||{})},onstart:null,onstop:null,beforedrop:null,ondrop:null,drop_opts:{activeClass:"ui-state-active",hoverClass:"ui-state-hover"},drag_opts:{revert:"invalid",helper:"clone",cursor:"move",appendTo:"#jqgrid_dnd",zIndex:5000},dragcopy:false,dropbyname:false,droppos:"first",autoid:true,autoidprefix:"dnd_"},a||{});if(a.connectWith){a.connectWith=a.connectWith.split(",");a.connectWith=b.map(a.connectWith,function(a){return b.trim(a)});b.data(c,"dnd",a);c.p.reccount!==0&&!c.p.jqgdnd&&d();c.p.jqgdnd=true;for(e=0;e<a.connectWith.length;e++){g=a.connectWith[e];b(g).droppable(b.isFunction(a.drop)?a.drop.call(b(c),a):a.drop)}}}}})},gridResize:function(a){return this.each(function(){var d=this,c=b.jgrid.jqID(d.p.id);if(d.grid&&b.fn.resizable){a=b.extend({},a||{});if(a.alsoResize){a._alsoResize_=a.alsoResize;delete a.alsoResize}else{a._alsoResize_=false}if(a.stop&&b.isFunction(a.stop)){a._stop_=a.stop;delete a.stop}else{a._stop_=false}a.stop=function(e,g){b(d).jqGrid("setGridParam",{height:b("#gview_"+c+" .ui-jqgrid-bdiv").height()});b(d).jqGrid("setGridWidth",g.size.width,a.shrinkToFit);a._stop_&&a._stop_.call(d,e,g)};a.alsoResize=a._alsoResize_?eval("("+("{'#gview_"+c+" .ui-jqgrid-bdiv':true,'"+a._alsoResize_+"':true}")+")"):b(".ui-jqgrid-bdiv","#gview_"+c);delete a._alsoResize_;b("#gbox_"+c).resizable(a)}})}})})(jQuery);